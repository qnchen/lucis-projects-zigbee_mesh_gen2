###############################################################################
#
# IAR C/C++ Compiler V9.30.1.3056 for 8051                21/Apr/2017  17:48:39
# Copyright 2004-2015 IAR Systems AB.
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\Source\GenericApp.c
#    Command line       =  
#        -f "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wRouter.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DRTR_NWK) -f "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x04000000 -DZDAPP_CONFIG_PAN_ID=0x0085
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=5
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07,
#        0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C,
#        0x0D}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440) -DCHANNEL_CNT=0x01 "C:\Texas
#        Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\Source\GenericApp.c" -D
#        ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC -D
#        LCD_SUPPORTED=DEBUG -D xNV_RESTORE -D NV_INIT -D OPEN_FCS -D
#        PANID_INCREASE -lC "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List" -lA
#        "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List"
#        --diag_suppress Pe001,Pa010 -o "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\Obj" -e
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa --debug
#        --core=plain --dptr=16,1 --data_model=large --code_model=banked
#        --calling_convention=xdata_reentrant --place_constants=data_rom
#        --nr_virtual_regs 16 -I "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\" -I "C:\Texas
#        Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\Source\" -I
#        "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Application\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\ZMain\TI2530DB\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\hal\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mt\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\osal\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\services\saddr\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\services\sdata\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\af\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sec\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sys\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\zmac\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
#        -On --require_prototypes
#    List file          =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List\GenericApp.lst
#    Object file        =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\Obj\GenericApp.r51
#
###############################################################################

C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh 1.0.0\Projects\zstack\Samples\GenericApp\Source\GenericApp.c
      1          /******************************************************************************
      2            Filename:       GenericApp.c
      3            Revised:        $Date: 2014-09-07 13:36:30 -0700 (Sun, 07 Sep 2014) $
      4            Revision:       $Revision: 40046 $
      5          
      6            Description:    Generic Application (no Profile).
      7          
      8          
      9            Copyright 2004-2014 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License"). You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product. Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          ******************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful - it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application periodically sends a "Hello World" message to
     45            another "Generic" application (see 'txMsgDelay'). The application
     46            will also receive "Hello World" packets.
     47          
     48            This application doesn't have a profile, so it handles everything
     49            directly - by itself.
     50          
     51            Key control:
     52              SW1:  changes the delay between TX packets
     53              SW2:  initiates end device binding
     54              SW3:
     55              SW4:  initiates a match description request
     56          *********************************************************************/
     57          
     58          /*********************************************************************
     59           * INCLUDES
     60           */
     61          #include "OSAL.h"
     62          #include "AF.h"
     63          #include "ZDApp.h"
     64          #include "ZDObject.h"
     65          #include "ZDProfile.h"
     66          
     67          #include "GenericApp.h"
     68          #include "DebugTrace.h"
     69          
     70          #if !defined( WIN32 ) || defined( ZBIT )
     71            #include "OnBoard.h"
     72          #endif
     73          
     74          /* HAL */
     75          #include "hal_lcd.h"
     76          #include "hal_led.h"
     77          #include "hal_key.h"
     78          #include "hal_uart.h"
     79          
     80          #include "MT_UART.h"
     81          #include "OSAL_Clock.h"
     82          
     83          #include "ZDSecMgr.h"
     84          #include "ProtocolHandler.h"
     85          #include "NodeAuth.h"
     86          
     87          #include "stdlib.h"
     88          
     89          /* RTOS */
     90          #if defined( IAR_ARMCM3_LM )
     91          #include "RTOS_App.h"
     92          #endif
     93          
     94          /*********************************************************************
     95           * MACROS
     96           */
     97          
     98          /*********************************************************************
     99           * CONSTANTS
    100           */
    101          
    102          /*********************************************************************
    103           * TYPEDEFS
    104           */
    105          
    106          /*********************************************************************
    107           * GLOBAL VARIABLES
    108           */
    109          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    110          const cId_t GenericApp_ClusterList[GENERICAPP_MAX_CLUSTERS] =
   \                     GenericApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0300         DW 3
   \   000006   0400         DW 4
   \   000008   0500         DW 5
   \   00000A   0600         DW 6
   \   00000C   0700         DW 7
    111          {
    112            GENERICAPP_CLUSTERID,					  
    113            GENERICAPP_DATA_P2P_CLUSTERID, 		  
    114            GENERICAPP_GROUP_CLUSTERID,		  
    115            GENERICAPP_CMD_P2P_CLUSTERID,			  
    116            GENERICAPP_BROADCAST_CLUSTERID,
    117            GENERICAPP_P2P_PERMIT_JOIN_REQ_CLUSTERID,
    118            GENERICAPP_P2P_PERMIT_JOIN_RSP_CLUSTERID
    119          };
    120          

   \                                 In  segment XDATA_ROM_C, align 1
    121          const SimpleDescriptionFormat_t GenericApp_SimpleDesc =
   \                     GenericApp_SimpleDesc:
   \   000000   0A           DB 10
   \   000001   040F         DW 3844
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   07           DB 7
   \   000007   ....         DW GenericApp_ClusterList
   \   000009   07           DB 7
   \   00000A   ....         DW GenericApp_ClusterList
    122          {
    123            GENERICAPP_ENDPOINT,              //  int Endpoint;
    124            GENERICAPP_PROFID,                //  uint16 AppProfId[2];
    125            GENERICAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    126            GENERICAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    127            GENERICAPP_FLAGS,                 //  int   AppFlags:4;
    128            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    129            (cId_t *)GenericApp_ClusterList,  //  byte *pAppInClusterList;
    130            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    131            (cId_t *)GenericApp_ClusterList   //  byte *pAppInClusterList;
    132          };
    133          
    134          // This is the Endpoint/Interface description.  It is defined here, but
    135          // filled-in in GenericApp_Init().  Another way to go would be to fill
    136          // in the structure here and make it a "const" (in code space).  The
    137          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    138          endPointDesc_t GenericApp_epDesc;
   \                     GenericApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    139          
    140          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    141          nodeList_t *nodeList = NULL;
   \                     nodeList:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    142          
    143          
    144          
    145          /*********************************************************************
    146           * EXTERNAL VARIABLES
    147           */
    148          
    149          /*********************************************************************
    150           * EXTERNAL FUNCTIONS
    151           */
    152          
    153          /*********************************************************************
    154           * LOCAL VARIABLES
    155           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          byte GenericApp_TaskID;   // Task ID for internal task/event processing
   \                     GenericApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    157                                    // This variable will be received when
    158                                    // GenericApp_Init() is called.
    159          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    160          devStates_t GenericApp_NwkState;
   \                     GenericApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    161          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    162          byte GenericApp_TransID;  // This is the unique message ID (counter)
   \                     GenericApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    163          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    164          afAddrType_t GenericApp_DstAddr;
   \                     GenericApp_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    165          afAddrType_t SerialApp_TxAddr_broadcast;
   \                     SerialApp_TxAddr_broadcast:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    166          afAddrType_t SerialApp_TxAddr_group;
   \                     SerialApp_TxAddr_group:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    167          afAddrType_t SerialApp_TxAddr_p2p;
   \                     SerialApp_TxAddr_p2p:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    168          
    169          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    170          uint8 ping_result;
   \                     ping_result:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    171          uint8 ping_error_cnt;
   \                     ping_error_cnt:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    172          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    173          uint8 zc_online_report_cnt =0;
   \                     zc_online_report_cnt:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    174          uint8 zr_online_report_cnt =0;
   \                     zr_online_report_cnt:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    175          
    176          
    177          // Number of recieved messages

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    178          static uint16 rxMsgCount;
   \                     rxMsgCount:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    179          
    180          #if defined( LCD_SUPPORTED )		

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    181          static uint16 askWhiteListCount;   //chaokw panid
   \                     askWhiteListCount:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    182          #endif
    183          
    184          // Time interval between sending messages

   \                                 In  segment XDATA_I, align 1, keep-with-next
    185          static uint32 txMsgDelay = GENERICAPP_SEND_MSG_TIMEOUT;
   \                     txMsgDelay:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for txMsgDelay>`
   \   000004                REQUIRE __INIT_XDATA_I
    186          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    187          const uint8* fw_version = ZIGBEE_FW_VERSION;
   \                     fw_version:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for fw_version>`
   \   000002                REQUIRE __INIT_XDATA_I
    188          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    189          uint8 transfer_join_times = 0;  //chaokw
   \                     transfer_join_times:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    190          
    191          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)		

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    192          uint32 pingRspTime = 0;   //chaokw ping
   \                     pingRspTime:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    193          #endif
    194          
    195          /*********************************************************************
    196           * LOCAL FUNCTIONS
    197           */
    198          static void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    199          static void GenericApp_HandleKeys( byte shift, byte keys );
    200          static void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    201          static void GenericApp_SendTheMessage( void );
    202          
    203          #if defined( IAR_ARMCM3_LM )
    204          static void GenericApp_ProcessRtosMessage( void );
    205          #endif
    206          
    207          /*********************************************************************
    208           * NETWORK LAYER CALLBACKS
    209           */
    210          
    211          /*********************************************************************
    212           * PUBLIC FUNCTIONS
    213           */
    214          
    215          /*********************************************************************
    216           * @fn      GenericApp_Init
    217           *
    218           * @brief   Initialization function for the Generic App Task.
    219           *          This is called during initialization and should contain
    220           *          any application specific initialization (ie. hardware
    221           *          initialization/setup, table initialization, power up
    222           *          notificaiton ... ).
    223           *
    224           * @param   task_id - the ID assigned by OSAL.  This ID should be
    225           *                    used to send messages and set timers.
    226           *
    227           * @return  none
    228           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    229          void GenericApp_Init( uint8 task_id )
   \                     GenericApp_Init:
    230          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    231            GenericApp_TaskID = task_id;
   \   000007   EE           MOV     A,R6
   \   000008   90....       MOV     DPTR,#GenericApp_TaskID
   \   00000B   F0           MOVX    @DPTR,A
    232            GenericApp_NwkState = DEV_INIT;
   \   00000C   90....       MOV     DPTR,#GenericApp_NwkState
   \   00000F   7401         MOV     A,#0x1
   \   000011   F0           MOVX    @DPTR,A
    233            GenericApp_TransID = 0;
   \   000012   90....       MOV     DPTR,#GenericApp_TransID
   \   000015   7400         MOV     A,#0x0
   \   000017   F0           MOVX    @DPTR,A
    234          
    235            // Device hardware initialization can be added here or in main() (Zmain.c).
    236            // If the hardware is application specific - add it here.
    237            // If the hardware is other parts of the device add it in main().
    238          
    239            GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000018   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   00001B   7402         MOV     A,#0x2
   \   00001D   F0           MOVX    @DPTR,A
    240            GenericApp_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   00001E   90....       MOV     DPTR,#GenericApp_DstAddr + 9
   \   000021   740A         MOV     A,#0xa
   \   000023   F0           MOVX    @DPTR,A
    241            GenericApp_DstAddr.addr.shortAddr = 0;
   \   000024   90....       MOV     DPTR,#GenericApp_DstAddr
   \   000027   7400         MOV     A,#0x0
   \   000029   F0           MOVX    @DPTR,A
   \   00002A   A3           INC     DPTR
   \   00002B   7400         MOV     A,#0x0
   \   00002D   F0           MOVX    @DPTR,A
    242          
    243            // Fill out the endpoint description.
    244            GenericApp_epDesc.endPoint = GENERICAPP_ENDPOINT;
   \   00002E   90....       MOV     DPTR,#GenericApp_epDesc
   \   000031   740A         MOV     A,#0xa
   \   000033   F0           MOVX    @DPTR,A
    245            GenericApp_epDesc.task_id = &GenericApp_TaskID;
   \   000034   90....       MOV     DPTR,#GenericApp_epDesc + 1
   \   000037   74..         MOV     A,#GenericApp_TaskID & 0xff
   \   000039   F0           MOVX    @DPTR,A
   \   00003A   A3           INC     DPTR
   \   00003B   74..         MOV     A,#(GenericApp_TaskID >> 8) & 0xff
   \   00003D   F0           MOVX    @DPTR,A
    246            GenericApp_epDesc.simpleDesc
    247                      = (SimpleDescriptionFormat_t *)&GenericApp_SimpleDesc;
   \   00003E   90....       MOV     DPTR,#GenericApp_epDesc + 3
   \   000041   74..         MOV     A,#GenericApp_SimpleDesc & 0xff
   \   000043   F0           MOVX    @DPTR,A
   \   000044   A3           INC     DPTR
   \   000045   74..         MOV     A,#(GenericApp_SimpleDesc >> 8) & 0xff
   \   000047   F0           MOVX    @DPTR,A
    248            GenericApp_epDesc.latencyReq = noLatencyReqs;
   \   000048   90....       MOV     DPTR,#GenericApp_epDesc + 5
   \   00004B   7400         MOV     A,#0x0
   \   00004D   F0           MOVX    @DPTR,A
    249          
    250          
    251              //broadcast to everyone
    252              SerialApp_TxAddr_broadcast.addrMode = (afAddrMode_t)AddrBroadcast;
   \   00004E   90....       MOV     DPTR,#SerialApp_TxAddr_broadcast + 8
   \   000051   740F         MOV     A,#0xf
   \   000053   F0           MOVX    @DPTR,A
    253              SerialApp_TxAddr_broadcast.endPoint = GENERICAPP_ENDPOINT;
   \   000054   90....       MOV     DPTR,#SerialApp_TxAddr_broadcast + 9
   \   000057   740A         MOV     A,#0xa
   \   000059   F0           MOVX    @DPTR,A
    254              SerialApp_TxAddr_broadcast.addr.shortAddr = 0xFFFF;
   \   00005A   90....       MOV     DPTR,#SerialApp_TxAddr_broadcast
   \   00005D   74FF         MOV     A,#-0x1
   \   00005F   F0           MOVX    @DPTR,A
   \   000060   A3           INC     DPTR
   \   000061   74FF         MOV     A,#-0x1
   \   000063   F0           MOVX    @DPTR,A
    255          
    256              //send to group
    257              SerialApp_TxAddr_group.addrMode = (afAddrMode_t)AddrGroup;
   \   000064   90....       MOV     DPTR,#SerialApp_TxAddr_group + 8
   \   000067   7401         MOV     A,#0x1
   \   000069   F0           MOVX    @DPTR,A
    258              SerialApp_TxAddr_group.endPoint = GENERICAPP_ENDPOINT;
   \   00006A   90....       MOV     DPTR,#SerialApp_TxAddr_group + 9
   \   00006D   740A         MOV     A,#0xa
   \   00006F   F0           MOVX    @DPTR,A
    259              SerialApp_TxAddr_group.addr.shortAddr = 0x0000;
   \   000070   90....       MOV     DPTR,#SerialApp_TxAddr_group
   \   000073   7400         MOV     A,#0x0
   \   000075   F0           MOVX    @DPTR,A
   \   000076   A3           INC     DPTR
   \   000077   7400         MOV     A,#0x0
   \   000079   F0           MOVX    @DPTR,A
    260          	
    261              //point  to point
    262              SerialApp_TxAddr_p2p.addrMode = (afAddrMode_t)Addr16Bit;
   \   00007A   90....       MOV     DPTR,#SerialApp_TxAddr_p2p + 8
   \   00007D   7402         MOV     A,#0x2
   \   00007F   F0           MOVX    @DPTR,A
    263              SerialApp_TxAddr_p2p.endPoint = GENERICAPP_ENDPOINT;
   \   000080   90....       MOV     DPTR,#SerialApp_TxAddr_p2p + 9
   \   000083   740A         MOV     A,#0xa
   \   000085   F0           MOVX    @DPTR,A
    264              SerialApp_TxAddr_p2p.addr.shortAddr = 0x0000;
   \   000086   90....       MOV     DPTR,#SerialApp_TxAddr_p2p
   \   000089   7400         MOV     A,#0x0
   \   00008B   F0           MOVX    @DPTR,A
   \   00008C   A3           INC     DPTR
   \   00008D   7400         MOV     A,#0x0
   \   00008F   F0           MOVX    @DPTR,A
    265          
    266          
    267            // Register the endpoint description with the AF
    268            afRegister( &GenericApp_epDesc );
   \   000090                ; Setup parameters for call to function afRegister
   \   000090   7A..         MOV     R2,#GenericApp_epDesc & 0xff
   \   000092   7B..         MOV     R3,#(GenericApp_epDesc >> 8) & 0xff
   \   000094   12....       LCALL   `??afRegister::?relay`; Banked call to: afRegister
   \   000097   E9           MOV     A,R1
    269          
    270            // Register for all key events - This app will handle all key events
    271            RegisterForKeys( GenericApp_TaskID );
   \   000098                ; Setup parameters for call to function RegisterForKeys
   \   000098   90....       MOV     DPTR,#GenericApp_TaskID
   \   00009B   E0           MOVX    A,@DPTR
   \   00009C   F9           MOV     R1,A
   \   00009D   12....       LCALL   `??RegisterForKeys::?relay`; Banked call to: RegisterForKeys
   \   0000A0   E9           MOV     A,R1
    272          
    273            // Update the display
    274          #if defined ( LCD_SUPPORTED )
    275            HalLcdWriteString( "GenericApp", HAL_LCD_LINE_1 );
   \   0000A1                ; Setup parameters for call to function HalLcdWriteString
   \   0000A1   7901         MOV     R1,#0x1
   \   0000A3   7A..         MOV     R2,#`?<Constant "GenericApp">` & 0xff
   \   0000A5   7B..         MOV     R3,#(`?<Constant "GenericApp">` >> 8) & 0xff
   \   0000A7   12....       LCALL   `??HalLcdWriteString::?relay`; Banked call to: HalLcdWriteString
    276          #endif
    277          
    278            ZDO_RegisterForZDOMsg( GenericApp_TaskID, End_Device_Bind_rsp );
   \   0000AA                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   0000AA   7A20         MOV     R2,#0x20
   \   0000AC   7B80         MOV     R3,#-0x80
   \   0000AE   90....       MOV     DPTR,#GenericApp_TaskID
   \   0000B1   E0           MOVX    A,@DPTR
   \   0000B2   F9           MOV     R1,A
   \   0000B3   12....       LCALL   `??ZDO_RegisterForZDOMsg::?relay`; Banked call to: ZDO_RegisterForZDOMsg
   \   0000B6   E9           MOV     A,R1
    279            ZDO_RegisterForZDOMsg( GenericApp_TaskID, Match_Desc_rsp );
   \   0000B7                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   0000B7   7A06         MOV     R2,#0x6
   \   0000B9   7B80         MOV     R3,#-0x80
   \   0000BB   90....       MOV     DPTR,#GenericApp_TaskID
   \   0000BE   E0           MOVX    A,@DPTR
   \   0000BF   F9           MOV     R1,A
   \   0000C0   12....       LCALL   `??ZDO_RegisterForZDOMsg::?relay`; Banked call to: ZDO_RegisterForZDOMsg
   \   0000C3   E9           MOV     A,R1
    280            
    281          #if( ZSTACK_DEVICE_BUILD == DEVICE_BUILD_COORDINATOR)
    282              ZDO_RegisterForZDOMsg( GenericApp_TaskID, Device_annce );  //chaokw
    283          #endif 
    284          
    285          
    286          #if defined( IAR_ARMCM3_LM )
    287            // Register this task with RTOS task initiator
    288            RTOS_RegisterApp( task_id, GENERICAPP_RTOS_MSG_EVT );
    289          #endif
    290          
    291              CustomApp_zigbee_start_ind(); //chaokw lucis	
   \   0000C4                ; Setup parameters for call to function CustomApp_zigbee_start_ind
   \   0000C4   12....       LCALL   `??CustomApp_zigbee_start_ind::?relay`; Banked call to: CustomApp_zigbee_start_ind
    292          
    293          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)	
    294              Register_Group_Multiway();
   \   0000C7                ; Setup parameters for call to function Register_Group_Multiway
   \   0000C7   12....       LCALL   `??Register_Group_Multiway::?relay`; Banked call to: Register_Group_Multiway
    295          #endif
    296              
    297          #if( ZSTACK_DEVICE_BUILD == DEVICE_BUILD_COORDINATOR)
    298              CustomApp_loadstatus_ind();
    299              CustomApp_linkstatus_init();   //chaokw debug
    300          
    301          
    302              //CustomApp_coordinater_broadcast_ping();
    303          	
    304          #if  NODE_AUTH 	
    305              Node_auth_init();
    306          #endif    
    307          #endif    
    308          
    309          #if defined( ZDO_COORDINATOR ) && defined( WIFI_FREQUENCY_SELECT )
    310              //CustomApp_WifiChannelReq();
    311          #endif
    312          
    313          #ifdef WDT_IN_PM1
    314            osal_start_timerEx( GenericApp_TaskID,
    315                                GENERICAPP_FEED_DOG_EVT,
    316                                GENERICAPP_FEED_DOG_TIME_MAX);
    317          #endif
    318          
    319          }
   \   0000CA   7F01         MOV     R7,#0x1
   \   0000CC   02....       LJMP    ?BANKED_LEAVE_XDATA
    320          
    321          /*********************************************************************
    322           * @fn      GenericApp_ProcessEvent
    323           *
    324           * @brief   Generic Application Task event processor.  This function
    325           *          is called to process all events for the task.  Events
    326           *          include timers, messages and any other user defined events.
    327           *
    328           * @param   task_id  - The OSAL assigned task ID.
    329           * @param   events - events to process.  This is a bit map and can
    330           *                   contain more than one event.
    331           *
    332           * @return  none
    333           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    334          uint16 GenericApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     GenericApp_ProcessEvent:
    335          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V7,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    336            afIncomingMSGPacket_t *MSGpkt;
    337            afDataConfirm_t *afDataConfirm;
    338          
    339            // Data Confirmation message fields
    340            byte sentEP;
    341          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR) 
    342            ZStatus_t sentStatus;
    343          #endif 
    344            byte sentTransID;       // This should match the value sent
    345            (void)task_id;  // Intentionally unreferenced parameter
    346          
    347            if (events & GENERICAPP_FEED_DOG_EVT)
   \   00000B   EE           MOV     A,R6
   \   00000C   5400         ANL     A,#0x0
   \   00000E   F8           MOV     R0,A
   \   00000F   EF           MOV     A,R7
   \   000010   5404         ANL     A,#0x4
   \   000012   F9           MOV     R1,A
   \   000013   E8           MOV     A,R0
   \   000014   49           ORL     A,R1
   \   000015   600B         JZ      ??GenericApp_ProcessEvent_0
    348            {
    349          #ifdef WDT_IN_PM1
    350                  WatchDogFeedDog();
    351                  osal_start_timerEx( GenericApp_TaskID,
    352                                GENERICAPP_FEED_DOG_EVT,
    353                                GENERICAPP_FEED_DOG_TIME_MAX);
    354          #endif
    355                  return (events ^ GENERICAPP_FEED_DOG_EVT);
   \   000017   EE           MOV     A,R6
   \   000018   6400         XRL     A,#0x0
   \   00001A   FA           MOV     R2,A
   \   00001B   EF           MOV     A,R7
   \   00001C   6404         XRL     A,#0x4
   \   00001E   FB           MOV     R3,A
   \   00001F   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    356            }
    357          
    358            if ( events & SYS_EVENT_MSG )
   \                     ??GenericApp_ProcessEvent_0:
   \   000022   EE           MOV     A,R6
   \   000023   5400         ANL     A,#0x0
   \   000025   F8           MOV     R0,A
   \   000026   EF           MOV     A,R7
   \   000027   5480         ANL     A,#0x80
   \   000029   F9           MOV     R1,A
   \   00002A   E8           MOV     A,R0
   \   00002B   49           ORL     A,R1
   \   00002C   7003         JNZ     $+5
   \   00002E   02....       LJMP    ??GenericApp_ProcessEvent_2 & 0xFFFF
    359            {
    360              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000031                ; Setup parameters for call to function osal_msg_receive
   \   000031   90....       MOV     DPTR,#GenericApp_TaskID
   \   000034   E0           MOVX    A,@DPTR
   \   000035   F9           MOV     R1,A
   \   000036   12....       LCALL   `??osal_msg_receive::?relay`; Banked call to: osal_msg_receive
   \   000039   8A..         MOV     ?V8,R2
   \   00003B   8B..         MOV     ?V9,R3
   \   00003D   85....       MOV     ?V0,?V8
   \   000040   85....       MOV     ?V1,?V9
    361              while ( MSGpkt )
   \                     ??GenericApp_ProcessEvent_3:
   \   000043   E5..         MOV     A,?V0
   \   000045   45..         ORL     A,?V1
   \   000047   7003         JNZ     $+5
   \   000049   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
    362              {
    363                switch ( MSGpkt->hdr.event )
   \   00004C   85..82       MOV     DPL,?V0
   \   00004F   85..83       MOV     DPH,?V1
   \   000052   E0           MOVX    A,@DPTR
   \   000053   24E6         ADD     A,#-0x1a
   \   000055   7003         JNZ     $+5
   \   000057   02....       LJMP    ??GenericApp_ProcessEvent_5 & 0xFFFF
   \   00005A   245A         ADD     A,#0x5a
   \   00005C   6056         JZ      ??GenericApp_ProcessEvent_6
   \   00005E   24EF         ADD     A,#-0x11
   \   000060   7003         JNZ     $+5
   \   000062   02....       LJMP    ??GenericApp_ProcessEvent_7 & 0xFFFF
   \   000065   24FE         ADD     A,#-0x2
   \   000067   6041         JZ      ??GenericApp_ProcessEvent_8
   \   000069   24F2         ADD     A,#-0xe
   \   00006B   7003         JNZ     $+5
   \   00006D   02....       LJMP    ??GenericApp_ProcessEvent_9 & 0xFFFF
   \   000070   24FE         ADD     A,#-0x2
   \   000072   7003         JNZ     $+5
   \   000074   02....       LJMP    ??GenericApp_ProcessEvent_10 & 0xFFFF
   \   000077   24FC         ADD     A,#-0x4
   \   000079   7003         JNZ     $+5
   \   00007B   02....       LJMP    ??GenericApp_ProcessEvent_11 & 0xFFFF
   \   00007E   14           DEC     A
   \   00007F   7003         JNZ     $+5
   \   000081   02....       LJMP    ??GenericApp_ProcessEvent_12 & 0xFFFF
   \   000084   14           DEC     A
   \   000085   7003         JNZ     $+5
   \   000087   02....       LJMP    ??GenericApp_ProcessEvent_13 & 0xFFFF
   \   00008A   14           DEC     A
   \   00008B   7003         JNZ     $+5
   \   00008D   02....       LJMP    ??GenericApp_ProcessEvent_14 & 0xFFFF
   \   000090   24FE         ADD     A,#-0x2
   \   000092   7003         JNZ     $+5
   \   000094   02....       LJMP    ??GenericApp_ProcessEvent_15 & 0xFFFF
   \   000097   14           DEC     A
   \   000098   7003         JNZ     $+5
   \   00009A   02....       LJMP    ??GenericApp_ProcessEvent_16 & 0xFFFF
   \   00009D   14           DEC     A
   \   00009E   7003         JNZ     $+5
   \   0000A0   02....       LJMP    ??GenericApp_ProcessEvent_17 & 0xFFFF
   \   0000A3   24F1         ADD     A,#-0xf
   \   0000A5   6028         JZ      ??GenericApp_ProcessEvent_18
   \   0000A7   02....       LJMP    ??GenericApp_ProcessEvent_19 & 0xFFFF
    364                {
    365                  case ZDO_CB_MSG:
    366                    GenericApp_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
   \                     ??GenericApp_ProcessEvent_8:
   \   0000AA                ; Setup parameters for call to function GenericApp_ProcessZDOMsgs
   \   0000AA   AA..         MOV     R2,?V0
   \   0000AC   AB..         MOV     R3,?V1
   \   0000AE   12....       LCALL   `??GenericApp_ProcessZDOMsgs::?relay`; Banked call to: GenericApp_ProcessZDOMsgs
    367                    break;
   \   0000B1   02....       LJMP    ??GenericApp_ProcessEvent_19 & 0xFFFF
    368          
    369                  case KEY_CHANGE:
    370                    GenericApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
   \                     ??GenericApp_ProcessEvent_6:
   \   0000B4                ; Setup parameters for call to function GenericApp_HandleKeys
   \   0000B4   85..82       MOV     DPL,?V0
   \   0000B7   85..83       MOV     DPH,?V1
   \   0000BA   A3           INC     DPTR
   \   0000BB   A3           INC     DPTR
   \   0000BC   A3           INC     DPTR
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   FA           MOV     R2,A
   \   0000BF   85..82       MOV     DPL,?V0
   \   0000C2   85..83       MOV     DPH,?V1
   \   0000C5   A3           INC     DPTR
   \   0000C6   A3           INC     DPTR
   \   0000C7   E0           MOVX    A,@DPTR
   \   0000C8   F9           MOV     R1,A
   \   0000C9   12....       LCALL   `??GenericApp_HandleKeys::?relay`; Banked call to: GenericApp_HandleKeys
    371                    break;
   \   0000CC   02....       LJMP    ??GenericApp_ProcessEvent_19 & 0xFFFF
    372          
    373                  case AF_DATA_CONFIRM_CMD:	
    374                    // This message is received as a confirmation of a data packet sent.
    375                    // The status is of ZStatus_t type [defined in ZComDef.h]
    376                    // The message fields are defined in AF.h
    377                    afDataConfirm = (afDataConfirm_t *)MSGpkt;
   \                     ??GenericApp_ProcessEvent_18:
   \   0000CF   85....       MOV     ?V4,?V0
   \   0000D2   85....       MOV     ?V5,?V1
    378          
    379                    sentEP = afDataConfirm->endpoint;
   \   0000D5   85..82       MOV     DPL,?V4
   \   0000D8   85..83       MOV     DPH,?V5
   \   0000DB   A3           INC     DPTR
   \   0000DC   A3           INC     DPTR
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   F5..         MOV     ?V6,A
    380                    (void)sentEP;  // This info not used now
    381                    sentTransID = afDataConfirm->transID;
   \   0000E0   85..82       MOV     DPL,?V4
   \   0000E3   85..83       MOV     DPH,?V5
   \   0000E6   A3           INC     DPTR
   \   0000E7   A3           INC     DPTR
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   F5..         MOV     ?V3,A
    382                    (void)sentTransID;  // This info not used now
    383          
    384          #if 1   //chaokw ping
    385          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)		
    386                    sentStatus = afDataConfirm->hdr.status;
   \   0000EC   85..82       MOV     DPL,?V4
   \   0000EF   85..83       MOV     DPH,?V5
   \   0000F2   A3           INC     DPTR
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   F5..         MOV     ?V2,A
    387                    // Action taken when confirmation is received.
    388                    if ( sentStatus != ZSuccess )
   \   0000F6   E5..         MOV     A,?V2
   \   0000F8   6041         JZ      ??GenericApp_ProcessEvent_20
    389                    {
    390                      // The data wasn't delivered -- Do something
    391          #if defined( LCD_SUPPORTED )
    392                          HalLcdWriteStringValue( (char*)"aps ack:", sentStatus, 16, HAL_LCD_LINE_2 );  //chaokw		
   \   0000FA                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0000FA   75..03       MOV     ?V8,#0x3
   \   0000FD   78..         MOV     R0,#?V8
   \   0000FF   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000102   7910         MOV     R1,#0x10
   \   000104   AC..         MOV     R4,?V2
   \   000106   7D00         MOV     R5,#0x0
   \   000108   7A..         MOV     R2,#`?<Constant "aps ack:">` & 0xff
   \   00010A   7B..         MOV     R3,#(`?<Constant "aps ack:">` >> 8) & 0xff
   \   00010C   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   00010F   7401         MOV     A,#0x1
   \   000111   12....       LCALL   ?DEALLOC_XSTACK8
    393          #endif
    394          
    395          //---------------------------------------
    396          #if 0
    397                          if(0x0000 == _NIB.nwkCoordAddress)
    398                          {
    399                             if(sentStatus == ZMacNoACK)
    400                               ping_error_cnt++;
    401                          }
    402          		  else
    403          		  {
    404          		     if(sentStatus == ZApsNoAck)
    405                               ping_error_cnt++;
    406          		  }
    407          #else
    408                          ping_error_cnt++;
   \   000114   90....       MOV     DPTR,#ping_error_cnt
   \   000117   E0           MOVX    A,@DPTR
   \   000118   2401         ADD     A,#0x1
   \   00011A   F0           MOVX    @DPTR,A
    409          #endif
    410          //----------------------------------------
    411          
    412                          if(ping_error_cnt < TIMEOUT_CNT)
   \   00011B   90....       MOV     DPTR,#ping_error_cnt
   \   00011E   E0           MOVX    A,@DPTR
   \   00011F   C3           CLR     C
   \   000120   9404         SUBB    A,#0x4
   \   000122   4023         JC      ??GenericApp_ProcessEvent_21
    413                          {
    414          		      //SerialApp_ping_request_init();
    415                          }
    416          		  else if(ping_error_cnt > TIMEOUT_CNT)
   \   000124   90....       MOV     DPTR,#ping_error_cnt
   \   000127   E0           MOVX    A,@DPTR
   \   000128   C3           CLR     C
   \   000129   9405         SUBB    A,#0x5
   \   00012B   401A         JC      ??GenericApp_ProcessEvent_21
    417          		  {
    418                              ping_error_cnt = TIMEOUT_CNT;
   \   00012D   90....       MOV     DPTR,#ping_error_cnt
   \   000130   7404         MOV     A,#0x4
   \   000132   F0           MOVX    @DPTR,A
    419          		      ping_result = 1;
   \   000133   90....       MOV     DPTR,#ping_result
   \   000136   7401         MOV     A,#0x1
   \   000138   F0           MOVX    @DPTR,A
   \   000139   800C         SJMP    ??GenericApp_ProcessEvent_21
    420                              // rejoin network by zstack?
    421          #if 0  //chaokw
    422          		      // restart and clear NV mwk info
    423          #if defined(NV_INIT) && defined(NV_RESTORE)
    424                              NLME_InitNV();
    425                              NLME_SetDefaultNV();
    426                              ZDSecMgrClearNVKeyValues();
    427          #endif
    428                              Onboard_soft_reset();	
    429          #else
    430                              //Onboard_soft_reset();	 //chaokw ping
    431          #endif
    432          		  }
    433                    }
    434                    else
    435                    {
    436                              ping_error_cnt = 0;    //chaokw 20170412
   \                     ??GenericApp_ProcessEvent_20:
   \   00013B   90....       MOV     DPTR,#ping_error_cnt
   \   00013E   7400         MOV     A,#0x0
   \   000140   F0           MOVX    @DPTR,A
    437                              ping_result = 0;
   \   000141   90....       MOV     DPTR,#ping_result
   \   000144   7400         MOV     A,#0x0
   \   000146   F0           MOVX    @DPTR,A
    438          	   }
    439          #if defined( LCD_SUPPORTED )		  
    440                    HalLcdWriteStringValue( (char*)"pingresult", ping_result, 10, HAL_LCD_LINE_1 );
   \                     ??GenericApp_ProcessEvent_21:
   \   000147                ; Setup parameters for call to function HalLcdWriteStringValue
   \   000147   75..01       MOV     ?V8,#0x1
   \   00014A   78..         MOV     R0,#?V8
   \   00014C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00014F   790A         MOV     R1,#0xa
   \   000151   90....       MOV     DPTR,#ping_result
   \   000154   E0           MOVX    A,@DPTR
   \   000155   FC           MOV     R4,A
   \   000156   7D00         MOV     R5,#0x0
   \   000158   7A..         MOV     R2,#`?<Constant "pingresult">` & 0xff
   \   00015A   7B..         MOV     R3,#(`?<Constant "pingresult">` >> 8) & 0xff
   \   00015C   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   00015F   7401         MOV     A,#0x1
   \   000161   12....       LCALL   ?DEALLOC_XSTACK8
    441          #endif
    442          #endif
    443          #endif
    444          
    445                    break;
   \   000164   02....       LJMP    ??GenericApp_ProcessEvent_19 & 0xFFFF
    446          
    447                  case AF_INCOMING_MSG_CMD:
    448                    GenericApp_MessageMSGCB( MSGpkt );
   \                     ??GenericApp_ProcessEvent_5:
   \   000167                ; Setup parameters for call to function GenericApp_MessageMSGCB
   \   000167   AA..         MOV     R2,?V0
   \   000169   AB..         MOV     R3,?V1
   \   00016B   12....       LCALL   `??GenericApp_MessageMSGCB::?relay`; Banked call to: GenericApp_MessageMSGCB
    449                    break;
   \   00016E   02....       LJMP    ??GenericApp_ProcessEvent_19 & 0xFFFF
    450          
    451                  case ZDO_STATE_CHANGE:
    452                    GenericApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??GenericApp_ProcessEvent_7:
   \   000171   85..82       MOV     DPL,?V0
   \   000174   85..83       MOV     DPH,?V1
   \   000177   A3           INC     DPTR
   \   000178   E0           MOVX    A,@DPTR
   \   000179   90....       MOV     DPTR,#GenericApp_NwkState
   \   00017C   F0           MOVX    @DPTR,A
    453          
    454                    if ((_NIB.nwkPanId >= (ZDAPP_CONFIG_PAN_ID + PANID_INCREASE_CNT))   //chaokw panid
    455                      || (zgConfigPANID >= (ZDAPP_CONFIG_PAN_ID + PANID_INCREASE_CNT)))
   \   00017D   90....       MOV     DPTR,#_NIB + 33
   \   000180   C3           CLR     C
   \   000181   E0           MOVX    A,@DPTR
   \   000182   948B         SUBB    A,#-0x75
   \   000184   A3           INC     DPTR
   \   000185   E0           MOVX    A,@DPTR
   \   000186   9400         SUBB    A,#0x0
   \   000188   500D         JNC     ??GenericApp_ProcessEvent_22
   \   00018A   90....       MOV     DPTR,#zgConfigPANID
   \   00018D   C3           CLR     C
   \   00018E   E0           MOVX    A,@DPTR
   \   00018F   948B         SUBB    A,#-0x75
   \   000191   A3           INC     DPTR
   \   000192   E0           MOVX    A,@DPTR
   \   000193   9400         SUBB    A,#0x0
   \   000195   4003         JC      ??GenericApp_ProcessEvent_23
    456                    {
    457            #if defined(NV_INIT) && defined(NV_RESTORE)
    458                        NLME_InitNV();
    459                        NLME_SetDefaultNV();
    460                        ZDSecMgrClearNVKeyValues();
    461            #endif
    462                        Onboard_soft_reset();
   \                     ??GenericApp_ProcessEvent_22:
   \   000197                ; Setup parameters for call to function Onboard_soft_reset
   \   000197   12....       LCALL   Onboard_soft_reset & 0xFFFF
    463                    }            
    464          
    465          
    466          #if defined( LCD_SUPPORTED )			       
    467                       HalLcdWriteStringValue( (char*)"panid:", _NIB.nwkPanId, 16, HAL_LCD_LINE_1 ); 
   \                     ??GenericApp_ProcessEvent_23:
   \   00019A                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00019A   75..01       MOV     ?V8,#0x1
   \   00019D   78..         MOV     R0,#?V8
   \   00019F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001A2   7910         MOV     R1,#0x10
   \   0001A4   90....       MOV     DPTR,#_NIB + 33
   \   0001A7   E0           MOVX    A,@DPTR
   \   0001A8   FC           MOV     R4,A
   \   0001A9   A3           INC     DPTR
   \   0001AA   E0           MOVX    A,@DPTR
   \   0001AB   FD           MOV     R5,A
   \   0001AC   7A..         MOV     R2,#`?<Constant "panid:">` & 0xff
   \   0001AE   7B..         MOV     R3,#(`?<Constant "panid:">` >> 8) & 0xff
   \   0001B0   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   0001B3   7401         MOV     A,#0x1
   \   0001B5   12....       LCALL   ?DEALLOC_XSTACK8
    468                       HalLcdWriteStringValue( (char*)"devState:", devState, 10, HAL_LCD_LINE_3 ); 			 
   \   0001B8                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0001B8   75..05       MOV     ?V8,#0x5
   \   0001BB   78..         MOV     R0,#?V8
   \   0001BD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001C0   790A         MOV     R1,#0xa
   \   0001C2   90....       MOV     DPTR,#devState
   \   0001C5   E0           MOVX    A,@DPTR
   \   0001C6   FC           MOV     R4,A
   \   0001C7   7D00         MOV     R5,#0x0
   \   0001C9   7A..         MOV     R2,#`?<Constant "devState:">` & 0xff
   \   0001CB   7B..         MOV     R3,#(`?<Constant "devState:">` >> 8) & 0xff
   \   0001CD   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   0001D0   7401         MOV     A,#0x1
   \   0001D2   12....       LCALL   ?DEALLOC_XSTACK8
    469          #endif			  
    470          		  
    471                    if ( (GenericApp_NwkState == DEV_ROUTER) ||
    472                         (GenericApp_NwkState == DEV_END_DEVICE) )
   \   0001D5   90....       MOV     DPTR,#GenericApp_NwkState
   \   0001D8   E0           MOVX    A,@DPTR
   \   0001D9   6407         XRL     A,#0x7
   \   0001DB   6008         JZ      ??GenericApp_ProcessEvent_24
   \   0001DD   90....       MOV     DPTR,#GenericApp_NwkState
   \   0001E0   E0           MOVX    A,@DPTR
   \   0001E1   6406         XRL     A,#0x6
   \   0001E3   7024         JNZ     ??GenericApp_ProcessEvent_25
    473                    {
    474          	      CustomApp_loadstatus_ind();	  
   \                     ??GenericApp_ProcessEvent_24:
   \   0001E5                ; Setup parameters for call to function CustomApp_loadstatus_ind
   \   0001E5   12....       LCALL   `??CustomApp_loadstatus_ind::?relay`; Banked call to: CustomApp_loadstatus_ind
    475          	      CustomApp_ping_request_init();
   \   0001E8                ; Setup parameters for call to function CustomApp_ping_request_init
   \   0001E8   12....       LCALL   `??CustomApp_ping_request_init::?relay`; Banked call to: CustomApp_ping_request_init
    476                       CustomApp_ping_timeout_check_init();  //chaokw ping		  
   \   0001EB                ; Setup parameters for call to function CustomApp_ping_timeout_check_init
   \   0001EB   12....       LCALL   `??CustomApp_ping_timeout_check_init::?relay`; Banked call to: CustomApp_ping_timeout_check_init
    477                       CustomApp_send_ping_req();  //chaokw  20170322	
   \   0001EE                ; Setup parameters for call to function CustomApp_send_ping_req
   \   0001EE   12....       LCALL   `??CustomApp_send_ping_req::?relay`; Banked call to: CustomApp_send_ping_req
    478                       osal_start_timerEx( GenericApp_TaskID,
    479          					GENERICAPP_LOADSTATUS_MSG_EVT,
    480          					5000); 		 
   \   0001F1                ; Setup parameters for call to function osal_start_timerEx
   \   0001F1   90....       MOV     DPTR,#__Constant_1388
   \   0001F4   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0001F7   7A40         MOV     R2,#0x40
   \   0001F9   7B00         MOV     R3,#0x0
   \   0001FB   90....       MOV     DPTR,#GenericApp_TaskID
   \   0001FE   E0           MOVX    A,@DPTR
   \   0001FF   F9           MOV     R1,A
   \   000200   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000203   7404         MOV     A,#0x4
   \   000205   12....       LCALL   ?DEALLOC_XSTACK8
   \   000208   E9           MOV     A,R1
    481                    }
    482          		  
    483                    if ( (GenericApp_NwkState == DEV_ZB_COORD) )
   \                     ??GenericApp_ProcessEvent_25:
   \   000209   90....       MOV     DPTR,#GenericApp_NwkState
   \   00020C   E0           MOVX    A,@DPTR
   \   00020D   6409         XRL     A,#0x9
   \   00020F   705F         JNZ     ??GenericApp_ProcessEvent_19
    484                    {
    485                       CustomApp_coordinator_online_req();
   \   000211                ; Setup parameters for call to function CustomApp_coordinator_online_req
   \   000211   12....       LCALL   `??CustomApp_coordinator_online_req::?relay`; Banked call to: CustomApp_coordinator_online_req
   \   000214   E9           MOV     A,R1
    486                       osal_start_timerEx( GenericApp_TaskID,
    487          					GENERICAPP_COORDINATOR_ONLINE_EVT,
    488          					5000); 			 
   \   000215                ; Setup parameters for call to function osal_start_timerEx
   \   000215   90....       MOV     DPTR,#__Constant_1388
   \   000218   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00021B   7A00         MOV     R2,#0x0
   \   00021D   7B08         MOV     R3,#0x8
   \   00021F   90....       MOV     DPTR,#GenericApp_TaskID
   \   000222   E0           MOVX    A,@DPTR
   \   000223   F9           MOV     R1,A
   \   000224   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000227   7404         MOV     A,#0x4
   \   000229   12....       LCALL   ?DEALLOC_XSTACK8
   \   00022C   E9           MOV     A,R1
    489                       CustomApp_coordinater_broadcast_ping_init();  //chaokw ping			 
   \   00022D                ; Setup parameters for call to function CustomApp_coordinater_broadcast_ping_init
   \   00022D   12....       LCALL   `??CustomApp_coordinater_broadcast_ping_init::?r`; Banked call to: CustomApp_coordinater_broadcast_ping_init
    490                    }		 
    491                    break;
   \   000230   803E         SJMP    ??GenericApp_ProcessEvent_19
    492          
    493          
    494          #if defined( ZDO_COORDINATOR ) && defined( WIFI_FREQUENCY_SELECT )
    495                  case ZDO_CHANNEL_UPDATE:
    496                    CustomApp_ChannelSelect(MSGpkt);
    497          	   break;
    498          #endif
    499          		  
    500                  case ZDO_P2P_REQ:
    501                    CustomApp_Send_P2P_Data(MSGpkt);
   \                     ??GenericApp_ProcessEvent_9:
   \   000232                ; Setup parameters for call to function CustomApp_Send_P2P_Data
   \   000232   AA..         MOV     R2,?V0
   \   000234   AB..         MOV     R3,?V1
   \   000236   12....       LCALL   `??CustomApp_Send_P2P_Data::?relay`; Banked call to: CustomApp_Send_P2P_Data
   \   000239   E9           MOV     A,R1
    502                    break;
   \   00023A   8034         SJMP    ??GenericApp_ProcessEvent_19
    503          
    504                  case ZDO_GROUP_REQ:
    505                    CustomApp_Send_Group_Data(MSGpkt);
   \                     ??GenericApp_ProcessEvent_10:
   \   00023C                ; Setup parameters for call to function CustomApp_Send_Group_Data
   \   00023C   AA..         MOV     R2,?V0
   \   00023E   AB..         MOV     R3,?V1
   \   000240   12....       LCALL   `??CustomApp_Send_Group_Data::?relay`; Banked call to: CustomApp_Send_Group_Data
   \   000243   E9           MOV     A,R1
    506                    break;
   \   000244   802A         SJMP    ??GenericApp_ProcessEvent_19
    507          		  
    508                  case ZDO_BROADCAST_REQ:
    509                    CustomApp_Send_BroadCast_Data(MSGpkt);
   \                     ??GenericApp_ProcessEvent_14:
   \   000246                ; Setup parameters for call to function CustomApp_Send_BroadCast_Data
   \   000246   AA..         MOV     R2,?V0
   \   000248   AB..         MOV     R3,?V1
   \   00024A   12....       LCALL   `??CustomApp_Send_BroadCast_Data::?relay`; Banked call to: CustomApp_Send_BroadCast_Data
   \   00024D   E9           MOV     A,R1
    510                    break;			  
   \   00024E   8020         SJMP    ??GenericApp_ProcessEvent_19
    511          
    512                  case ZDO_MAC_REQ:
    513                    CustomApp_Get_ExtAddr();
   \                     ??GenericApp_ProcessEvent_11:
   \   000250                ; Setup parameters for call to function CustomApp_Get_ExtAddr
   \   000250   12....       LCALL   `??CustomApp_Get_ExtAddr::?relay`; Banked call to: CustomApp_Get_ExtAddr
    514                    break;
   \   000253   801B         SJMP    ??GenericApp_ProcessEvent_19
    515          
    516                  case ZDO_NWKINFO_REQ:
    517                    CustomApp_Get_NWKInfo();
   \                     ??GenericApp_ProcessEvent_17:
   \   000255                ; Setup parameters for call to function CustomApp_Get_NWKInfo
   \   000255   12....       LCALL   `??CustomApp_Get_NWKInfo::?relay`; Banked call to: CustomApp_Get_NWKInfo
    518                    break;
   \   000258   8016         SJMP    ??GenericApp_ProcessEvent_19
    519          
    520                  case ZDO_ACTIVE_CNT_REQ:
    521                    CustomApp_Get_Active_Cnt();
   \                     ??GenericApp_ProcessEvent_16:
   \   00025A                ; Setup parameters for call to function CustomApp_Get_Active_Cnt
   \   00025A   12....       LCALL   `??CustomApp_Get_Active_Cnt::?relay`; Banked call to: CustomApp_Get_Active_Cnt
    522                    break;
   \   00025D   8011         SJMP    ??GenericApp_ProcessEvent_19
    523          
    524                  case ZDO_FW_VERSION_REQ:
    525                    CustomApp_Get_Version();
   \                     ??GenericApp_ProcessEvent_12:
   \   00025F                ; Setup parameters for call to function CustomApp_Get_Version
   \   00025F   12....       LCALL   `??CustomApp_Get_Version::?relay`; Banked call to: CustomApp_Get_Version
    526                    break;
   \   000262   800C         SJMP    ??GenericApp_ProcessEvent_19
    527          
    528                  case ZDO_FW_UPDATE_REQ:
    529                    CustomApp_FW_Update();
   \                     ??GenericApp_ProcessEvent_13:
   \   000264                ; Setup parameters for call to function CustomApp_FW_Update
   \   000264   12....       LCALL   `??CustomApp_FW_Update::?relay`; Banked call to: CustomApp_FW_Update
    530                    break;
   \   000267   8007         SJMP    ??GenericApp_ProcessEvent_19
    531          
    532                  case ZDO_MULTIWAY_SET_REQ:
    533                    CustomApp_Set_Multiway(MSGpkt);
   \                     ??GenericApp_ProcessEvent_15:
   \   000269                ; Setup parameters for call to function CustomApp_Set_Multiway
   \   000269   AA..         MOV     R2,?V0
   \   00026B   AB..         MOV     R3,?V1
   \   00026D   12....       LCALL   `??CustomApp_Set_Multiway::?relay`; Banked call to: CustomApp_Set_Multiway
    534                    break;
    535          		  
    536                  default:
    537                    break;
    538                }
    539                // Release the memory
    540                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??GenericApp_ProcessEvent_19:
   \   000270                ; Setup parameters for call to function osal_msg_deallocate
   \   000270   AA..         MOV     R2,?V0
   \   000272   AB..         MOV     R3,?V1
   \   000274   12....       LCALL   `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \   000277   E9           MOV     A,R1
    541          
    542                // Next
    543                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000278                ; Setup parameters for call to function osal_msg_receive
   \   000278   90....       MOV     DPTR,#GenericApp_TaskID
   \   00027B   E0           MOVX    A,@DPTR
   \   00027C   F9           MOV     R1,A
   \   00027D   12....       LCALL   `??osal_msg_receive::?relay`; Banked call to: osal_msg_receive
   \   000280   8A..         MOV     ?V8,R2
   \   000282   8B..         MOV     ?V9,R3
   \   000284   85....       MOV     ?V0,?V8
   \   000287   85....       MOV     ?V1,?V9
   \   00028A   02....       LJMP    ??GenericApp_ProcessEvent_3 & 0xFFFF
    544              }
    545          
    546              // return unprocessed events
    547              return (events ^ SYS_EVENT_MSG);
   \                     ??GenericApp_ProcessEvent_4:
   \   00028D   EE           MOV     A,R6
   \   00028E   6400         XRL     A,#0x0
   \   000290   FA           MOV     R2,A
   \   000291   EF           MOV     A,R7
   \   000292   6480         XRL     A,#0x80
   \   000294   FB           MOV     R3,A
   \   000295   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    548            }
    549          
    550            // Send a message out - This event is generated by a timer
    551            //  (setup in GenericApp_Init()).
    552            if ( events & GENERICAPP_SEND_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_2:
   \   000298   EE           MOV     A,R6
   \   000299   A2E0         MOV     C,0xE0 /* A   */.0
   \   00029B   5026         JNC     ??GenericApp_ProcessEvent_26
    553            {
    554              // Send "the" message
    555              GenericApp_SendTheMessage();  //chaokw
   \   00029D                ; Setup parameters for call to function GenericApp_SendTheMessage
   \   00029D   12....       LCALL   `??GenericApp_SendTheMessage::?relay`; Banked call to: GenericApp_SendTheMessage
    556          
    557              // Setup to send message again
    558              osal_start_timerEx( GenericApp_TaskID,
    559                                  GENERICAPP_SEND_MSG_EVT,
    560                                  txMsgDelay );
   \   0002A0                ; Setup parameters for call to function osal_start_timerEx
   \   0002A0   90....       MOV     DPTR,#txMsgDelay
   \   0002A3   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0002A6   7A01         MOV     R2,#0x1
   \   0002A8   7B00         MOV     R3,#0x0
   \   0002AA   90....       MOV     DPTR,#GenericApp_TaskID
   \   0002AD   E0           MOVX    A,@DPTR
   \   0002AE   F9           MOV     R1,A
   \   0002AF   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   0002B2   7404         MOV     A,#0x4
   \   0002B4   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002B7   E9           MOV     A,R1
    561          
    562              // return unprocessed events
    563              return (events ^ GENERICAPP_SEND_MSG_EVT);
   \   0002B8   EE           MOV     A,R6
   \   0002B9   6401         XRL     A,#0x1
   \   0002BB   FA           MOV     R2,A
   \   0002BC   EF           MOV     A,R7
   \   0002BD   6400         XRL     A,#0x0
   \   0002BF   FB           MOV     R3,A
   \   0002C0   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    564            }
    565          
    566          #if defined( IAR_ARMCM3_LM )
    567            // Receive a message from the RTOS queue
    568            if ( events & GENERICAPP_RTOS_MSG_EVT )
    569            {
    570              // Process message from RTOS queue
    571              GenericApp_ProcessRtosMessage();
    572          
    573              // return unprocessed events
    574              return (events ^ GENERICAPP_RTOS_MSG_EVT);
    575            }
    576          #endif
    577          
    578          
    579             if ( events & GENERICAPP_PING_MSG_EVT)
   \                     ??GenericApp_ProcessEvent_26:
   \   0002C3   EE           MOV     A,R6
   \   0002C4   5404         ANL     A,#0x4
   \   0002C6   6033         JZ      ??GenericApp_ProcessEvent_27
    580             {
    581          	osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_PING_MSG_EVT );
   \   0002C8                ; Setup parameters for call to function osal_stop_timerEx
   \   0002C8   7A04         MOV     R2,#0x4
   \   0002CA   7B00         MOV     R3,#0x0
   \   0002CC   90....       MOV     DPTR,#GenericApp_TaskID
   \   0002CF   E0           MOVX    A,@DPTR
   \   0002D0   F9           MOV     R1,A
   \   0002D1   12....       LCALL   `??osal_stop_timerEx::?relay`; Banked call to: osal_stop_timerEx
   \   0002D4   E9           MOV     A,R1
    582          	CustomApp_send_ping_req();
   \   0002D5                ; Setup parameters for call to function CustomApp_send_ping_req
   \   0002D5   12....       LCALL   `??CustomApp_send_ping_req::?relay`; Banked call to: CustomApp_send_ping_req
    583          	osal_start_timerEx( GenericApp_TaskID, GENERICAPP_PING_MSG_EVT, PING_PERIOD);
   \   0002D8                ; Setup parameters for call to function osal_start_timerEx
   \   0002D8   90....       MOV     DPTR,#__Constant_3a98
   \   0002DB   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0002DE   7A04         MOV     R2,#0x4
   \   0002E0   7B00         MOV     R3,#0x0
   \   0002E2   90....       MOV     DPTR,#GenericApp_TaskID
   \   0002E5   E0           MOVX    A,@DPTR
   \   0002E6   F9           MOV     R1,A
   \   0002E7   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   0002EA   7404         MOV     A,#0x4
   \   0002EC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002EF   E9           MOV     A,R1
    584          
    585          	return (events ^ GENERICAPP_PING_MSG_EVT);	
   \   0002F0   EE           MOV     A,R6
   \   0002F1   6404         XRL     A,#0x4
   \   0002F3   FA           MOV     R2,A
   \   0002F4   EF           MOV     A,R7
   \   0002F5   6400         XRL     A,#0x0
   \   0002F7   FB           MOV     R3,A
   \   0002F8   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    586             }
    587          
    588          
    589             if ( events & GENERICAPP_LINK_STATUS_EVT)
   \                     ??GenericApp_ProcessEvent_27:
   \   0002FB   EE           MOV     A,R6
   \   0002FC   5408         ANL     A,#0x8
   \   0002FE   6033         JZ      ??GenericApp_ProcessEvent_28
    590             {
    591          	osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_LINK_STATUS_EVT );
   \   000300                ; Setup parameters for call to function osal_stop_timerEx
   \   000300   7A08         MOV     R2,#0x8
   \   000302   7B00         MOV     R3,#0x0
   \   000304   90....       MOV     DPTR,#GenericApp_TaskID
   \   000307   E0           MOVX    A,@DPTR
   \   000308   F9           MOV     R1,A
   \   000309   12....       LCALL   `??osal_stop_timerEx::?relay`; Banked call to: osal_stop_timerEx
   \   00030C   E9           MOV     A,R1
    592          	CustomApp_linkstatus_updated();
   \   00030D                ; Setup parameters for call to function CustomApp_linkstatus_updated
   \   00030D   12....       LCALL   `??CustomApp_linkstatus_updated::?relay`; Banked call to: CustomApp_linkstatus_updated
    593          	osal_start_timerEx( GenericApp_TaskID, GENERICAPP_LINK_STATUS_EVT, LINKSTAT_PRRIOD);
   \   000310                ; Setup parameters for call to function osal_start_timerEx
   \   000310   90....       MOV     DPTR,#__Constant_3a98
   \   000313   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000316   7A08         MOV     R2,#0x8
   \   000318   7B00         MOV     R3,#0x0
   \   00031A   90....       MOV     DPTR,#GenericApp_TaskID
   \   00031D   E0           MOVX    A,@DPTR
   \   00031E   F9           MOV     R1,A
   \   00031F   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000322   7404         MOV     A,#0x4
   \   000324   12....       LCALL   ?DEALLOC_XSTACK8
   \   000327   E9           MOV     A,R1
    594          
    595          	return (events ^ GENERICAPP_LINK_STATUS_EVT);	
   \   000328   EE           MOV     A,R6
   \   000329   6408         XRL     A,#0x8
   \   00032B   FA           MOV     R2,A
   \   00032C   EF           MOV     A,R7
   \   00032D   6400         XRL     A,#0x0
   \   00032F   FB           MOV     R3,A
   \   000330   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    596             }
    597          
    598          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)	
    599             if ( events & GENERICAPP_PING_TIMEOUT_CHECK_EVT)   //chaokw ping
   \                     ??GenericApp_ProcessEvent_28:
   \   000333   EE           MOV     A,R6
   \   000334   5480         ANL     A,#0x80
   \   000336   6033         JZ      ??GenericApp_ProcessEvent_29
    600             {
    601          	osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_PING_TIMEOUT_CHECK_EVT );
   \   000338                ; Setup parameters for call to function osal_stop_timerEx
   \   000338   7A80         MOV     R2,#-0x80
   \   00033A   7B00         MOV     R3,#0x0
   \   00033C   90....       MOV     DPTR,#GenericApp_TaskID
   \   00033F   E0           MOVX    A,@DPTR
   \   000340   F9           MOV     R1,A
   \   000341   12....       LCALL   `??osal_stop_timerEx::?relay`; Banked call to: osal_stop_timerEx
   \   000344   E9           MOV     A,R1
    602          	CustomApp_ping_timeout_check();
   \   000345                ; Setup parameters for call to function CustomApp_ping_timeout_check
   \   000345   12....       LCALL   `??CustomApp_ping_timeout_check::?relay`; Banked call to: CustomApp_ping_timeout_check
    603          	osal_start_timerEx( GenericApp_TaskID, GENERICAPP_PING_TIMEOUT_CHECK_EVT, PING_TIMEOUT_CHECK);
   \   000348                ; Setup parameters for call to function osal_start_timerEx
   \   000348   90....       MOV     DPTR,#__Constant_2710
   \   00034B   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00034E   7A80         MOV     R2,#-0x80
   \   000350   7B00         MOV     R3,#0x0
   \   000352   90....       MOV     DPTR,#GenericApp_TaskID
   \   000355   E0           MOVX    A,@DPTR
   \   000356   F9           MOV     R1,A
   \   000357   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   00035A   7404         MOV     A,#0x4
   \   00035C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00035F   E9           MOV     A,R1
    604          
    605          	return (events ^ GENERICAPP_PING_TIMEOUT_CHECK_EVT);	
   \   000360   EE           MOV     A,R6
   \   000361   6480         XRL     A,#0x80
   \   000363   FA           MOV     R2,A
   \   000364   EF           MOV     A,R7
   \   000365   6400         XRL     A,#0x0
   \   000367   FB           MOV     R3,A
   \   000368   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    606             }   
    607          #endif
    608          
    609             if ( events & GENERICAPP_COORDINATER_BROADCAST_PING_EVT)  //chaokw ping
   \                     ??GenericApp_ProcessEvent_29:
   \   00036B   EE           MOV     A,R6
   \   00036C   5400         ANL     A,#0x0
   \   00036E   F8           MOV     R0,A
   \   00036F   EF           MOV     A,R7
   \   000370   5401         ANL     A,#0x1
   \   000372   F9           MOV     R1,A
   \   000373   E8           MOV     A,R0
   \   000374   49           ORL     A,R1
   \   000375   6033         JZ      ??GenericApp_ProcessEvent_30
    610             {
    611          	osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_COORDINATER_BROADCAST_PING_EVT );
   \   000377                ; Setup parameters for call to function osal_stop_timerEx
   \   000377   7A00         MOV     R2,#0x0
   \   000379   7B01         MOV     R3,#0x1
   \   00037B   90....       MOV     DPTR,#GenericApp_TaskID
   \   00037E   E0           MOVX    A,@DPTR
   \   00037F   F9           MOV     R1,A
   \   000380   12....       LCALL   `??osal_stop_timerEx::?relay`; Banked call to: osal_stop_timerEx
   \   000383   E9           MOV     A,R1
    612          	CustomApp_coordinater_broadcast_ping();
   \   000384                ; Setup parameters for call to function CustomApp_coordinater_broadcast_ping
   \   000384   12....       LCALL   `??CustomApp_coordinater_broadcast_ping::?relay`; Banked call to: CustomApp_coordinater_broadcast_ping
    613          	osal_start_timerEx( GenericApp_TaskID, GENERICAPP_COORDINATER_BROADCAST_PING_EVT, PING_PERIOD);
   \   000387                ; Setup parameters for call to function osal_start_timerEx
   \   000387   90....       MOV     DPTR,#__Constant_3a98
   \   00038A   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00038D   7A00         MOV     R2,#0x0
   \   00038F   7B01         MOV     R3,#0x1
   \   000391   90....       MOV     DPTR,#GenericApp_TaskID
   \   000394   E0           MOVX    A,@DPTR
   \   000395   F9           MOV     R1,A
   \   000396   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000399   7404         MOV     A,#0x4
   \   00039B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00039E   E9           MOV     A,R1
    614          
    615          	return (events ^ GENERICAPP_COORDINATER_BROADCAST_PING_EVT);	
   \   00039F   EE           MOV     A,R6
   \   0003A0   6400         XRL     A,#0x0
   \   0003A2   FA           MOV     R2,A
   \   0003A3   EF           MOV     A,R7
   \   0003A4   6401         XRL     A,#0x1
   \   0003A6   FB           MOV     R3,A
   \   0003A7   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    616             }
    617          
    618          
    619             if ( events & GENERICAPP_RESET_SB_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_30:
   \   0003AA   EE           MOV     A,R6
   \   0003AB   5420         ANL     A,#0x20
   \   0003AD   600E         JZ      ??GenericApp_ProcessEvent_31
    620             {
    621              	Onboard_soft_reset();
   \   0003AF                ; Setup parameters for call to function Onboard_soft_reset
   \   0003AF   12....       LCALL   Onboard_soft_reset & 0xFFFF
    622             	return ( events ^ GENERICAPP_RESET_SB_MSG_EVT );
   \   0003B2   EE           MOV     A,R6
   \   0003B3   6420         XRL     A,#0x20
   \   0003B5   FA           MOV     R2,A
   \   0003B6   EF           MOV     A,R7
   \   0003B7   6400         XRL     A,#0x0
   \   0003B9   FB           MOV     R3,A
   \   0003BA   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    623             }
    624          
    625             if ( events & GENERICAPP_LOADSTATUS_MSG_EVT)
   \                     ??GenericApp_ProcessEvent_31:
   \   0003BD   EE           MOV     A,R6
   \   0003BE   5440         ANL     A,#0x40
   \   0003C0   600E         JZ      ??GenericApp_ProcessEvent_32
    626             {
    627                 CustomApp_loadstatus_ind();
   \   0003C2                ; Setup parameters for call to function CustomApp_loadstatus_ind
   \   0003C2   12....       LCALL   `??CustomApp_loadstatus_ind::?relay`; Banked call to: CustomApp_loadstatus_ind
    628          	return (events ^ GENERICAPP_LOADSTATUS_MSG_EVT);	
   \   0003C5   EE           MOV     A,R6
   \   0003C6   6440         XRL     A,#0x40
   \   0003C8   FA           MOV     R2,A
   \   0003C9   EF           MOV     A,R7
   \   0003CA   6400         XRL     A,#0x0
   \   0003CC   FB           MOV     R3,A
   \   0003CD   02....       LJMP    ??GenericApp_ProcessEvent_1 & 0xFFFF
    629             }
    630          
    631             if ( events & GENERICAPP_COORDINATOR_ONLINE_EVT)
   \                     ??GenericApp_ProcessEvent_32:
   \   0003D0   EE           MOV     A,R6
   \   0003D1   5400         ANL     A,#0x0
   \   0003D3   F8           MOV     R0,A
   \   0003D4   EF           MOV     A,R7
   \   0003D5   5408         ANL     A,#0x8
   \   0003D7   F9           MOV     R1,A
   \   0003D8   E8           MOV     A,R0
   \   0003D9   49           ORL     A,R1
   \   0003DA   6043         JZ      ??GenericApp_ProcessEvent_33
    632             { 
    633                 osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_COORDINATOR_ONLINE_EVT );
   \   0003DC                ; Setup parameters for call to function osal_stop_timerEx
   \   0003DC   7A00         MOV     R2,#0x0
   \   0003DE   7B08         MOV     R3,#0x8
   \   0003E0   90....       MOV     DPTR,#GenericApp_TaskID
   \   0003E3   E0           MOVX    A,@DPTR
   \   0003E4   F9           MOV     R1,A
   \   0003E5   12....       LCALL   `??osal_stop_timerEx::?relay`; Banked call to: osal_stop_timerEx
   \   0003E8   E9           MOV     A,R1
    634                 zc_online_report_cnt ++;
   \   0003E9   90....       MOV     DPTR,#zc_online_report_cnt
   \   0003EC   E0           MOVX    A,@DPTR
   \   0003ED   2401         ADD     A,#0x1
   \   0003EF   F0           MOVX    @DPTR,A
    635                 if (zc_online_report_cnt <= 3)
   \   0003F0   90....       MOV     DPTR,#zc_online_report_cnt
   \   0003F3   E0           MOVX    A,@DPTR
   \   0003F4   C3           CLR     C
   \   0003F5   9404         SUBB    A,#0x4
   \   0003F7   501C         JNC     ??GenericApp_ProcessEvent_34
    636                 {
    637                     CustomApp_coordinator_online_req();
   \   0003F9                ; Setup parameters for call to function CustomApp_coordinator_online_req
   \   0003F9   12....       LCALL   `??CustomApp_coordinator_online_req::?relay`; Banked call to: CustomApp_coordinator_online_req
   \   0003FC   E9           MOV     A,R1
    638          	    osal_start_timerEx( GenericApp_TaskID, GENERICAPP_COORDINATOR_ONLINE_EVT, 5000);
   \   0003FD                ; Setup parameters for call to function osal_start_timerEx
   \   0003FD   90....       MOV     DPTR,#__Constant_1388
   \   000400   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000403   7A00         MOV     R2,#0x0
   \   000405   7B08         MOV     R3,#0x8
   \   000407   90....       MOV     DPTR,#GenericApp_TaskID
   \   00040A   E0           MOVX    A,@DPTR
   \   00040B   F9           MOV     R1,A
   \   00040C   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   00040F   7404         MOV     A,#0x4
   \   000411   12....       LCALL   ?DEALLOC_XSTACK8
   \   000414   E9           MOV     A,R1
    639                 }
    640          	return (events ^ GENERICAPP_COORDINATOR_ONLINE_EVT);	
   \                     ??GenericApp_ProcessEvent_34:
   \   000415   EE           MOV     A,R6
   \   000416   6400         XRL     A,#0x0
   \   000418   FA           MOV     R2,A
   \   000419   EF           MOV     A,R7
   \   00041A   6408         XRL     A,#0x8
   \   00041C   FB           MOV     R3,A
   \   00041D   8078         SJMP    ??GenericApp_ProcessEvent_1
    641             }
    642          
    643          #if 0
    644             if ( events & GENERICAPP_ROUTER_ONLINE_EVT)
    645             {
    646                 osal_stop_timerEx( GenericApp_TaskID, GENERICAPP_ROUTER_ONLINE_EVT );
    647                 zr_online_report_cnt ++;
    648                 if (zr_online_report_cnt <= 3)
    649                 {
    650                     CustomApp_router_online_req();
    651          	    osal_start_timerEx( GenericApp_TaskID, GENERICAPP_ROUTER_ONLINE_EVT, 5000);
    652                 }
    653          	return (events ^ GENERICAPP_ROUTER_ONLINE_EVT);	
    654             }
    655          #endif   
    656          
    657             if ( events & GENERICAPP_CHANNEL_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_33:
   \   00041F   EE           MOV     A,R6
   \   000420   5410         ANL     A,#0x10
   \   000422   600A         JZ      ??GenericApp_ProcessEvent_35
    658             {
    659          #if defined( ZDO_COORDINATOR ) && defined( WIFI_FREQUENCY_SELECT )
    660                 CustomApp_WifiChannelReq();
    661          #endif
    662                 return ( events ^ GENERICAPP_CHANNEL_MSG_EVT );
   \   000424   EE           MOV     A,R6
   \   000425   6410         XRL     A,#0x10
   \   000427   FA           MOV     R2,A
   \   000428   EF           MOV     A,R7
   \   000429   6400         XRL     A,#0x0
   \   00042B   FB           MOV     R3,A
   \   00042C   8069         SJMP    ??GenericApp_ProcessEvent_1
    663             }
    664          
    665          //-----------------------------------------------------chaokw
    666          	if (events & GENERICAPP_PERMIT_JOIN_MSG_EVT)
   \                     ??GenericApp_ProcessEvent_35:
   \   00042E   EE           MOV     A,R6
   \   00042F   5400         ANL     A,#0x0
   \   000431   F8           MOV     R0,A
   \   000432   EF           MOV     A,R7
   \   000433   5420         ANL     A,#0x20
   \   000435   F9           MOV     R1,A
   \   000436   E8           MOV     A,R0
   \   000437   49           ORL     A,R1
   \   000438   6038         JZ      ??GenericApp_ProcessEvent_36
    667          	{
    668          #ifndef ZDO_COORDINATOR
    669          		if (transfer_join_times++ < 3)
   \   00043A   90....       MOV     DPTR,#transfer_join_times
   \   00043D   E0           MOVX    A,@DPTR
   \   00043E   F8           MOV     R0,A
   \   00043F   7401         MOV     A,#0x1
   \   000441   28           ADD     A,R0
   \   000442   90....       MOV     DPTR,#transfer_join_times
   \   000445   F0           MOVX    @DPTR,A
   \   000446   E8           MOV     A,R0
   \   000447   C3           CLR     C
   \   000448   9403         SUBB    A,#0x3
   \   00044A   501C         JNC     ??GenericApp_ProcessEvent_37
    670          		{
    671          			GenericApp_Device_JoinReq();
   \   00044C                ; Setup parameters for call to function GenericApp_Device_JoinReq
   \   00044C   12....       LCALL   `??GenericApp_Device_JoinReq::?relay`; Banked call to: GenericApp_Device_JoinReq
   \   00044F   E9           MOV     A,R1
    672          			osal_start_timerEx(GenericApp_TaskID,
    673          								GENERICAPP_PERMIT_JOIN_MSG_EVT,
    674          								2000);
   \   000450                ; Setup parameters for call to function osal_start_timerEx
   \   000450   90....       MOV     DPTR,#__Constant_7d0
   \   000453   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000456   7A00         MOV     R2,#0x0
   \   000458   7B20         MOV     R3,#0x20
   \   00045A   90....       MOV     DPTR,#GenericApp_TaskID
   \   00045D   E0           MOVX    A,@DPTR
   \   00045E   F9           MOV     R1,A
   \   00045F   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000462   7404         MOV     A,#0x4
   \   000464   12....       LCALL   ?DEALLOC_XSTACK8
   \   000467   E9           MOV     A,R1
    675          		}
    676          #endif
    677          		return ( events ^ GENERICAPP_PERMIT_JOIN_MSG_EVT );
   \                     ??GenericApp_ProcessEvent_37:
   \   000468   EE           MOV     A,R6
   \   000469   6400         XRL     A,#0x0
   \   00046B   FA           MOV     R2,A
   \   00046C   EF           MOV     A,R7
   \   00046D   6420         XRL     A,#0x20
   \   00046F   FB           MOV     R3,A
   \   000470   8025         SJMP    ??GenericApp_ProcessEvent_1
    678          	}
    679          
    680                 if (events & GENERICAPP_CLEAR_JOIN_DEVICES_EVT)
   \                     ??GenericApp_ProcessEvent_36:
   \   000472   EE           MOV     A,R6
   \   000473   5400         ANL     A,#0x0
   \   000475   F8           MOV     R0,A
   \   000476   EF           MOV     A,R7
   \   000477   5440         ANL     A,#0x40
   \   000479   F9           MOV     R1,A
   \   00047A   E8           MOV     A,R0
   \   00047B   49           ORL     A,R1
   \   00047C   6015         JZ      ??GenericApp_ProcessEvent_38
    681          	{
    682          		GenericApp_Free_Join_DeviceInfo(zdo_join_device);
   \   00047E                ; Setup parameters for call to function GenericApp_Free_Join_DeviceInfo
   \   00047E   90....       MOV     DPTR,#zdo_join_device
   \   000481   E0           MOVX    A,@DPTR
   \   000482   FA           MOV     R2,A
   \   000483   A3           INC     DPTR
   \   000484   E0           MOVX    A,@DPTR
   \   000485   FB           MOV     R3,A
   \   000486   12....       LCALL   `??GenericApp_Free_Join_DeviceInfo::?relay`; Banked call to: GenericApp_Free_Join_DeviceInfo
    683          		return ( events ^ GENERICAPP_CLEAR_JOIN_DEVICES_EVT );
   \   000489   EE           MOV     A,R6
   \   00048A   6400         XRL     A,#0x0
   \   00048C   FA           MOV     R2,A
   \   00048D   EF           MOV     A,R7
   \   00048E   6440         XRL     A,#0x40
   \   000490   FB           MOV     R3,A
   \   000491   8004         SJMP    ??GenericApp_ProcessEvent_1
    684          	}	
    685          //-----------------------------------------------------------
    686          	
    687            // Discard unknown events
    688            return 0;
   \                     ??GenericApp_ProcessEvent_38:
   \   000493   7A00         MOV     R2,#0x0
   \   000495   7B00         MOV     R3,#0x0
   \                     ??GenericApp_ProcessEvent_1:
   \   000497   7F0A         MOV     R7,#0xa
   \   000499   02....       LJMP    ?BANKED_LEAVE_XDATA
    689          }
    690          
    691          /*********************************************************************
    692           * Event Generation Functions
    693           */
    694          
    695          /*********************************************************************
    696           * @fn      GenericApp_ProcessZDOMsgs()
    697           *
    698           * @brief   Process response messages
    699           *
    700           * @param   none
    701           *
    702           * @return  none
    703           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    704          static void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
   \                     GenericApp_ProcessZDOMsgs:
    705          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 24
   \   000005   74E8         MOV     A,#-0x18
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0,R2
   \   00000C   8B..         MOV     ?V1,R3
    706          	ZDO_DeviceAnnce_t *devAnnce=NULL;
   \   00000E   7E00         MOV     R6,#0x0
   \   000010   7F00         MOV     R7,#0x0
    707          	nodeList_t *pnode;
    708          	afAddrType_t addr64;
    709          	afAddrType_t addr16;
    710          
    711          
    712            switch ( inMsg->clusterID )
   \   000012   E5..         MOV     A,?V0
   \   000014   240C         ADD     A,#0xc
   \   000016   F582         MOV     DPL,A
   \   000018   E4           CLR     A
   \   000019   35..         ADDC    A,?V1
   \   00001B   F583         MOV     DPH,A
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F5..         MOV     ?V4,A
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F5..         MOV     ?V5,A
   \   000024   78..         MOV     R0,#?V4
   \   000026   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for GenericApp_ProcessZDOMsgs>_0`:
   \   000029   0000         DW        0
   \   00002B   0300         DW        3
   \   00002D   1300         DW        19
   \   00002F   ....         DW        ??GenericApp_ProcessZDOMsgs_0
   \   000031   0680         DW        32774
   \   000033   ....         DW        ??GenericApp_ProcessZDOMsgs_1
   \   000035   2080         DW        32800
   \   000037   ....         DW        ??GenericApp_ProcessZDOMsgs_2
   \   000039   ....         DW        ??GenericApp_ProcessZDOMsgs_3
    713            {
    714                case Device_annce:    //chaokw
    715                {
    716          		  devAnnce = (ZDO_DeviceAnnce_t *)osal_mem_alloc( sizeof(  ZDO_DeviceAnnce_t ));
   \                     ??GenericApp_ProcessZDOMsgs_0:
   \   00003B                ; Setup parameters for call to function osal_mem_alloc
   \   00003B   7A0B         MOV     R2,#0xb
   \   00003D   7B00         MOV     R3,#0x0
   \   00003F   12....       LCALL   `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   000042   8A..         MOV     ?V4,R2
   \   000044   8B..         MOV     ?V5,R3
   \   000046   AE..         MOV     R6,?V4
   \   000048   AF..         MOV     R7,?V5
    717                          if ( devAnnce == NULL )
   \   00004A   EE           MOV     A,R6
   \   00004B   4F           ORL     A,R7
   \   00004C   7003         JNZ     $+5
   \   00004E   02....       LJMP    ??GenericApp_ProcessZDOMsgs_3 & 0xFFFF
    718                          {
    719                               return;
    720                          }
    721          		  ZDO_ParseDeviceAnnce( inMsg, devAnnce );
   \   000051                ; Setup parameters for call to function ZDO_ParseDeviceAnnce
   \   000051   EE           MOV     A,R6
   \   000052   FC           MOV     R4,A
   \   000053   EF           MOV     A,R7
   \   000054   FD           MOV     R5,A
   \   000055   AA..         MOV     R2,?V0
   \   000057   AB..         MOV     R3,?V1
   \   000059   12....       LCALL   `??ZDO_ParseDeviceAnnce::?relay`; Banked call to: ZDO_ParseDeviceAnnce
    722          		  if ( devAnnce )
   \   00005C   EE           MOV     A,R6
   \   00005D   4F           ORL     A,R7
   \   00005E   7003         JNZ     $+5
   \   000060   02....       LJMP    ??GenericApp_ProcessZDOMsgs_3 & 0xFFFF
    723          		  {			  
    724          			  addr16.addr.shortAddr = devAnnce->nwkAddr ;	 
   \   000063   8E82         MOV     DPL,R6
   \   000065   8F83         MOV     DPH,R7
   \   000067   E0           MOVX    A,@DPTR
   \   000068   F8           MOV     R0,A
   \   000069   A3           INC     DPTR
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F9           MOV     R1,A
   \   00006C   85..82       MOV     DPL,?XSP + 0
   \   00006F   85..83       MOV     DPH,?XSP + 1
   \   000072   E8           MOV     A,R0
   \   000073   F0           MOVX    @DPTR,A
   \   000074   A3           INC     DPTR
   \   000075   E9           MOV     A,R1
   \   000076   F0           MOVX    @DPTR,A
    725          			  osal_memcpy(&addr64.addr.extAddr, &devAnnce->extAddr[0], Z_EXTADDR_LEN);
   \   000077                ; Setup parameters for call to function osal_memcpy
   \   000077   8E82         MOV     DPL,R6
   \   000079   8F83         MOV     DPH,R7
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A982         MOV     R1,DPL
   \   00007F   AA83         MOV     R2,DPH
   \   000081   7B00         MOV     R3,#0x0
   \   000083   89..         MOV     ?V4,R1
   \   000085   8A..         MOV     ?V5,R2
   \   000087   8B..         MOV     ?V6,R3
   \   000089   78..         MOV     R0,#?V4
   \   00008B   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00008E   7C08         MOV     R4,#0x8
   \   000090   7D00         MOV     R5,#0x0
   \   000092   740F         MOV     A,#0xf
   \   000094   12....       LCALL   ?XSTACK_DISP101_8
   \   000097   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00009A   7403         MOV     A,#0x3
   \   00009C   12....       LCALL   ?DEALLOC_XSTACK8
    726          				 
    727          			  pnode=CustomApp_NodeRegister(addr64,addr16);
   \   00009F                ; Setup parameters for call to function CustomApp_NodeRegister
   \   00009F   85..82       MOV     DPL,?XSP + 0
   \   0000A2   85..83       MOV     DPH,?XSP + 1
   \   0000A5   740C         MOV     A,#0xc
   \   0000A7   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000AA   7418         MOV     A,#0x18
   \   0000AC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AF   740C         MOV     A,#0xc
   \   0000B1   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000B4   12....       LCALL   `??CustomApp_NodeRegister::?relay`; Banked call to: CustomApp_NodeRegister
   \   0000B7   7418         MOV     A,#0x18
   \   0000B9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BC   8A..         MOV     ?V4,R2
   \   0000BE   8B..         MOV     ?V5,R3
   \   0000C0   85....       MOV     ?V2,?V4
   \   0000C3   85....       MOV     ?V3,?V5
    728          			  if(pnode!=NULL)
   \   0000C6   E5..         MOV     A,?V2
   \   0000C8   45..         ORL     A,?V3
   \   0000CA   603D         JZ      ??GenericApp_ProcessZDOMsgs_4
    729          			  {
    730          			       CustomApp_node_register_ind(addr64, addr16);	//0x18
   \   0000CC                ; Setup parameters for call to function CustomApp_node_register_ind
   \   0000CC   85..82       MOV     DPL,?XSP + 0
   \   0000CF   85..83       MOV     DPH,?XSP + 1
   \   0000D2   740C         MOV     A,#0xc
   \   0000D4   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000D7   7418         MOV     A,#0x18
   \   0000D9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DC   740C         MOV     A,#0xc
   \   0000DE   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000E1   12....       LCALL   `??CustomApp_node_register_ind::?relay`; Banked call to: CustomApp_node_register_ind
   \   0000E4   7418         MOV     A,#0x18
   \   0000E6   12....       LCALL   ?DEALLOC_XSTACK8
    731          #if defined( LCD_SUPPORTED )			       
    732          				HalLcdWriteStringValue( (char*)"nodregOK:", addr16.addr.shortAddr, 16, HAL_LCD_LINE_2 ); 
   \   0000E9                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0000E9   75..03       MOV     ?V4,#0x3
   \   0000EC   78..         MOV     R0,#?V4
   \   0000EE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000F1   7910         MOV     R1,#0x10
   \   0000F3   7401         MOV     A,#0x1
   \   0000F5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F8   E0           MOVX    A,@DPTR
   \   0000F9   FC           MOV     R4,A
   \   0000FA   A3           INC     DPTR
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   FD           MOV     R5,A
   \   0000FD   7A..         MOV     R2,#`?<Constant "nodregOK:">` & 0xff
   \   0000FF   7B..         MOV     R3,#(`?<Constant "nodregOK:">` >> 8) & 0xff
   \   000101   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000104   7401         MOV     A,#0x1
   \   000106   12....       LCALL   ?DEALLOC_XSTACK8
    733          #endif
    734          			  }	  
    735                                 osal_mem_free( devAnnce );
   \                     ??GenericApp_ProcessZDOMsgs_4:
   \   000109                ; Setup parameters for call to function osal_mem_free
   \   000109   EE           MOV     A,R6
   \   00010A   FA           MOV     R2,A
   \   00010B   EF           MOV     A,R7
   \   00010C   FB           MOV     R3,A
   \   00010D   12....       LCALL   `??osal_mem_free::?relay`; Banked call to: osal_mem_free
    736          		  }
    737                }
    738                break;
   \   000110   02....       LJMP    ??GenericApp_ProcessZDOMsgs_3 & 0xFFFF
    739          
    740            
    741              case End_Device_Bind_rsp:
    742                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
   \                     ??GenericApp_ProcessZDOMsgs_2:
   \   000113   E5..         MOV     A,?V0
   \   000115   2413         ADD     A,#0x13
   \   000117   F582         MOV     DPL,A
   \   000119   E4           CLR     A
   \   00011A   35..         ADDC    A,?V1
   \   00011C   F583         MOV     DPH,A
   \   00011E   E0           MOVX    A,@DPTR
   \   00011F   F8           MOV     R0,A
   \   000120   A3           INC     DPTR
   \   000121   E0           MOVX    A,@DPTR
   \   000122   F583         MOV     DPH,A
   \   000124   8882         MOV     DPL,R0
   \   000126   E0           MOVX    A,@DPTR
   \   000127   700A         JNZ     ??GenericApp_ProcessZDOMsgs_5
    743                {
    744                  // Light LED
    745                  HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
   \   000129                ; Setup parameters for call to function HalLedSet
   \   000129   7A01         MOV     R2,#0x1
   \   00012B   7908         MOV     R1,#0x8
   \   00012D   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   000130   E9           MOV     A,R1
   \   000131   806E         SJMP    ??GenericApp_ProcessZDOMsgs_3
    746                }
    747          #if defined( BLINK_LEDS )
    748                else
    749                {
    750                  // Flash LED to show failure
    751                  HalLedSet ( HAL_LED_4, HAL_LED_MODE_FLASH );
   \                     ??GenericApp_ProcessZDOMsgs_5:
   \   000133                ; Setup parameters for call to function HalLedSet
   \   000133   7A04         MOV     R2,#0x4
   \   000135   7908         MOV     R1,#0x8
   \   000137   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   00013A   E9           MOV     A,R1
    752                }
    753          #endif
    754                break;
   \   00013B   8064         SJMP    ??GenericApp_ProcessZDOMsgs_3
    755          
    756              case Match_Desc_rsp:
    757                {
    758                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
   \                     ??GenericApp_ProcessZDOMsgs_1:
   \   00013D                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   00013D   AA..         MOV     R2,?V0
   \   00013F   AB..         MOV     R3,?V1
   \   000141   12....       LCALL   `??ZDO_ParseEPListRsp::?relay`; Banked call to: ZDO_ParseEPListRsp
   \   000144   8A..         MOV     ?V6,R2
   \   000146   8B..         MOV     ?V7,R3
   \   000148   85....       MOV     ?V4,?V6
   \   00014B   85....       MOV     ?V5,?V7
    759                  if ( pRsp )
   \   00014E   E5..         MOV     A,?V4
   \   000150   45..         ORL     A,?V5
   \   000152   604D         JZ      ??GenericApp_ProcessZDOMsgs_3
    760                  {
    761                    if ( pRsp->status == ZSuccess && pRsp->cnt )
   \   000154   85..82       MOV     DPL,?V4
   \   000157   85..83       MOV     DPH,?V5
   \   00015A   E0           MOVX    A,@DPTR
   \   00015B   703D         JNZ     ??GenericApp_ProcessZDOMsgs_6
   \   00015D   85..82       MOV     DPL,?V4
   \   000160   85..83       MOV     DPH,?V5
   \   000163   A3           INC     DPTR
   \   000164   A3           INC     DPTR
   \   000165   A3           INC     DPTR
   \   000166   E0           MOVX    A,@DPTR
   \   000167   6031         JZ      ??GenericApp_ProcessZDOMsgs_6
    762                    {
    763                      GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000169   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   00016C   7402         MOV     A,#0x2
   \   00016E   F0           MOVX    @DPTR,A
    764                      GenericApp_DstAddr.addr.shortAddr = pRsp->nwkAddr;
   \   00016F   85..82       MOV     DPL,?V4
   \   000172   85..83       MOV     DPH,?V5
   \   000175   A3           INC     DPTR
   \   000176   E0           MOVX    A,@DPTR
   \   000177   F8           MOV     R0,A
   \   000178   A3           INC     DPTR
   \   000179   E0           MOVX    A,@DPTR
   \   00017A   F9           MOV     R1,A
   \   00017B   90....       MOV     DPTR,#GenericApp_DstAddr
   \   00017E   E8           MOV     A,R0
   \   00017F   F0           MOVX    @DPTR,A
   \   000180   A3           INC     DPTR
   \   000181   E9           MOV     A,R1
   \   000182   F0           MOVX    @DPTR,A
    765                      // Take the first endpoint, Can be changed to search through endpoints
    766                      GenericApp_DstAddr.endPoint = pRsp->epList[0];
   \   000183   85..82       MOV     DPL,?V4
   \   000186   85..83       MOV     DPH,?V5
   \   000189   A3           INC     DPTR
   \   00018A   A3           INC     DPTR
   \   00018B   A3           INC     DPTR
   \   00018C   A3           INC     DPTR
   \   00018D   E0           MOVX    A,@DPTR
   \   00018E   90....       MOV     DPTR,#GenericApp_DstAddr + 9
   \   000191   F0           MOVX    @DPTR,A
    767          
    768                      // Light LED
    769                      HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
   \   000192                ; Setup parameters for call to function HalLedSet
   \   000192   7A01         MOV     R2,#0x1
   \   000194   7908         MOV     R1,#0x8
   \   000196   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   000199   E9           MOV     A,R1
    770                    }
    771                    osal_mem_free( pRsp );
   \                     ??GenericApp_ProcessZDOMsgs_6:
   \   00019A                ; Setup parameters for call to function osal_mem_free
   \   00019A   AA..         MOV     R2,?V4
   \   00019C   AB..         MOV     R3,?V5
   \   00019E   12....       LCALL   `??osal_mem_free::?relay`; Banked call to: osal_mem_free
    772                  }
    773                }
    774                break;
    775            }
    776          }
   \                     ??GenericApp_ProcessZDOMsgs_3:
   \   0001A1   7418         MOV     A,#0x18
   \   0001A3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001A6   7F08         MOV     R7,#0x8
   \   0001A8   02....       LJMP    ?BANKED_LEAVE_XDATA
    777          
    778          /*********************************************************************
    779           * @fn      GenericApp_HandleKeys
    780           *
    781           * @brief   Handles all key events for this device.
    782           *
    783           * @param   shift - true if in shift/alt.
    784           * @param   keys - bit field for key events. Valid entries:
    785           *                 HAL_KEY_SW_4
    786           *                 HAL_KEY_SW_3
    787           *                 HAL_KEY_SW_2
    788           *                 HAL_KEY_SW_1
    789           *
    790           * @return  none
    791           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    792          static void GenericApp_HandleKeys( uint8 shift, uint8 keys )
   \                     GenericApp_HandleKeys:
    793          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   \   00000C   EA           MOV     A,R2
   \   00000D   FF           MOV     R7,A
    794            zAddrType_t dstAddr;
    795          
    796            // Shift is used to make each button/switch dual purpose.
    797            if( 0 ) // ( shift )
    798            {
    799              if ( keys & HAL_KEY_SW_1 )
    800              {
    801              }
    802              if ( keys & HAL_KEY_SW_2 )
    803              {
    804              }
    805              if ( keys & HAL_KEY_SW_3 )
    806              {
    807              }
    808              if ( keys & HAL_KEY_SW_4 )
    809              {
    810              }
    811            }
    812            else
    813            {
    814              if ( keys & HAL_KEY_SW_1 )
   \   00000E   EF           MOV     A,R7
   \   00000F   A2E0         MOV     C,0xE0 /* A   */.0
   \   000011   5041         JNC     ??GenericApp_HandleKeys_0
    815              {
    816          #if defined( SWITCH1_BIND )
    817                // We can use SW1 to simulate SW2 for devices that only have one switch,
    818                keys |= HAL_KEY_SW_2;
    819          #elif defined( SWITCH1_MATCH )
    820                // or use SW1 to simulate SW4 for devices that only have one switch
    821                keys |= HAL_KEY_SW_4;
    822          #else
    823                // Normally, SW1 changes the rate that messages are sent
    824                if ( txMsgDelay > 100 )
   \   000013   90....       MOV     DPTR,#__Constant_65
   \   000016   78..         MOV     R0,#?V0
   \   000018   12....       LCALL   ?L_MOV_X
   \   00001B   90....       MOV     DPTR,#txMsgDelay
   \   00001E   78..         MOV     R0,#?V0
   \   000020   12....       LCALL   ?UL_GT_X
   \   000023   4019         JC      ??GenericApp_HandleKeys_1
    825                {
    826                  // Cut the message TX delay in half
    827                  txMsgDelay /= 2;
   \   000025   90....       MOV     DPTR,#txMsgDelay
   \   000028   78..         MOV     R0,#?V0
   \   00002A   12....       LCALL   ?L_MOV_X
   \   00002D   7401         MOV     A,#0x1
   \   00002F   78..         MOV     R0,#?V0
   \   000031   12....       LCALL   ?UL_SHR
   \   000034   90....       MOV     DPTR,#txMsgDelay
   \   000037   78..         MOV     R0,#?V0
   \   000039   12....       LCALL   ?L_MOV_TO_X
   \   00003C   8016         SJMP    ??GenericApp_HandleKeys_0
    828                }
    829                else
    830                {
    831                  // Reset to the default
    832                  txMsgDelay = GENERICAPP_SEND_MSG_TIMEOUT;
   \                     ??GenericApp_HandleKeys_1:
   \   00003E   7A88         MOV     R2,#-0x78
   \   000040   7B13         MOV     R3,#0x13
   \   000042   7C00         MOV     R4,#0x0
   \   000044   7D00         MOV     R5,#0x0
   \   000046   90....       MOV     DPTR,#txMsgDelay
   \   000049   EA           MOV     A,R2
   \   00004A   F0           MOVX    @DPTR,A
   \   00004B   A3           INC     DPTR
   \   00004C   EB           MOV     A,R3
   \   00004D   F0           MOVX    @DPTR,A
   \   00004E   A3           INC     DPTR
   \   00004F   EC           MOV     A,R4
   \   000050   F0           MOVX    @DPTR,A
   \   000051   A3           INC     DPTR
   \   000052   ED           MOV     A,R5
   \   000053   F0           MOVX    @DPTR,A
    833                }
    834          #endif
    835              }
    836          
    837              if ( keys & HAL_KEY_SW_2 )
   \                     ??GenericApp_HandleKeys_0:
   \   000054   EF           MOV     A,R7
   \   000055   A2E1         MOV     C,0xE0 /* A   */.1
   \   000057   5074         JNC     ??GenericApp_HandleKeys_2
    838              {
    839                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
   \   000059                ; Setup parameters for call to function HalLedSet
   \   000059   7A00         MOV     R2,#0x0
   \   00005B   7908         MOV     R1,#0x8
   \   00005D   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   000060   E9           MOV     A,R1
    840          
    841                // Initiate an End Device Bind Request for the mandatory endpoint
    842                dstAddr.addrMode = Addr16Bit;
   \   000061   7408         MOV     A,#0x8
   \   000063   12....       LCALL   ?XSTACK_DISP0_8
   \   000066   7402         MOV     A,#0x2
   \   000068   F0           MOVX    @DPTR,A
    843                dstAddr.addr.shortAddr = 0x0000; // Coordinator
   \   000069   85..82       MOV     DPL,?XSP + 0
   \   00006C   85..83       MOV     DPH,?XSP + 1
   \   00006F   7400         MOV     A,#0x0
   \   000071   F0           MOVX    @DPTR,A
   \   000072   A3           INC     DPTR
   \   000073   7400         MOV     A,#0x0
   \   000075   F0           MOVX    @DPTR,A
    844                ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    845                                      GenericApp_epDesc.endPoint,
    846                                      GENERICAPP_PROFID,
    847                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    848                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    849                                      FALSE );
   \   000076                ; Setup parameters for call to function NLME_GetShortAddr
   \   000076   12....       LCALL   `??NLME_GetShortAddr::?relay`; Banked call to: NLME_GetShortAddr
   \   000079   8A..         MOV     ?V0,R2
   \   00007B   8B..         MOV     ?V1,R3
   \   00007D   AC..         MOV     R4,?V0
   \   00007F   AD..         MOV     R5,?V1
   \   000081                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   000081   75..00       MOV     ?V0,#0x0
   \   000084   78..         MOV     R0,#?V0
   \   000086   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000089   75....       MOV     ?V0,#GenericApp_ClusterList & 0xff
   \   00008C   75....       MOV     ?V1,#(GenericApp_ClusterList >> 8) & 0xff
   \   00008F   78..         MOV     R0,#?V0
   \   000091   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000094   75..07       MOV     ?V0,#0x7
   \   000097   78..         MOV     R0,#?V0
   \   000099   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00009C   75....       MOV     ?V0,#GenericApp_ClusterList & 0xff
   \   00009F   75....       MOV     ?V1,#(GenericApp_ClusterList >> 8) & 0xff
   \   0000A2   78..         MOV     R0,#?V0
   \   0000A4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A7   75..07       MOV     ?V0,#0x7
   \   0000AA   78..         MOV     R0,#?V0
   \   0000AC   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000AF   75..04       MOV     ?V0,#0x4
   \   0000B2   75..0F       MOV     ?V1,#0xf
   \   0000B5   78..         MOV     R0,#?V0
   \   0000B7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BA   90....       MOV     DPTR,#GenericApp_epDesc
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   F9           MOV     R1,A
   \   0000BF   7409         MOV     A,#0x9
   \   0000C1   12....       LCALL   ?XSTACK_DISP101_8
   \   0000C4   12....       LCALL   `??ZDP_EndDeviceBindReq::?relay`; Banked call to: ZDP_EndDeviceBindReq
   \   0000C7   7409         MOV     A,#0x9
   \   0000C9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000CC   E9           MOV     A,R1
    850              }
    851          
    852              if ( keys & HAL_KEY_SW_3 )
    853              {
    854              }
    855          
    856              if ( keys & HAL_KEY_SW_4 )
   \                     ??GenericApp_HandleKeys_2:
   \   0000CD   EF           MOV     A,R7
   \   0000CE   A2E3         MOV     C,0xE0 /* A   */.3
   \   0000D0   5062         JNC     ??GenericApp_HandleKeys_3
    857              {
    858                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
   \   0000D2                ; Setup parameters for call to function HalLedSet
   \   0000D2   7A00         MOV     R2,#0x0
   \   0000D4   7908         MOV     R1,#0x8
   \   0000D6   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   0000D9   E9           MOV     A,R1
    859                // Initiate a Match Description Request (Service Discovery)
    860                dstAddr.addrMode = AddrBroadcast;
   \   0000DA   7408         MOV     A,#0x8
   \   0000DC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DF   740F         MOV     A,#0xf
   \   0000E1   F0           MOVX    @DPTR,A
    861                dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR;
   \   0000E2   85..82       MOV     DPL,?XSP + 0
   \   0000E5   85..83       MOV     DPH,?XSP + 1
   \   0000E8   74FF         MOV     A,#-0x1
   \   0000EA   F0           MOVX    @DPTR,A
   \   0000EB   A3           INC     DPTR
   \   0000EC   74FF         MOV     A,#-0x1
   \   0000EE   F0           MOVX    @DPTR,A
    862                ZDP_MatchDescReq( &dstAddr, NWK_BROADCAST_SHORTADDR,
    863                                  GENERICAPP_PROFID,
    864                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    865                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    866                                  FALSE );
   \   0000EF                ; Setup parameters for call to function ZDP_MatchDescReq
   \   0000EF   75..00       MOV     ?V0,#0x0
   \   0000F2   78..         MOV     R0,#?V0
   \   0000F4   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000F7   75....       MOV     ?V0,#GenericApp_ClusterList & 0xff
   \   0000FA   75....       MOV     ?V1,#(GenericApp_ClusterList >> 8) & 0xff
   \   0000FD   78..         MOV     R0,#?V0
   \   0000FF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000102   75..07       MOV     ?V0,#0x7
   \   000105   78..         MOV     R0,#?V0
   \   000107   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00010A   75....       MOV     ?V0,#GenericApp_ClusterList & 0xff
   \   00010D   75....       MOV     ?V1,#(GenericApp_ClusterList >> 8) & 0xff
   \   000110   78..         MOV     R0,#?V0
   \   000112   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000115   75..04       MOV     ?V0,#0x4
   \   000118   75..0F       MOV     ?V1,#0xf
   \   00011B   78..         MOV     R0,#?V0
   \   00011D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000120   7907         MOV     R1,#0x7
   \   000122   7CFF         MOV     R4,#-0x1
   \   000124   7DFF         MOV     R5,#-0x1
   \   000126   7408         MOV     A,#0x8
   \   000128   12....       LCALL   ?XSTACK_DISP101_8
   \   00012B   12....       LCALL   `??ZDP_MatchDescReq::?relay`; Banked call to: ZDP_MatchDescReq
   \   00012E   7408         MOV     A,#0x8
   \   000130   12....       LCALL   ?DEALLOC_XSTACK8
   \   000133   E9           MOV     A,R1
    867              }
    868            }
    869          }
   \                     ??GenericApp_HandleKeys_3:
   \   000134   7409         MOV     A,#0x9
   \   000136   12....       LCALL   ?DEALLOC_XSTACK8
   \   000139   7F04         MOV     R7,#0x4
   \   00013B   02....       LJMP    ?BANKED_LEAVE_XDATA
    870          
    871          /*********************************************************************
    872           * LOCAL FUNCTIONS
    873           */
    874          
    875          /*********************************************************************
    876           * @fn      GenericApp_MessageMSGCB
    877           *
    878           * @brief   Data message processor callback.  This function processes
    879           *          any incoming data - probably from other devices.  So, based
    880           *          on cluster ID, perform the intended action.
    881           *
    882           * @param   none
    883           *
    884           * @return  none
    885           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    886          static void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     GenericApp_MessageMSGCB:
    887          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    888            uint16 msgid;
    889          
    890          #if( ZSTACK_DEVICE_BUILD == DEVICE_BUILD_COORDINATOR)		
    891            nodeList_t *nodeSearch;
    892            pingpkt_t * pinbgpkt;
    893            if(pkt->srcAddr.addr.shortAddr != 0x0000)  //chaokw ping
    894            {
    895              pinbgpkt = (pingpkt_t *)(pkt->cmd.Data);
    896              nodeSearch = CustomApp_NodeFindNwkAddrList(pinbgpkt->devAddr16.addr.shortAddr);
    897              if (nodeSearch!=NULL)
    898              {	
    899                  nodeSearch->oldtimestamp = nodeSearch->timestamp; 
    900              }
    901            }
    902          #endif    
    903          
    904          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)		
    905            if(pkt->srcAddr.addr.shortAddr == 0x0000)  //chaokw ping
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   A3           INC     DPTR
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   F8           MOV     R0,A
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   F9           MOV     R1,A
   \   000018   E8           MOV     A,R0
   \   000019   49           ORL     A,R1
   \   00001A   7011         JNZ     ??GenericApp_MessageMSGCB_0
    906            {
    907                 pingRspTime = osal_getClock();
   \   00001C                ; Setup parameters for call to function osal_getClock
   \   00001C   12....       LCALL   `??osal_getClock::?relay`; Banked call to: osal_getClock
   \   00001F   EA           MOV     A,R2
   \   000020   F8           MOV     R0,A
   \   000021   EB           MOV     A,R3
   \   000022   F9           MOV     R1,A
   \   000023   EC           MOV     A,R4
   \   000024   FA           MOV     R2,A
   \   000025   ED           MOV     A,R5
   \   000026   FB           MOV     R3,A
   \   000027   90....       MOV     DPTR,#pingRspTime
   \   00002A   12....       LCALL   ?XSTORE_R0123
    908            }
    909          #endif
    910          
    911          
    912            switch ( pkt->clusterId )
   \                     ??GenericApp_MessageMSGCB_0:
   \   00002D   8E82         MOV     DPL,R6
   \   00002F   8F83         MOV     DPH,R7
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   A3           INC     DPTR
   \   000034   A3           INC     DPTR
   \   000035   E0           MOVX    A,@DPTR
   \   000036   F5..         MOV     ?V2,A
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   F5..         MOV     ?V3,A
   \   00003C   78..         MOV     R0,#?V2
   \   00003E   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for GenericApp_MessageMSGCB>_0`:
   \   000041   0100         DW        1
   \   000043   06           DB        6
   \   000044   ....         DW        ??GenericApp_MessageMSGCB_1
   \   000046   ....         DW        ??GenericApp_MessageMSGCB_2
   \   000048   ....         DW        ??GenericApp_MessageMSGCB_3
   \   00004A   ....         DW        ??GenericApp_MessageMSGCB_4
   \   00004C   ....         DW        ??GenericApp_MessageMSGCB_5
   \   00004E   ....         DW        ??GenericApp_MessageMSGCB_6
   \   000050   ....         DW        ??GenericApp_MessageMSGCB_7
   \   000052   ....         DW        ??GenericApp_MessageMSGCB_8
    913            {
    914              case GENERICAPP_CLUSTERID:
    915                rxMsgCount += 1;  // Count this message
   \                     ??GenericApp_MessageMSGCB_2:
   \   000054   90....       MOV     DPTR,#rxMsgCount
   \   000057   E0           MOVX    A,@DPTR
   \   000058   2401         ADD     A,#0x1
   \   00005A   F0           MOVX    @DPTR,A
   \   00005B   A3           INC     DPTR
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   3400         ADDC    A,#0x0
   \   00005F   F0           MOVX    @DPTR,A
    916                HalLedSet ( HAL_LED_4, HAL_LED_MODE_BLINK );  // Blink an LED
   \   000060                ; Setup parameters for call to function HalLedSet
   \   000060   7A02         MOV     R2,#0x2
   \   000062   7908         MOV     R1,#0x8
   \   000064   12....       LCALL   `??HalLedSet::?relay`; Banked call to: HalLedSet
   \   000067   E9           MOV     A,R1
    917          #if defined( LCD_SUPPORTED )
    918                HalLcdWriteString( (char*)pkt->cmd.Data, HAL_LCD_LINE_1 );
   \   000068                ; Setup parameters for call to function HalLcdWriteString
   \   000068   7901         MOV     R1,#0x1
   \   00006A   EE           MOV     A,R6
   \   00006B   2422         ADD     A,#0x22
   \   00006D   F582         MOV     DPL,A
   \   00006F   E4           CLR     A
   \   000070   3F           ADDC    A,R7
   \   000071   F583         MOV     DPH,A
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   A3           INC     DPTR
   \   000076   E0           MOVX    A,@DPTR
   \   000077   FB           MOV     R3,A
   \   000078   12....       LCALL   `??HalLcdWriteString::?relay`; Banked call to: HalLcdWriteString
    919                HalLcdWriteStringValue( "Rcvd:", rxMsgCount, 10, HAL_LCD_LINE_2 );
   \   00007B                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00007B   75..03       MOV     ?V2,#0x3
   \   00007E   78..         MOV     R0,#?V2
   \   000080   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000083   790A         MOV     R1,#0xa
   \   000085   90....       MOV     DPTR,#rxMsgCount
   \   000088   E0           MOVX    A,@DPTR
   \   000089   FC           MOV     R4,A
   \   00008A   A3           INC     DPTR
   \   00008B   E0           MOVX    A,@DPTR
   \   00008C   FD           MOV     R5,A
   \   00008D   7A..         MOV     R2,#`?<Constant "Rcvd:">` & 0xff
   \   00008F   7B..         MOV     R3,#(`?<Constant "Rcvd:">` >> 8) & 0xff
   \   000091   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000094   7401         MOV     A,#0x1
   \   000096   12....       LCALL   ?DEALLOC_XSTACK8
    920          #elif defined( WIN32 )
    921                WPRINTSTR( pkt->cmd.Data );
    922          #endif
    923                break;
   \   000099   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    924          
    925              case GENERICAPP_DATA_P2P_CLUSTERID:
    926                 CustomApp_AF_P2P_Data_Process(pkt);
   \                     ??GenericApp_MessageMSGCB_3:
   \   00009C                ; Setup parameters for call to function CustomApp_AF_P2P_Data_Process
   \   00009C   EE           MOV     A,R6
   \   00009D   FA           MOV     R2,A
   \   00009E   EF           MOV     A,R7
   \   00009F   FB           MOV     R3,A
   \   0000A0   12....       LCALL   `??CustomApp_AF_P2P_Data_Process::?relay`; Banked call to: CustomApp_AF_P2P_Data_Process
    927          	break;
   \   0000A3   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    928          
    929              case GENERICAPP_GROUP_CLUSTERID:
    930                 CustomApp_AF_Group_Data_Process(pkt);	 
   \                     ??GenericApp_MessageMSGCB_4:
   \   0000A6                ; Setup parameters for call to function CustomApp_AF_Group_Data_Process
   \   0000A6   EE           MOV     A,R6
   \   0000A7   FA           MOV     R2,A
   \   0000A8   EF           MOV     A,R7
   \   0000A9   FB           MOV     R3,A
   \   0000AA   12....       LCALL   `??CustomApp_AF_Group_Data_Process::?relay`; Banked call to: CustomApp_AF_Group_Data_Process
    931          	break;
   \   0000AD   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    932          
    933              case GENERICAPP_BROADCAST_CLUSTERID:
    934                  msgid = pkt->cmd.Data[4] | pkt->cmd.Data[5] << 8;
   \                     ??GenericApp_MessageMSGCB_6:
   \   0000B0   EE           MOV     A,R6
   \   0000B1   2422         ADD     A,#0x22
   \   0000B3   F582         MOV     DPL,A
   \   0000B5   E4           CLR     A
   \   0000B6   3F           ADDC    A,R7
   \   0000B7   F583         MOV     DPH,A
   \   0000B9   E0           MOVX    A,@DPTR
   \   0000BA   F8           MOV     R0,A
   \   0000BB   A3           INC     DPTR
   \   0000BC   E0           MOVX    A,@DPTR
   \   0000BD   F583         MOV     DPH,A
   \   0000BF   8882         MOV     DPL,R0
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   A3           INC     DPTR
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   FA           MOV     R2,A
   \   0000C7   7B00         MOV     R3,#0x0
   \   0000C9   EE           MOV     A,R6
   \   0000CA   2422         ADD     A,#0x22
   \   0000CC   F582         MOV     DPL,A
   \   0000CE   E4           CLR     A
   \   0000CF   3F           ADDC    A,R7
   \   0000D0   F583         MOV     DPH,A
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   F8           MOV     R0,A
   \   0000D4   A3           INC     DPTR
   \   0000D5   E0           MOVX    A,@DPTR
   \   0000D6   F583         MOV     DPH,A
   \   0000D8   8882         MOV     DPL,R0
   \   0000DA   A3           INC     DPTR
   \   0000DB   A3           INC     DPTR
   \   0000DC   A3           INC     DPTR
   \   0000DD   A3           INC     DPTR
   \   0000DE   A3           INC     DPTR
   \   0000DF   E0           MOVX    A,@DPTR
   \   0000E0   F8           MOV     R0,A
   \   0000E1   7900         MOV     R1,#0x0
   \   0000E3   E4           CLR     A
   \   0000E4   C8           XCH     A,R0
   \   0000E5   F9           MOV     R1,A
   \   0000E6   EA           MOV     A,R2
   \   0000E7   48           ORL     A,R0
   \   0000E8   F8           MOV     R0,A
   \   0000E9   EB           MOV     A,R3
   \   0000EA   49           ORL     A,R1
   \   0000EB   F9           MOV     R1,A
   \   0000EC   88..         MOV     ?V0,R0
   \   0000EE   89..         MOV     ?V1,R1
    935                  switch ( msgid )	
   \   0000F0   741A         MOV     A,#0x1a
   \   0000F2   65..         XRL     A,?V0
   \   0000F4   7004         JNZ     ??GenericApp_MessageMSGCB_9
   \   0000F6   7421         MOV     A,#0x21
   \   0000F8   65..         XRL     A,?V1
   \                     ??GenericApp_MessageMSGCB_9:
   \   0000FA   7005         JNZ     ??GenericApp_MessageMSGCB_10
    936                  {
    937                    case COORDINATOR_ONLINE_REQ:
    938                       CustomApp_Coordinator_Online();		  	
   \   0000FC                ; Setup parameters for call to function CustomApp_Coordinator_Online
   \   0000FC   12....       LCALL   `??CustomApp_Coordinator_Online::?relay`; Banked call to: CustomApp_Coordinator_Online
    939          	      break;
   \   0000FF   8007         SJMP    ??GenericApp_MessageMSGCB_11
    940          		 
    941          	   default:
    942                       CustomApp_AF_Broadcast_Data_Process(pkt);	   	
   \                     ??GenericApp_MessageMSGCB_10:
   \   000101                ; Setup parameters for call to function CustomApp_AF_Broadcast_Data_Process
   \   000101   EE           MOV     A,R6
   \   000102   FA           MOV     R2,A
   \   000103   EF           MOV     A,R7
   \   000104   FB           MOV     R3,A
   \   000105   12....       LCALL   `??CustomApp_AF_Broadcast_Data_Process::?relay`; Banked call to: CustomApp_AF_Broadcast_Data_Process
    943                       break;
    944                  }
    945          	break;		
   \                     ??GenericApp_MessageMSGCB_11:
   \   000108   02....       LJMP    ??GenericApp_MessageMSGCB_1 & 0xFFFF
    946          
    947              case GENERICAPP_CMD_P2P_CLUSTERID:
    948          #if defined( LCD_SUPPORTED )		
    949                  rxMsgCount += 1;	
   \                     ??GenericApp_MessageMSGCB_5:
   \   00010B   90....       MOV     DPTR,#rxMsgCount
   \   00010E   E0           MOVX    A,@DPTR
   \   00010F   2401         ADD     A,#0x1
   \   000111   F0           MOVX    @DPTR,A
   \   000112   A3           INC     DPTR
   \   000113   E0           MOVX    A,@DPTR
   \   000114   3400         ADDC    A,#0x0
   \   000116   F0           MOVX    @DPTR,A
    950                  HalLcdWriteStringValue( "cmd Rcvd:", rxMsgCount, 10, HAL_LCD_LINE_2 );
   \   000117                ; Setup parameters for call to function HalLcdWriteStringValue
   \   000117   75..03       MOV     ?V2,#0x3
   \   00011A   78..         MOV     R0,#?V2
   \   00011C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00011F   790A         MOV     R1,#0xa
   \   000121   90....       MOV     DPTR,#rxMsgCount
   \   000124   E0           MOVX    A,@DPTR
   \   000125   FC           MOV     R4,A
   \   000126   A3           INC     DPTR
   \   000127   E0           MOVX    A,@DPTR
   \   000128   FD           MOV     R5,A
   \   000129   7A..         MOV     R2,#`?<Constant "cmd Rcvd:">` & 0xff
   \   00012B   7B..         MOV     R3,#(`?<Constant "cmd Rcvd:">` >> 8) & 0xff
   \   00012D   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000130   7401         MOV     A,#0x1
   \   000132   12....       LCALL   ?DEALLOC_XSTACK8
    951          #endif
    952          
    953                  msgid = pkt->cmd.Data[0] | pkt->cmd.Data[1] << 8;
   \   000135   EE           MOV     A,R6
   \   000136   2422         ADD     A,#0x22
   \   000138   F582         MOV     DPL,A
   \   00013A   E4           CLR     A
   \   00013B   3F           ADDC    A,R7
   \   00013C   F583         MOV     DPH,A
   \   00013E   E0           MOVX    A,@DPTR
   \   00013F   F8           MOV     R0,A
   \   000140   A3           INC     DPTR
   \   000141   E0           MOVX    A,@DPTR
   \   000142   F583         MOV     DPH,A
   \   000144   8882         MOV     DPL,R0
   \   000146   E0           MOVX    A,@DPTR
   \   000147   FA           MOV     R2,A
   \   000148   7B00         MOV     R3,#0x0
   \   00014A   EE           MOV     A,R6
   \   00014B   2422         ADD     A,#0x22
   \   00014D   F582         MOV     DPL,A
   \   00014F   E4           CLR     A
   \   000150   3F           ADDC    A,R7
   \   000151   F583         MOV     DPH,A
   \   000153   E0           MOVX    A,@DPTR
   \   000154   F8           MOV     R0,A
   \   000155   A3           INC     DPTR
   \   000156   E0           MOVX    A,@DPTR
   \   000157   F583         MOV     DPH,A
   \   000159   8882         MOV     DPL,R0
   \   00015B   A3           INC     DPTR
   \   00015C   E0           MOVX    A,@DPTR
   \   00015D   F8           MOV     R0,A
   \   00015E   7900         MOV     R1,#0x0
   \   000160   E4           CLR     A
   \   000161   C8           XCH     A,R0
   \   000162   F9           MOV     R1,A
   \   000163   EA           MOV     A,R2
   \   000164   48           ORL     A,R0
   \   000165   F8           MOV     R0,A
   \   000166   EB           MOV     A,R3
   \   000167   49           ORL     A,R1
   \   000168   F9           MOV     R1,A
   \   000169   88..         MOV     ?V0,R0
   \   00016B   89..         MOV     ?V1,R1
    954                  switch ( msgid )
   \   00016D   85....       MOV     ?V2,?V0
   \   000170   85....       MOV     ?V3,?V1
   \   000173   78..         MOV     R0,#?V2
   \   000175   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for GenericApp_MessageMSGCB>_1`:
   \   000178   0000         DW        0
   \   00017A   0400         DW        4
   \   00017C   3A10         DW        4154
   \   00017E   ....         DW        ??GenericApp_MessageMSGCB_12
   \   000180   3B10         DW        4155
   \   000182   ....         DW        ??GenericApp_MessageMSGCB_13
   \   000184   1A21         DW        8474
   \   000186   ....         DW        ??GenericApp_MessageMSGCB_14
   \   000188   1F21         DW        8479
   \   00018A   ....         DW        ??GenericApp_MessageMSGCB_15
   \   00018C   ....         DW        ??GenericApp_MessageMSGCB_1
    955                  {
    956                    case PING_REQ_MSG:
    957                       CustomApp_process_ping((pingpkt_t *)(pkt->cmd.Data)); // update node timestamp
   \                     ??GenericApp_MessageMSGCB_12:
   \   00018E                ; Setup parameters for call to function CustomApp_process_ping
   \   00018E   EE           MOV     A,R6
   \   00018F   2422         ADD     A,#0x22
   \   000191   F582         MOV     DPL,A
   \   000193   E4           CLR     A
   \   000194   3F           ADDC    A,R7
   \   000195   F583         MOV     DPH,A
   \   000197   E0           MOVX    A,@DPTR
   \   000198   FA           MOV     R2,A
   \   000199   A3           INC     DPTR
   \   00019A   E0           MOVX    A,@DPTR
   \   00019B   FB           MOV     R3,A
   \   00019C   12....       LCALL   `??CustomApp_process_ping::?relay`; Banked call to: CustomApp_process_ping
    958          	      break;
   \   00019F   8072         SJMP    ??GenericApp_MessageMSGCB_1
    959          
    960          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)		
    961                    case ROUTER_ONLINE_REQ:
    962                       CustomApp_Get_Flex_Devinfo();
   \                     ??GenericApp_MessageMSGCB_14:
   \   0001A1                ; Setup parameters for call to function CustomApp_Get_Flex_Devinfo
   \   0001A1   12....       LCALL   `??CustomApp_Get_Flex_Devinfo::?relay`; Banked call to: CustomApp_Get_Flex_Devinfo
    963                       break;
   \   0001A4   806D         SJMP    ??GenericApp_MessageMSGCB_1
    964          
    965                    case ROUTER_ONFFLINE_REQ:
    966                       Onboard_soft_reset();
   \                     ??GenericApp_MessageMSGCB_15:
   \   0001A6                ; Setup parameters for call to function Onboard_soft_reset
   \   0001A6   12....       LCALL   Onboard_soft_reset & 0xFFFF
    967                       break;
   \   0001A9   8068         SJMP    ??GenericApp_MessageMSGCB_1
    968          
    969                    case PING_RSP_MSG:   //chaokw ping
    970                       pingRspTime = osal_getClock();
   \                     ??GenericApp_MessageMSGCB_13:
   \   0001AB                ; Setup parameters for call to function osal_getClock
   \   0001AB   12....       LCALL   `??osal_getClock::?relay`; Banked call to: osal_getClock
   \   0001AE   90....       MOV     DPTR,#pingRspTime
   \   0001B1   12....       LCALL   ?XSTORE_R2345
    971          #if defined( LCD_SUPPORTED )		
    972                       HalLcdWriteStringValue( "ping rsp:", pingRspTime, 16, HAL_LCD_LINE_2 );
   \   0001B4                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0001B4   75..03       MOV     ?V2,#0x3
   \   0001B7   78..         MOV     R0,#?V2
   \   0001B9   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001BC   7910         MOV     R1,#0x10
   \   0001BE   90....       MOV     DPTR,#pingRspTime
   \   0001C1   78..         MOV     R0,#?V4
   \   0001C3   12....       LCALL   ?L_MOV_X
   \   0001C6   AC..         MOV     R4,?V4
   \   0001C8   AD..         MOV     R5,?V5
   \   0001CA   7A..         MOV     R2,#`?<Constant "ping rsp:">` & 0xff
   \   0001CC   7B..         MOV     R3,#(`?<Constant "ping rsp:">` >> 8) & 0xff
   \   0001CE   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   0001D1   7401         MOV     A,#0x1
   \   0001D3   12....       LCALL   ?DEALLOC_XSTACK8
    973          #endif			 
    974          	      break;
    975          #endif			 
    976          	
    977          	   default:
    978                       break;
    979                   }	
    980          	break;		
   \   0001D6   803B         SJMP    ??GenericApp_MessageMSGCB_1
    981          
    982          
    983          	case GENERICAPP_P2P_PERMIT_JOIN_REQ_CLUSTERID:
    984          	  	// gateway coordinator process flex router join from flex request
    985          
    986          #if defined( LCD_SUPPORTED )		
    987                  askWhiteListCount += 1;	
   \                     ??GenericApp_MessageMSGCB_7:
   \   0001D8   90....       MOV     DPTR,#askWhiteListCount
   \   0001DB   E0           MOVX    A,@DPTR
   \   0001DC   2401         ADD     A,#0x1
   \   0001DE   F0           MOVX    @DPTR,A
   \   0001DF   A3           INC     DPTR
   \   0001E0   E0           MOVX    A,@DPTR
   \   0001E1   3400         ADDC    A,#0x0
   \   0001E3   F0           MOVX    @DPTR,A
    988                  HalLcdWriteStringValue( "ask WL:", askWhiteListCount, 10, HAL_LCD_LINE_2 );
   \   0001E4                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0001E4   75..03       MOV     ?V2,#0x3
   \   0001E7   78..         MOV     R0,#?V2
   \   0001E9   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001EC   790A         MOV     R1,#0xa
   \   0001EE   90....       MOV     DPTR,#askWhiteListCount
   \   0001F1   E0           MOVX    A,@DPTR
   \   0001F2   FC           MOV     R4,A
   \   0001F3   A3           INC     DPTR
   \   0001F4   E0           MOVX    A,@DPTR
   \   0001F5   FD           MOV     R5,A
   \   0001F6   7A..         MOV     R2,#`?<Constant "ask WL:">` & 0xff
   \   0001F8   7B..         MOV     R3,#(`?<Constant "ask WL:">` >> 8) & 0xff
   \   0001FA   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   0001FD   7401         MOV     A,#0x1
   \   0001FF   12....       LCALL   ?DEALLOC_XSTACK8
    989          #endif	  	
    990          		GenericApp_Device_JoinRsp(pkt);
   \   000202                ; Setup parameters for call to function GenericApp_Device_JoinRsp
   \   000202   EE           MOV     A,R6
   \   000203   FA           MOV     R2,A
   \   000204   EF           MOV     A,R7
   \   000205   FB           MOV     R3,A
   \   000206   12....       LCALL   `??GenericApp_Device_JoinRsp::?relay`; Banked call to: GenericApp_Device_JoinRsp
   \   000209   E9           MOV     A,R1
    991          		break;
   \   00020A   8007         SJMP    ??GenericApp_MessageMSGCB_1
    992          
    993          	case GENERICAPP_P2P_PERMIT_JOIN_RSP_CLUSTERID:
    994          	  	// flex router received join permit info from gateway coordinator
    995          		GenericApp_Get_PermitJoin(pkt);
   \                     ??GenericApp_MessageMSGCB_8:
   \   00020C                ; Setup parameters for call to function GenericApp_Get_PermitJoin
   \   00020C   EE           MOV     A,R6
   \   00020D   FA           MOV     R2,A
   \   00020E   EF           MOV     A,R7
   \   00020F   FB           MOV     R3,A
   \   000210   12....       LCALL   `??GenericApp_Get_PermitJoin::?relay`; Banked call to: GenericApp_Get_PermitJoin
    996          		break;
    997          
    998          		
    999              default:
   1000                  break;
   1001          
   1002            }
   1003          }
   \                     ??GenericApp_MessageMSGCB_1:
   \   000213   7F08         MOV     R7,#0x8
   \   000215   02....       LJMP    ?BANKED_LEAVE_XDATA
   1004          
   1005          /*********************************************************************
   1006           * @fn      GenericApp_SendTheMessage
   1007           *
   1008           * @brief   Send "the" message.
   1009           *
   1010           * @param   none
   1011           *
   1012           * @return  none
   1013           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1014          static void GenericApp_SendTheMessage( void )
   \                     GenericApp_SendTheMessage:
   1015          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1016            char theMessageData[] = "Hello World";
   \   00000A   90....       MOV     DPTR,#`?<Constant "Hello World">`
   \   00000D   AC..         MOV     R4,?XSP + 0
   \   00000F   AD..         MOV     R5,?XSP + 1
   \   000011   740C         MOV     A,#0xc
   \   000013   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1017          
   1018            if ( AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
   1019                                 GENERICAPP_CLUSTERID,
   1020                                 (byte)osal_strlen( theMessageData ) + 1,
   1021                                 (byte *)&theMessageData,
   1022                                 &GenericApp_TransID,
   1023                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000016                ; Setup parameters for call to function osal_strlen
   \   000016   AA..         MOV     R2,?XSP + 0
   \   000018   AB..         MOV     R3,?XSP + 1
   \   00001A   12....       LCALL   `??osal_strlen::?relay`; Banked call to: osal_strlen
   \   00001D   8A..         MOV     ?V0,R2
   \   00001F   8B..         MOV     ?V1,R3
   \   000021   AA..         MOV     R2,?V0
   \   000023   AB..         MOV     R3,?V1
   \   000025                ; Setup parameters for call to function AF_DataRequest
   \   000025   75..1E       MOV     ?V0,#0x1e
   \   000028   78..         MOV     R0,#?V0
   \   00002A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002D   75....       MOV     ?V0,#GenericApp_TransID & 0xff
   \   000030   75....       MOV     ?V1,#(GenericApp_TransID >> 8) & 0xff
   \   000033   78..         MOV     R0,#?V0
   \   000035   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000038   7403         MOV     A,#0x3
   \   00003A   12....       LCALL   ?XSTACK_DISP100_8
   \   00003D   88..         MOV     ?V0,R0
   \   00003F   89..         MOV     ?V1,R1
   \   000041   78..         MOV     R0,#?V0
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000046   7B00         MOV     R3,#0x0
   \   000048   EA           MOV     A,R2
   \   000049   2401         ADD     A,#0x1
   \   00004B   F5..         MOV     ?V0,A
   \   00004D   E4           CLR     A
   \   00004E   3B           ADDC    A,R3
   \   00004F   F5..         MOV     ?V1,A
   \   000051   78..         MOV     R0,#?V0
   \   000053   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000056   75..01       MOV     ?V0,#0x1
   \   000059   75..00       MOV     ?V1,#0x0
   \   00005C   78..         MOV     R0,#?V0
   \   00005E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000061   7900         MOV     R1,#0x0
   \   000063   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   000065   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   000067   7A..         MOV     R2,#GenericApp_DstAddr & 0xff
   \   000069   7B..         MOV     R3,#(GenericApp_DstAddr >> 8) & 0xff
   \   00006B   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   00006E   7409         MOV     A,#0x9
   \   000070   12....       LCALL   ?DEALLOC_XSTACK8
   \   000073   E9           MOV     A,R1
   1024            {
   1025              // Successfully requested to be sent.
   1026            }
   1027            else
   1028            {
   1029              // Error occurred in request to send.
   1030            }
   1031          }
   \   000074   740C         MOV     A,#0xc
   \   000076   12....       LCALL   ?DEALLOC_XSTACK8
   \   000079   7F02         MOV     R7,#0x2
   \   00007B   02....       LJMP    ?BANKED_LEAVE_XDATA
   1032          
   1033          #if defined( IAR_ARMCM3_LM )
   1034          /*********************************************************************
   1035           * @fn      GenericApp_ProcessRtosMessage
   1036           *
   1037           * @brief   Receive message from RTOS queue, send response back.
   1038           *
   1039           * @param   none
   1040           *
   1041           * @return  none
   1042           */
   1043          static void GenericApp_ProcessRtosMessage( void )
   1044          {
   1045            osalQueue_t inMsg;
   1046          
   1047            if ( osal_queue_receive( OsalQueue, &inMsg, 0 ) == pdPASS )
   1048            {
   1049              uint8 cmndId = inMsg.cmnd;
   1050              uint32 counter = osal_build_uint32( inMsg.cbuf, 4 );
   1051          
   1052              switch ( cmndId )
   1053              {
   1054                case CMD_INCR:
   1055                  counter += 1;  /* Increment the incoming counter */
   1056                                 /* Intentionally fall through next case */
   1057          
   1058                case CMD_ECHO:
   1059                {
   1060                  userQueue_t outMsg;
   1061          
   1062                  outMsg.resp = RSP_CODE | cmndId;  /* Response ID */
   1063                  osal_buffer_uint32( outMsg.rbuf, counter );    /* Increment counter */
   1064                  osal_queue_send( UserQueue1, &outMsg, 0 );  /* Send back to UserTask */
   1065                  break;
   1066                }
   1067          
   1068                default:
   1069                  break;  /* Ignore unknown command */
   1070              }
   1071            }
   1072          }
   1073          #endif
   1074          
   1075          
   1076          
   1077          /*********************************************************************
   1078           */
   1079          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1080          nodeList_t *CustomApp_NodeRegister (afAddrType_t addr64, afAddrType_t addr16)
   \                     CustomApp_NodeRegister:
   1081          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   1082              nodeList_t *nodeSearch;
   1083          
   1084              nodeSearch = CustomApp_NodeFindMacAddrList(addr64.addr.extAddr);  //chaokw issue
   \   000005                ; Setup parameters for call to function CustomApp_NodeFindMacAddrList
   \   000005   740C         MOV     A,#0xc
   \   000007   12....       LCALL   ?XSTACK_DISP101_8
   \   00000A   12....       LCALL   `??CustomApp_NodeFindMacAddrList::?relay`; Banked call to: CustomApp_NodeFindMacAddrList
   \   00000D   8A..         MOV     ?V2,R2
   \   00000F   8B..         MOV     ?V3,R3
   \   000011   85....       MOV     ?V0,?V2
   \   000014   85....       MOV     ?V1,?V3
   1085          
   1086              if (nodeSearch == NULL)
   \   000017   E5..         MOV     A,?V0
   \   000019   45..         ORL     A,?V1
   \   00001B   6003         JZ      $+5
   \   00001D   02....       LJMP    ??CustomApp_NodeRegister_0 & 0xFFFF
   1087              {
   1088                  nodeList_t *node = osal_mem_alloc(sizeof(nodeList_t));  
   \   000020                ; Setup parameters for call to function osal_mem_alloc
   \   000020   7A25         MOV     R2,#0x25
   \   000022   7B00         MOV     R3,#0x0
   \   000024   12....       LCALL   `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   000027   8A..         MOV     ?V2,R2
   \   000029   8B..         MOV     ?V3,R3
   \   00002B   AE..         MOV     R6,?V2
   \   00002D   AF..         MOV     R7,?V3
   1089          
   1090                  if ( node == NULL )
   \   00002F   EE           MOV     A,R6
   \   000030   4F           ORL     A,R7
   \   000031   7007         JNZ     ??CustomApp_NodeRegister_1
   1091                  {
   1092                      return NULL;
   \   000033   7A00         MOV     R2,#0x0
   \   000035   7B00         MOV     R3,#0x0
   \   000037   02....       LJMP    ??CustomApp_NodeRegister_2 & 0xFFFF
   1093                  }
   1094          
   1095                  node->nextDesc = nodeList;
   \                     ??CustomApp_NodeRegister_1:
   \   00003A   90....       MOV     DPTR,#nodeList
   \   00003D   E0           MOVX    A,@DPTR
   \   00003E   F8           MOV     R0,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   E8           MOV     A,R0
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   E9           MOV     A,R1
   \   00004A   F0           MOVX    @DPTR,A
   1096                  nodeList = node;
   \   00004B   90....       MOV     DPTR,#nodeList
   \   00004E   EE           MOV     A,R6
   \   00004F   F0           MOVX    @DPTR,A
   \   000050   A3           INC     DPTR
   \   000051   EF           MOV     A,R7
   \   000052   F0           MOVX    @DPTR,A
   1097                  node->devAddr64 = addr64;
   \   000053   740C         MOV     A,#0xc
   \   000055   12....       LCALL   ?XSTACK_DISP0_8
   \   000058   EE           MOV     A,R6
   \   000059   2402         ADD     A,#0x2
   \   00005B   FC           MOV     R4,A
   \   00005C   E4           CLR     A
   \   00005D   3F           ADDC    A,R7
   \   00005E   FD           MOV     R5,A
   \   00005F   740C         MOV     A,#0xc
   \   000061   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1098                  node->devAddr16 = addr16;
   \   000064   7418         MOV     A,#0x18
   \   000066   12....       LCALL   ?XSTACK_DISP0_8
   \   000069   EE           MOV     A,R6
   \   00006A   240E         ADD     A,#0xe
   \   00006C   FC           MOV     R4,A
   \   00006D   E4           CLR     A
   \   00006E   3F           ADDC    A,R7
   \   00006F   FD           MOV     R5,A
   \   000070   740C         MOV     A,#0xc
   \   000072   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1099                  node->status= nodeconnected;
   \   000075   EE           MOV     A,R6
   \   000076   241A         ADD     A,#0x1a
   \   000078   F582         MOV     DPL,A
   \   00007A   E4           CLR     A
   \   00007B   3F           ADDC    A,R7
   \   00007C   F583         MOV     DPH,A
   \   00007E   7402         MOV     A,#0x2
   \   000080   F0           MOVX    @DPTR,A
   1100                  node->sequence = 0;
   \   000081   EE           MOV     A,R6
   \   000082   241B         ADD     A,#0x1b
   \   000084   F582         MOV     DPL,A
   \   000086   E4           CLR     A
   \   000087   3F           ADDC    A,R7
   \   000088   F583         MOV     DPH,A
   \   00008A   7400         MOV     A,#0x0
   \   00008C   F0           MOVX    @DPTR,A
   1101                  node->timestamp = 0;
   \   00008D   7A00         MOV     R2,#0x0
   \   00008F   7B00         MOV     R3,#0x0
   \   000091   7C00         MOV     R4,#0x0
   \   000093   7D00         MOV     R5,#0x0
   \   000095   EE           MOV     A,R6
   \   000096   241C         ADD     A,#0x1c
   \   000098   F582         MOV     DPL,A
   \   00009A   E4           CLR     A
   \   00009B   3F           ADDC    A,R7
   \   00009C   F583         MOV     DPH,A
   \   00009E   EA           MOV     A,R2
   \   00009F   F0           MOVX    @DPTR,A
   \   0000A0   A3           INC     DPTR
   \   0000A1   EB           MOV     A,R3
   \   0000A2   F0           MOVX    @DPTR,A
   \   0000A3   A3           INC     DPTR
   \   0000A4   EC           MOV     A,R4
   \   0000A5   F0           MOVX    @DPTR,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   ED           MOV     A,R5
   \   0000A8   F0           MOVX    @DPTR,A
   1102                  node->oldtimestamp =0;
   \   0000A9   7A00         MOV     R2,#0x0
   \   0000AB   7B00         MOV     R3,#0x0
   \   0000AD   7C00         MOV     R4,#0x0
   \   0000AF   7D00         MOV     R5,#0x0
   \   0000B1   EE           MOV     A,R6
   \   0000B2   2420         ADD     A,#0x20
   \   0000B4   F582         MOV     DPL,A
   \   0000B6   E4           CLR     A
   \   0000B7   3F           ADDC    A,R7
   \   0000B8   F583         MOV     DPH,A
   \   0000BA   EA           MOV     A,R2
   \   0000BB   F0           MOVX    @DPTR,A
   \   0000BC   A3           INC     DPTR
   \   0000BD   EB           MOV     A,R3
   \   0000BE   F0           MOVX    @DPTR,A
   \   0000BF   A3           INC     DPTR
   \   0000C0   EC           MOV     A,R4
   \   0000C1   F0           MOVX    @DPTR,A
   \   0000C2   A3           INC     DPTR
   \   0000C3   ED           MOV     A,R5
   \   0000C4   F0           MOVX    @DPTR,A
   1103                  node->timeoutcnt	=0;
   \   0000C5   EE           MOV     A,R6
   \   0000C6   2424         ADD     A,#0x24
   \   0000C8   F582         MOV     DPL,A
   \   0000CA   E4           CLR     A
   \   0000CB   3F           ADDC    A,R7
   \   0000CC   F583         MOV     DPH,A
   \   0000CE   7400         MOV     A,#0x0
   \   0000D0   F0           MOVX    @DPTR,A
   1104          
   1105          	 return node;
   \   0000D1   EE           MOV     A,R6
   \   0000D2   FA           MOV     R2,A
   \   0000D3   EF           MOV     A,R7
   \   0000D4   FB           MOV     R3,A
   \   0000D5   8004         SJMP    ??CustomApp_NodeRegister_2
   1106              }
   1107          
   1108              return NULL;
   \                     ??CustomApp_NodeRegister_0:
   \   0000D7   7A00         MOV     R2,#0x0
   \   0000D9   7B00         MOV     R3,#0x0
   \                     ??CustomApp_NodeRegister_2:
   \   0000DB   7F04         MOV     R7,#0x4
   \   0000DD   02....       LJMP    ?BANKED_LEAVE_XDATA
   1109          }
   1110          
   1111          
   1112          /*********************************************************************
   1113           * @fn      nodeDelete
   1114           *
   1115           * @brief   Delete an Application's EndPoint descriptor and frees the memory
   1116           *
   1117           * @param   EndPoint - Application Endpoint to delete
   1118           *
   1119           * @return  afStatus_SUCCESS - endpoint deleted
   1120           *          afStatus_INVALID_PARAMETER - endpoint not found
   1121           *          afStatus_FAILED - endpoint list empty
   1122           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1123          nodeStatus_t CustomApp_NodeDelete ( uint16 devaddr )
   \                     CustomApp_NodeDelete:
   1124          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V2,R2
   \   000007   8B..         MOV     ?V3,R3
   1125              nodeList_t *nodeCurrent;
   1126              nodeList_t *nodePrevious;
   1127          
   1128              if (nodeList != NULL)
   \   000009   90....       MOV     DPTR,#nodeList
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F8           MOV     R0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F9           MOV     R1,A
   \   000011   E8           MOV     A,R0
   \   000012   49           ORL     A,R1
   \   000013   7003         JNZ     $+5
   \   000015   02....       LJMP    ??CustomApp_NodeDelete_0 & 0xFFFF
   1129              {
   1130                  nodePrevious = nodeCurrent = nodeList;
   \   000018   90....       MOV     DPTR,#nodeList
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F8           MOV     R0,A
   \   00001D   A3           INC     DPTR
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   F9           MOV     R1,A
   \   000020   E8           MOV     A,R0
   \   000021   FE           MOV     R6,A
   \   000022   E9           MOV     A,R1
   \   000023   FF           MOV     R7,A
   \   000024   8E..         MOV     ?V0,R6
   \   000026   8F..         MOV     ?V1,R7
   1131                  if (nodeCurrent->devAddr16.addr.shortAddr == devaddr )
   \   000028   EE           MOV     A,R6
   \   000029   240E         ADD     A,#0xe
   \   00002B   F582         MOV     DPL,A
   \   00002D   E4           CLR     A
   \   00002E   3F           ADDC    A,R7
   \   00002F   F583         MOV     DPH,A
   \   000031   E0           MOVX    A,@DPTR
   \   000032   65..         XRL     A,?V2
   \   000034   7004         JNZ     ??CustomApp_NodeDelete_1
   \   000036   A3           INC     DPTR
   \   000037   E0           MOVX    A,@DPTR
   \   000038   65..         XRL     A,?V3
   \                     ??CustomApp_NodeDelete_1:
   \   00003A   701C         JNZ     ??CustomApp_NodeDelete_2
   1132                  {
   1133                      nodeList = nodeCurrent->nextDesc;
   \   00003C   8E82         MOV     DPL,R6
   \   00003E   8F83         MOV     DPH,R7
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F8           MOV     R0,A
   \   000042   A3           INC     DPTR
   \   000043   E0           MOVX    A,@DPTR
   \   000044   F9           MOV     R1,A
   \   000045   90....       MOV     DPTR,#nodeList
   \   000048   E8           MOV     A,R0
   \   000049   F0           MOVX    @DPTR,A
   \   00004A   A3           INC     DPTR
   \   00004B   E9           MOV     A,R1
   \   00004C   F0           MOVX    @DPTR,A
   1134                      osal_mem_free(nodeCurrent);
   \   00004D                ; Setup parameters for call to function osal_mem_free
   \   00004D   EE           MOV     A,R6
   \   00004E   FA           MOV     R2,A
   \   00004F   EF           MOV     A,R7
   \   000050   FB           MOV     R3,A
   \   000051   12....       LCALL   `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   1135                      return (nodeStatus_SUCCESS);
   \   000054   7900         MOV     R1,#0x0
   \   000056   805B         SJMP    ??CustomApp_NodeDelete_3
   1136                  }
   1137                  else
   1138                  {
   1139                      for (nodeCurrent = nodePrevious->nextDesc; nodeCurrent != NULL; nodeCurrent = nodeCurrent->nextDesc )  
   \                     ??CustomApp_NodeDelete_2:
   \   000058   85..82       MOV     DPL,?V0
   \   00005B   85..83       MOV     DPH,?V1
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   F8           MOV     R0,A
   \   000060   A3           INC     DPTR
   \   000061   E0           MOVX    A,@DPTR
   \   000062   F9           MOV     R1,A
   \   000063   E8           MOV     A,R0
   \   000064   FE           MOV     R6,A
   \   000065   E9           MOV     A,R1
   \   000066   FF           MOV     R7,A
   \                     ??CustomApp_NodeDelete_4:
   \   000067   EE           MOV     A,R6
   \   000068   4F           ORL     A,R7
   \   000069   6042         JZ      ??CustomApp_NodeDelete_5
   1140                      {
   1141                          if (nodeCurrent->devAddr16.addr.shortAddr== devaddr)
   \   00006B   EE           MOV     A,R6
   \   00006C   240E         ADD     A,#0xe
   \   00006E   F582         MOV     DPL,A
   \   000070   E4           CLR     A
   \   000071   3F           ADDC    A,R7
   \   000072   F583         MOV     DPH,A
   \   000074   E0           MOVX    A,@DPTR
   \   000075   65..         XRL     A,?V2
   \   000077   7004         JNZ     ??CustomApp_NodeDelete_6
   \   000079   A3           INC     DPTR
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   65..         XRL     A,?V3
   \                     ??CustomApp_NodeDelete_6:
   \   00007D   701F         JNZ     ??CustomApp_NodeDelete_7
   1142                          {
   1143                              nodePrevious->nextDesc = nodeCurrent->nextDesc;
   \   00007F   8E82         MOV     DPL,R6
   \   000081   8F83         MOV     DPH,R7
   \   000083   E0           MOVX    A,@DPTR
   \   000084   F8           MOV     R0,A
   \   000085   A3           INC     DPTR
   \   000086   E0           MOVX    A,@DPTR
   \   000087   F9           MOV     R1,A
   \   000088   85..82       MOV     DPL,?V0
   \   00008B   85..83       MOV     DPH,?V1
   \   00008E   E8           MOV     A,R0
   \   00008F   F0           MOVX    @DPTR,A
   \   000090   A3           INC     DPTR
   \   000091   E9           MOV     A,R1
   \   000092   F0           MOVX    @DPTR,A
   1144                              osal_mem_free(nodeCurrent);
   \   000093                ; Setup parameters for call to function osal_mem_free
   \   000093   EE           MOV     A,R6
   \   000094   FA           MOV     R2,A
   \   000095   EF           MOV     A,R7
   \   000096   FB           MOV     R3,A
   \   000097   12....       LCALL   `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   1145                              return (nodeStatus_SUCCESS);
   \   00009A   7900         MOV     R1,#0x0
   \   00009C   8015         SJMP    ??CustomApp_NodeDelete_3
   1146                          }
   1147                          nodePrevious = nodeCurrent;  
   \                     ??CustomApp_NodeDelete_7:
   \   00009E   8E..         MOV     ?V0,R6
   \   0000A0   8F..         MOV     ?V1,R7
   1148                      }
   \   0000A2   8E82         MOV     DPL,R6
   \   0000A4   8F83         MOV     DPH,R7
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   FE           MOV     R6,A
   \   0000A8   A3           INC     DPTR
   \   0000A9   E0           MOVX    A,@DPTR
   \   0000AA   FF           MOV     R7,A
   \   0000AB   80BA         SJMP    ??CustomApp_NodeDelete_4
   1149                  }
   1150                  return (nodeStatus_INVALID_PARAMETER);
   \                     ??CustomApp_NodeDelete_5:
   \   0000AD   7902         MOV     R1,#0x2
   \   0000AF   8002         SJMP    ??CustomApp_NodeDelete_3
   1151              }
   1152              else
   1153              {
   1154                  return (nodeStatus_FAILED);
   \                     ??CustomApp_NodeDelete_0:
   \   0000B1   7901         MOV     R1,#0x1
   \                     ??CustomApp_NodeDelete_3:
   \   0000B3   7F04         MOV     R7,#0x4
   \   0000B5   02....       LJMP    ?BANKED_LEAVE_XDATA
   1155              }
   1156          }
   1157          
   1158          
   1159          /*********************************************************************
   1160           * @fn      nodeFinddevaddrList
   1161           *
   1162           * @brief   Find the endpoint description entry from the endpoint
   1163           *          number.
   1164           *
   1165           * @param   EndPoint - Application Endpoint to look for
   1166           *
   1167           * @return  the address to the endpoint/interface description entry
   1168           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1169          nodeList_t *CustomApp_NodeFindNwkAddrList ( uint16 Addr16 )
   \                     CustomApp_NodeFindNwkAddrList:
   1170          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   EA           MOV     A,R2
   \   000005   FC           MOV     R4,A
   \   000006   EB           MOV     A,R3
   \   000007   FD           MOV     R5,A
   1171              nodeList_t *nodeSearch;
   1172          
   1173              for (nodeSearch = nodeList; (nodeSearch != NULL);
   \   000008   90....       MOV     DPTR,#nodeList
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F8           MOV     R0,A
   \   00000D   A3           INC     DPTR
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   F9           MOV     R1,A
   \   000010   E8           MOV     A,R0
   \   000011   FA           MOV     R2,A
   \   000012   E9           MOV     A,R1
   \   000013   FB           MOV     R3,A
   \                     ??CustomApp_NodeFindNwkAddrList_0:
   \   000014   EA           MOV     A,R2
   \   000015   4B           ORL     A,R3
   \   000016   601D         JZ      ??CustomApp_NodeFindNwkAddrList_1
   1174                   nodeSearch = nodeSearch->nextDesc)
   1175              {
   1176                  if (nodeSearch->devAddr16.addr.shortAddr== Addr16)
   \   000018   EA           MOV     A,R2
   \   000019   240E         ADD     A,#0xe
   \   00001B   F582         MOV     DPL,A
   \   00001D   E4           CLR     A
   \   00001E   3B           ADDC    A,R3
   \   00001F   F583         MOV     DPH,A
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6C           XRL     A,R4
   \   000023   7003         JNZ     ??CustomApp_NodeFindNwkAddrList_2
   \   000025   A3           INC     DPTR
   \   000026   E0           MOVX    A,@DPTR
   \   000027   6D           XRL     A,R5
   \                     ??CustomApp_NodeFindNwkAddrList_2:
   \   000028   600B         JZ      ??CustomApp_NodeFindNwkAddrList_1
   1177                  {
   1178                      break;
   1179                  }
   1180              }
   \   00002A   8A82         MOV     DPL,R2
   \   00002C   8B83         MOV     DPH,R3
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   FA           MOV     R2,A
   \   000030   A3           INC     DPTR
   \   000031   E0           MOVX    A,@DPTR
   \   000032   FB           MOV     R3,A
   \   000033   80DF         SJMP    ??CustomApp_NodeFindNwkAddrList_0
   1181              return nodeSearch;
   \                     ??CustomApp_NodeFindNwkAddrList_1:
   \   000035   D083         POP     DPH
   \   000037   D082         POP     DPL
   \   000039   02....       LJMP    ?BRET
   1182          }
   1183          
   1184          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1185          nodeList_t *CustomApp_NodeFindMacAddrList ( uint8* Addr64 )
   \                     CustomApp_NodeFindMacAddrList:
   1186          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1187              nodeList_t *nodeSearch;
   1188          
   1189              for (nodeSearch = nodeList; nodeSearch != NULL;
   \   000009   90....       MOV     DPTR,#nodeList
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F8           MOV     R0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F9           MOV     R1,A
   \   000011   88..         MOV     ?V0,R0
   \   000013   89..         MOV     ?V1,R1
   \                     ??CustomApp_NodeFindMacAddrList_0:
   \   000015   E5..         MOV     A,?V0
   \   000017   45..         ORL     A,?V1
   \   000019   6024         JZ      ??CustomApp_NodeFindMacAddrList_1
   1190                   nodeSearch = nodeSearch->nextDesc)
   1191              {
   1192                  if ( osal_ExtAddrEqual( (uint8 *)(nodeSearch->devAddr64.addr.extAddr),
   1193                                          (uint8 *)Addr64 ) == true )
   \   00001B                ; Setup parameters for call to function sAddrExtCmp
   \   00001B   EE           MOV     A,R6
   \   00001C   FC           MOV     R4,A
   \   00001D   EF           MOV     A,R7
   \   00001E   FD           MOV     R5,A
   \   00001F   E5..         MOV     A,?V0
   \   000021   2402         ADD     A,#0x2
   \   000023   FA           MOV     R2,A
   \   000024   E4           CLR     A
   \   000025   35..         ADDC    A,?V1
   \   000027   FB           MOV     R3,A
   \   000028   12....       LCALL   `??sAddrExtCmp::?relay`; Banked call to: sAddrExtCmp
   \   00002B   E9           MOV     A,R1
   \   00002C   6401         XRL     A,#0x1
   \   00002E   600F         JZ      ??CustomApp_NodeFindMacAddrList_1
   1194                  {
   1195                      break;
   1196                  }
   1197              }
   \   000030   85..82       MOV     DPL,?V0
   \   000033   85..83       MOV     DPH,?V1
   \   000036   E0           MOVX    A,@DPTR
   \   000037   F5..         MOV     ?V0,A
   \   000039   A3           INC     DPTR
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   F5..         MOV     ?V1,A
   \   00003D   80D6         SJMP    ??CustomApp_NodeFindMacAddrList_0
   1198              return nodeSearch;
   \                     ??CustomApp_NodeFindMacAddrList_1:
   \   00003F   AA..         MOV     R2,?V0
   \   000041   AB..         MOV     R3,?V1
   \   000043   7F02         MOV     R7,#0x2
   \   000045   02....       LJMP    ?BANKED_LEAVE_XDATA
   1199          }
   1200          
   1201          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1202          void CustomApp_ping_request_init( void )
   \                     CustomApp_ping_request_init:
   1203          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1204          	 osal_start_timerEx( GenericApp_TaskID, GENERICAPP_PING_MSG_EVT, PING_PERIOD );
   \   000004                ; Setup parameters for call to function osal_start_timerEx
   \   000004   90....       MOV     DPTR,#__Constant_3a98
   \   000007   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00000A   7A04         MOV     R2,#0x4
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   90....       MOV     DPTR,#GenericApp_TaskID
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000016   7404         MOV     A,#0x4
   \   000018   12....       LCALL   ?DEALLOC_XSTACK8
   \   00001B   E9           MOV     A,R1
   1205          }
   \   00001C   D083         POP     DPH
   \   00001E   D082         POP     DPL
   \   000020   02....       LJMP    ?BRET
   1206          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1207          void CustomApp_linkstatus_init( void )
   \                     CustomApp_linkstatus_init:
   1208          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1209          	 osal_start_timerEx( GenericApp_TaskID, GENERICAPP_LINK_STATUS_EVT, LINKSTAT_PRRIOD );
   \   000004                ; Setup parameters for call to function osal_start_timerEx
   \   000004   90....       MOV     DPTR,#__Constant_3a98
   \   000007   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00000A   7A08         MOV     R2,#0x8
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   90....       MOV     DPTR,#GenericApp_TaskID
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000016   7404         MOV     A,#0x4
   \   000018   12....       LCALL   ?DEALLOC_XSTACK8
   \   00001B   E9           MOV     A,R1
   1210          }
   \   00001C   D083         POP     DPH
   \   00001E   D082         POP     DPL
   \   000020   02....       LJMP    ?BRET
   1211          
   1212          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1213          void CustomApp_ping_timeout_check_init( void )   //chaokw ping
   \                     CustomApp_ping_timeout_check_init:
   1214          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1215          	 osal_start_timerEx( GenericApp_TaskID, GENERICAPP_PING_TIMEOUT_CHECK_EVT, PING_TIMEOUT_CHECK );
   \   000004                ; Setup parameters for call to function osal_start_timerEx
   \   000004   90....       MOV     DPTR,#__Constant_2710
   \   000007   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00000A   7A80         MOV     R2,#-0x80
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   90....       MOV     DPTR,#GenericApp_TaskID
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000016   7404         MOV     A,#0x4
   \   000018   12....       LCALL   ?DEALLOC_XSTACK8
   \   00001B   E9           MOV     A,R1
   1216          }
   \   00001C   D083         POP     DPH
   \   00001E   D082         POP     DPL
   \   000020   02....       LJMP    ?BRET
   1217          
   1218          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1219          void CustomApp_coordinater_broadcast_ping_init( void )   //chaokw ping
   \                     CustomApp_coordinater_broadcast_ping_init:
   1220          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1221          	 osal_start_timerEx( GenericApp_TaskID, GENERICAPP_COORDINATER_BROADCAST_PING_EVT, PING_PERIOD );
   \   000004                ; Setup parameters for call to function osal_start_timerEx
   \   000004   90....       MOV     DPTR,#__Constant_3a98
   \   000007   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00000A   7A00         MOV     R2,#0x0
   \   00000C   7B01         MOV     R3,#0x1
   \   00000E   90....       MOV     DPTR,#GenericApp_TaskID
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   12....       LCALL   `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000016   7404         MOV     A,#0x4
   \   000018   12....       LCALL   ?DEALLOC_XSTACK8
   \   00001B   E9           MOV     A,R1
   1222          }
   \   00001C   D083         POP     DPH
   \   00001E   D082         POP     DPL
   \   000020   02....       LJMP    ?BRET
   1223          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1224          void CustomApp_zigbee_start_ind (void)
   \                     CustomApp_zigbee_start_ind:
   1225          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 13
   \   000005   74F3         MOV     A,#-0xd
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1226          
   1227              uint8 msg[13];
   1228              uint8* ExtAddr;	
   1229          
   1230              msg[0] = MT_CPT_SOP;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   74FE         MOV     A,#-0x2
   \   000012   F0           MOVX    @DPTR,A
   1231              msg[1] = 0x08;
   \   000013   7401         MOV     A,#0x1
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   7408         MOV     A,#0x8
   \   00001A   F0           MOVX    @DPTR,A
   1232              msg[2] = MT_ZIGBEE_START_IND & 0xff; //0x80
   \   00001B   7402         MOV     A,#0x2
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   7480         MOV     A,#-0x80
   \   000022   F0           MOVX    @DPTR,A
   1233              msg[3] = (MT_ZIGBEE_START_IND  & 0xff00) >> 8;  //0x16
   \   000023   7403         MOV     A,#0x3
   \   000025   12....       LCALL   ?XSTACK_DISP0_8
   \   000028   7416         MOV     A,#0x16
   \   00002A   F0           MOVX    @DPTR,A
   1234          
   1235              ExtAddr = NLME_GetExtAddr();
   \   00002B                ; Setup parameters for call to function NLME_GetExtAddr
   \   00002B   12....       LCALL   `??NLME_GetExtAddr::?relay`; Banked call to: NLME_GetExtAddr
   \   00002E   8A..         MOV     ?V2,R2
   \   000030   8B..         MOV     ?V3,R3
   \   000032   85....       MOV     ?V0,?V2
   \   000035   85....       MOV     ?V1,?V3
   1236              osal_memcpy(&msg[4], ExtAddr, 8);
   \   000038                ; Setup parameters for call to function osal_memcpy
   \   000038   85....       MOV     ?V4,?V0
   \   00003B   85....       MOV     ?V5,?V1
   \   00003E   75..00       MOV     ?V6,#0x0
   \   000041   78..         MOV     R0,#?V4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000046   7C08         MOV     R4,#0x8
   \   000048   7D00         MOV     R5,#0x0
   \   00004A   7407         MOV     A,#0x7
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   AA82         MOV     R2,DPL
   \   000051   AB83         MOV     R3,DPH
   \   000053   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000056   7403         MOV     A,#0x3
   \   000058   12....       LCALL   ?DEALLOC_XSTACK8
   1237          #ifdef OPEN_FCS 
   1238              msg[12]=MT_UartCalcFCS (&msg[1], 11);
   \   00005B                ; Setup parameters for call to function MT_UartCalcFCS
   \   00005B   790B         MOV     R1,#0xb
   \   00005D   7401         MOV     A,#0x1
   \   00005F   12....       LCALL   ?XSTACK_DISP0_8
   \   000062   AA82         MOV     R2,DPL
   \   000064   AB83         MOV     R3,DPH
   \   000066   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   000069   E9           MOV     A,R1
   \   00006A   C0E0         PUSH    A
   \   00006C   740C         MOV     A,#0xc
   \   00006E   12....       LCALL   ?XSTACK_DISP0_8
   \   000071   D0E0         POP     A
   \   000073   F0           MOVX    @DPTR,A
   1239          #else   
   1240              msg[12] = DEFAULTFCS;
   1241          #endif
   1242          
   1243              HalUARTWrite( 0, msg, 13 );
   \   000074                ; Setup parameters for call to function HalUARTWrite
   \   000074   7C0D         MOV     R4,#0xd
   \   000076   7D00         MOV     R5,#0x0
   \   000078   AA..         MOV     R2,?XSP + 0
   \   00007A   AB..         MOV     R3,?XSP + 1
   \   00007C   7900         MOV     R1,#0x0
   \   00007E   12....       LCALL   `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1244          }
   \   000081   740D         MOV     A,#0xd
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7F07         MOV     R7,#0x7
   \   000088   02....       LJMP    ?BANKED_LEAVE_XDATA
   1245          
   1246          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1247          void CustomApp_loadstatus_ind(void) 
   \                     CustomApp_loadstatus_ind:
   1248          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 15
   \   000005   74F1         MOV     A,#-0xf
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1249              uint8 msg[15]; 
   1250              uint8* ExtAddr;
   1251              uint16 ShortAddr;	
   1252              
   1253              msg[0] = MT_CPT_SOP;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   74FE         MOV     A,#-0x2
   \   000012   F0           MOVX    @DPTR,A
   1254              msg[1] = 0x0A;  
   \   000013   7401         MOV     A,#0x1
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   740A         MOV     A,#0xa
   \   00001A   F0           MOVX    @DPTR,A
   1255              msg[2] = MT_LOAD_STATUS_IND & 0xff;   //0x80
   \   00001B   7402         MOV     A,#0x2
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   7480         MOV     A,#-0x80
   \   000022   F0           MOVX    @DPTR,A
   1256              msg[3] = (MT_LOAD_STATUS_IND  & 0xff00) >> 8;  //0x17
   \   000023   7403         MOV     A,#0x3
   \   000025   12....       LCALL   ?XSTACK_DISP0_8
   \   000028   7417         MOV     A,#0x17
   \   00002A   F0           MOVX    @DPTR,A
   1257              
   1258              ExtAddr = NLME_GetExtAddr();
   \   00002B                ; Setup parameters for call to function NLME_GetExtAddr
   \   00002B   12....       LCALL   `??NLME_GetExtAddr::?relay`; Banked call to: NLME_GetExtAddr
   \   00002E   8A..         MOV     ?V2,R2
   \   000030   8B..         MOV     ?V3,R3
   \   000032   85....       MOV     ?V0,?V2
   \   000035   85....       MOV     ?V1,?V3
   1259              osal_memcpy(&msg[4], ExtAddr, 8);
   \   000038                ; Setup parameters for call to function osal_memcpy
   \   000038   85....       MOV     ?V4,?V0
   \   00003B   85....       MOV     ?V5,?V1
   \   00003E   75..00       MOV     ?V6,#0x0
   \   000041   78..         MOV     R0,#?V4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000046   7C08         MOV     R4,#0x8
   \   000048   7D00         MOV     R5,#0x0
   \   00004A   7407         MOV     A,#0x7
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   AA82         MOV     R2,DPL
   \   000051   AB83         MOV     R3,DPH
   \   000053   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000056   7403         MOV     A,#0x3
   \   000058   12....       LCALL   ?DEALLOC_XSTACK8
   1260          
   1261          #if( ZSTACK_DEVICE_BUILD == DEVICE_BUILD_COORDINATOR)
   1262              ShortAddr =0x0000;
   1263          #else
   1264              ShortAddr = NLME_GetShortAddr();
   \   00005B                ; Setup parameters for call to function NLME_GetShortAddr
   \   00005B   12....       LCALL   `??NLME_GetShortAddr::?relay`; Banked call to: NLME_GetShortAddr
   \   00005E   8A..         MOV     ?V2,R2
   \   000060   8B..         MOV     ?V3,R3
   \   000062   AE..         MOV     R6,?V2
   \   000064   AF..         MOV     R7,?V3
   1265          #endif
   1266          
   1267              msg[12] = ShortAddr & 0xff;
   \   000066   EE           MOV     A,R6
   \   000067   C0E0         PUSH    A
   \   000069   740C         MOV     A,#0xc
   \   00006B   12....       LCALL   ?XSTACK_DISP0_8
   \   00006E   D0E0         POP     A
   \   000070   F0           MOVX    @DPTR,A
   1268              msg[13] = (ShortAddr & 0xff00) >> 8;
   \   000071   EE           MOV     A,R6
   \   000072   F8           MOV     R0,A
   \   000073   EF           MOV     A,R7
   \   000074   F9           MOV     R1,A
   \   000075   E4           CLR     A
   \   000076   C9           XCH     A,R1
   \   000077   F8           MOV     R0,A
   \   000078   E8           MOV     A,R0
   \   000079   C0E0         PUSH    A
   \   00007B   740D         MOV     A,#0xd
   \   00007D   12....       LCALL   ?XSTACK_DISP0_8
   \   000080   D0E0         POP     A
   \   000082   F0           MOVX    @DPTR,A
   1269          
   1270          #ifdef OPEN_FCS 	
   1271              msg[14] = MT_UartCalcFCS(&msg[1], 13);          
   \   000083                ; Setup parameters for call to function MT_UartCalcFCS
   \   000083   790D         MOV     R1,#0xd
   \   000085   7401         MOV     A,#0x1
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   AA82         MOV     R2,DPL
   \   00008C   AB83         MOV     R3,DPH
   \   00008E   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   000091   E9           MOV     A,R1
   \   000092   C0E0         PUSH    A
   \   000094   740E         MOV     A,#0xe
   \   000096   12....       LCALL   ?XSTACK_DISP0_8
   \   000099   D0E0         POP     A
   \   00009B   F0           MOVX    @DPTR,A
   1272          #else   
   1273              msg[14] = DEFAULTFCS;
   1274          #endif
   1275              HalUARTWrite( 0, msg, 15 );        
   \   00009C                ; Setup parameters for call to function HalUARTWrite
   \   00009C   7C0F         MOV     R4,#0xf
   \   00009E   7D00         MOV     R5,#0x0
   \   0000A0   AA..         MOV     R2,?XSP + 0
   \   0000A2   AB..         MOV     R3,?XSP + 1
   \   0000A4   7900         MOV     R1,#0x0
   \   0000A6   12....       LCALL   `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1276          
   1277          }
   \   0000A9   740F         MOV     A,#0xf
   \   0000AB   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000AE   7F07         MOV     R7,#0x7
   \   0000B0   02....       LJMP    ?BANKED_LEAVE_XDATA
   1278          
   1279          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1280          void CustomApp_node_register_ind(afAddrType_t addr64, afAddrType_t addr16)
   \                     CustomApp_node_register_ind:
   1281          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 26
   \   000005   74E6         MOV     A,#-0x1a
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1282              uint8 msg[25];
   1283              transferpkt_t *rptmac;
   1284              uint8 fcs;
   1285          	
   1286              rptmac = (transferpkt_t *)osal_msg_allocate( sizeof (transferpkt_t) + 8); 
   \   00000A                ; Setup parameters for call to function osal_msg_allocate
   \   00000A   7A14         MOV     R2,#0x14
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   12....       LCALL   `??osal_msg_allocate::?relay`; Banked call to: osal_msg_allocate
   \   000011   8A..         MOV     ?V2,R2
   \   000013   8B..         MOV     ?V3,R3
   \   000015   AE..         MOV     R6,?V2
   \   000017   AF..         MOV     R7,?V3
   1287              if (rptmac != NULL)
   \   000019   EE           MOV     A,R6
   \   00001A   4F           ORL     A,R7
   \   00001B   7003         JNZ     $+5
   \   00001D   02....       LJMP    ??CustomApp_node_register_ind_0 & 0xFFFF
   1288              {
   1289                  rptmac->msgid = REPORT_RPTMAC_MSG; 
   \   000020   8E82         MOV     DPL,R6
   \   000022   8F83         MOV     DPH,R7
   \   000024   742C         MOV     A,#0x2c
   \   000026   F0           MOVX    @DPTR,A
   \   000027   A3           INC     DPTR
   \   000028   7460         MOV     A,#0x60
   \   00002A   F0           MOVX    @DPTR,A
   1290                  rptmac->msgseq = 0x0001;
   \   00002B   8E82         MOV     DPL,R6
   \   00002D   8F83         MOV     DPH,R7
   \   00002F   A3           INC     DPTR
   \   000030   A3           INC     DPTR
   \   000031   7401         MOV     A,#0x1
   \   000033   F0           MOVX    @DPTR,A
   \   000034   A3           INC     DPTR
   \   000035   7400         MOV     A,#0x0
   \   000037   F0           MOVX    @DPTR,A
   1291                  rptmac->srcid = 0x0000;
   \   000038   8E82         MOV     DPL,R6
   \   00003A   8F83         MOV     DPH,R7
   \   00003C   A3           INC     DPTR
   \   00003D   A3           INC     DPTR
   \   00003E   A3           INC     DPTR
   \   00003F   A3           INC     DPTR
   \   000040   A3           INC     DPTR
   \   000041   A3           INC     DPTR
   \   000042   7400         MOV     A,#0x0
   \   000044   F0           MOVX    @DPTR,A
   \   000045   A3           INC     DPTR
   \   000046   7400         MOV     A,#0x0
   \   000048   F0           MOVX    @DPTR,A
   1292                  osal_memcpy(&rptmac->destid, &addr16.addr.shortAddr, 2);
   \   000049                ; Setup parameters for call to function osal_memcpy
   \   000049   7435         MOV     A,#0x35
   \   00004B   12....       LCALL   ?XSTACK_DISP100_8
   \   00004E   88..         MOV     ?V4,R0
   \   000050   89..         MOV     ?V5,R1
   \   000052   75..00       MOV     ?V6,#0x0
   \   000055   78..         MOV     R0,#?V4
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00005A   7C02         MOV     R4,#0x2
   \   00005C   7D00         MOV     R5,#0x0
   \   00005E   EE           MOV     A,R6
   \   00005F   2404         ADD     A,#0x4
   \   000061   FA           MOV     R2,A
   \   000062   E4           CLR     A
   \   000063   3F           ADDC    A,R7
   \   000064   FB           MOV     R3,A
   \   000065   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000068   7403         MOV     A,#0x3
   \   00006A   12....       LCALL   ?DEALLOC_XSTACK8
   1293                  rptmac->datalen = 8;
   \   00006D   8E82         MOV     DPL,R6
   \   00006F   8F83         MOV     DPH,R7
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   A3           INC     DPTR
   \   000074   A3           INC     DPTR
   \   000075   A3           INC     DPTR
   \   000076   A3           INC     DPTR
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   7408         MOV     A,#0x8
   \   00007B   F0           MOVX    @DPTR,A
   1294          
   1295          	 rptmac->data = (uint8 *)(rptmac + 1);
   \   00007C   EE           MOV     A,R6
   \   00007D   240C         ADD     A,#0xc
   \   00007F   F8           MOV     R0,A
   \   000080   E4           CLR     A
   \   000081   3F           ADDC    A,R7
   \   000082   F9           MOV     R1,A
   \   000083   8E82         MOV     DPL,R6
   \   000085   8F83         MOV     DPH,R7
   \   000087   A3           INC     DPTR
   \   000088   A3           INC     DPTR
   \   000089   A3           INC     DPTR
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   A3           INC     DPTR
   \   000090   E8           MOV     A,R0
   \   000091   F0           MOVX    @DPTR,A
   \   000092   A3           INC     DPTR
   \   000093   E9           MOV     A,R1
   \   000094   F0           MOVX    @DPTR,A
   1296          	 osal_memcpy(&rptmac->data, &addr64.addr.extAddr, 8);
   \   000095                ; Setup parameters for call to function osal_memcpy
   \   000095   7429         MOV     A,#0x29
   \   000097   12....       LCALL   ?XSTACK_DISP100_8
   \   00009A   88..         MOV     ?V4,R0
   \   00009C   89..         MOV     ?V5,R1
   \   00009E   75..00       MOV     ?V6,#0x0
   \   0000A1   78..         MOV     R0,#?V4
   \   0000A3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000A6   7C08         MOV     R4,#0x8
   \   0000A8   7D00         MOV     R5,#0x0
   \   0000AA   EE           MOV     A,R6
   \   0000AB   2409         ADD     A,#0x9
   \   0000AD   FA           MOV     R2,A
   \   0000AE   E4           CLR     A
   \   0000AF   3F           ADDC    A,R7
   \   0000B0   FB           MOV     R3,A
   \   0000B1   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0000B4   7403         MOV     A,#0x3
   \   0000B6   12....       LCALL   ?DEALLOC_XSTACK8
   1297          	 fcs = MT_UartCalcFCS((uint8 *)rptmac, rptmac->datalen + PKT_HEAD_LEN); 
   \   0000B9                ; Setup parameters for call to function MT_UartCalcFCS
   \   0000B9   8E82         MOV     DPL,R6
   \   0000BB   8F83         MOV     DPH,R7
   \   0000BD   A3           INC     DPTR
   \   0000BE   A3           INC     DPTR
   \   0000BF   A3           INC     DPTR
   \   0000C0   A3           INC     DPTR
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   A3           INC     DPTR
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   2409         ADD     A,#0x9
   \   0000C8   F9           MOV     R1,A
   \   0000C9   EE           MOV     A,R6
   \   0000CA   FA           MOV     R2,A
   \   0000CB   EF           MOV     A,R7
   \   0000CC   FB           MOV     R3,A
   \   0000CD   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   0000D0   E9           MOV     A,R1
   \   0000D1   F5..         MOV     ?V0,A
   1298             
   1299                  msg[0] = MT_CPT_SOP;
   \   0000D3   7401         MOV     A,#0x1
   \   0000D5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D8   74FE         MOV     A,#-0x2
   \   0000DA   F0           MOVX    @DPTR,A
   1300                  msg[1] = rptmac->datalen + PKT_HEAD_LEN + 1 ;  //rptmac17 + fcs1 
   \   0000DB   8E82         MOV     DPL,R6
   \   0000DD   8F83         MOV     DPH,R7
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   A3           INC     DPTR
   \   0000E2   A3           INC     DPTR
   \   0000E3   A3           INC     DPTR
   \   0000E4   A3           INC     DPTR
   \   0000E5   A3           INC     DPTR
   \   0000E6   A3           INC     DPTR
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   240A         ADD     A,#0xa
   \   0000EA   C0E0         PUSH    A
   \   0000EC   7402         MOV     A,#0x2
   \   0000EE   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F1   D0E0         POP     A
   \   0000F3   F0           MOVX    @DPTR,A
   1301                  msg[2] = MT_NODE_REG_IND & 0xff;
   \   0000F4   7403         MOV     A,#0x3
   \   0000F6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F9   7480         MOV     A,#-0x80
   \   0000FB   F0           MOVX    @DPTR,A
   1302                  msg[3] = (MT_NODE_REG_IND & 0xff00) >> 8;
   \   0000FC   7404         MOV     A,#0x4
   \   0000FE   12....       LCALL   ?XSTACK_DISP0_8
   \   000101   7418         MOV     A,#0x18
   \   000103   F0           MOVX    @DPTR,A
   1303          
   1304                  osal_memcpy(&msg[4], (uint8 *)rptmac, PKT_HEAD_LEN);
   \   000104                ; Setup parameters for call to function osal_memcpy
   \   000104   8E..         MOV     ?V4,R6
   \   000106   8F..         MOV     ?V5,R7
   \   000108   75..00       MOV     ?V6,#0x0
   \   00010B   78..         MOV     R0,#?V4
   \   00010D   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000110   7C09         MOV     R4,#0x9
   \   000112   7D00         MOV     R5,#0x0
   \   000114   7408         MOV     A,#0x8
   \   000116   12....       LCALL   ?XSTACK_DISP0_8
   \   000119   AA82         MOV     R2,DPL
   \   00011B   AB83         MOV     R3,DPH
   \   00011D   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000120   7403         MOV     A,#0x3
   \   000122   12....       LCALL   ?DEALLOC_XSTACK8
   1305                  osal_memcpy(&msg[4 + PKT_HEAD_LEN], &rptmac->data, rptmac->datalen);
   \   000125                ; Setup parameters for call to function osal_memcpy
   \   000125   EE           MOV     A,R6
   \   000126   2409         ADD     A,#0x9
   \   000128   F5..         MOV     ?V4,A
   \   00012A   E4           CLR     A
   \   00012B   3F           ADDC    A,R7
   \   00012C   F5..         MOV     ?V5,A
   \   00012E   75..00       MOV     ?V6,#0x0
   \   000131   78..         MOV     R0,#?V4
   \   000133   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000136   8E82         MOV     DPL,R6
   \   000138   8F83         MOV     DPH,R7
   \   00013A   A3           INC     DPTR
   \   00013B   A3           INC     DPTR
   \   00013C   A3           INC     DPTR
   \   00013D   A3           INC     DPTR
   \   00013E   A3           INC     DPTR
   \   00013F   A3           INC     DPTR
   \   000140   A3           INC     DPTR
   \   000141   A3           INC     DPTR
   \   000142   E0           MOVX    A,@DPTR
   \   000143   FC           MOV     R4,A
   \   000144   7D00         MOV     R5,#0x0
   \   000146   7411         MOV     A,#0x11
   \   000148   12....       LCALL   ?XSTACK_DISP0_8
   \   00014B   AA82         MOV     R2,DPL
   \   00014D   AB83         MOV     R3,DPH
   \   00014F   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000152   7403         MOV     A,#0x3
   \   000154   12....       LCALL   ?DEALLOC_XSTACK8
   1306                  msg[4 + rptmac->datalen + PKT_HEAD_LEN] = fcs;
   \   000157   E5..         MOV     A,?V0
   \   000159   C0E0         PUSH    A
   \   00015B   8E82         MOV     DPL,R6
   \   00015D   8F83         MOV     DPH,R7
   \   00015F   A3           INC     DPTR
   \   000160   A3           INC     DPTR
   \   000161   A3           INC     DPTR
   \   000162   A3           INC     DPTR
   \   000163   A3           INC     DPTR
   \   000164   A3           INC     DPTR
   \   000165   A3           INC     DPTR
   \   000166   A3           INC     DPTR
   \   000167   E0           MOVX    A,@DPTR
   \   000168   F8           MOV     R0,A
   \   000169   7900         MOV     R1,#0x0
   \   00016B   7401         MOV     A,#0x1
   \   00016D   12....       LCALL   ?XSTACK_DISP0_8
   \   000170   E582         MOV     A,DPL
   \   000172   28           ADD     A,R0
   \   000173   F8           MOV     R0,A
   \   000174   E583         MOV     A,DPH
   \   000176   39           ADDC    A,R1
   \   000177   F9           MOV     R1,A
   \   000178   E8           MOV     A,R0
   \   000179   240D         ADD     A,#0xd
   \   00017B   F582         MOV     DPL,A
   \   00017D   E4           CLR     A
   \   00017E   39           ADDC    A,R1
   \   00017F   F583         MOV     DPH,A
   \   000181   D0E0         POP     A
   \   000183   F0           MOVX    @DPTR,A
   1307          
   1308          #ifdef OPEN_FCS 			
   1309          	 msg[4 + rptmac->datalen + PKT_HEAD_LEN + 1] = MT_UartCalcFCS(&msg[1], rptmac->datalen + PKT_HEAD_LEN + 1 + 3); //rptmac17 + fcs1 + cmd2 + len1
   \   000184                ; Setup parameters for call to function MT_UartCalcFCS
   \   000184   8E82         MOV     DPL,R6
   \   000186   8F83         MOV     DPH,R7
   \   000188   A3           INC     DPTR
   \   000189   A3           INC     DPTR
   \   00018A   A3           INC     DPTR
   \   00018B   A3           INC     DPTR
   \   00018C   A3           INC     DPTR
   \   00018D   A3           INC     DPTR
   \   00018E   A3           INC     DPTR
   \   00018F   A3           INC     DPTR
   \   000190   E0           MOVX    A,@DPTR
   \   000191   240D         ADD     A,#0xd
   \   000193   F9           MOV     R1,A
   \   000194   7402         MOV     A,#0x2
   \   000196   12....       LCALL   ?XSTACK_DISP0_8
   \   000199   AA82         MOV     R2,DPL
   \   00019B   AB83         MOV     R3,DPH
   \   00019D   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   0001A0   E9           MOV     A,R1
   \   0001A1   C0E0         PUSH    A
   \   0001A3   85..82       MOV     DPL,?XSP + 0
   \   0001A6   85..83       MOV     DPH,?XSP + 1
   \   0001A9   D0E0         POP     A
   \   0001AB   F0           MOVX    @DPTR,A
   \   0001AC   85..82       MOV     DPL,?XSP + 0
   \   0001AF   85..83       MOV     DPH,?XSP + 1
   \   0001B2   E0           MOVX    A,@DPTR
   \   0001B3   C0E0         PUSH    A
   \   0001B5   8E82         MOV     DPL,R6
   \   0001B7   8F83         MOV     DPH,R7
   \   0001B9   A3           INC     DPTR
   \   0001BA   A3           INC     DPTR
   \   0001BB   A3           INC     DPTR
   \   0001BC   A3           INC     DPTR
   \   0001BD   A3           INC     DPTR
   \   0001BE   A3           INC     DPTR
   \   0001BF   A3           INC     DPTR
   \   0001C0   A3           INC     DPTR
   \   0001C1   E0           MOVX    A,@DPTR
   \   0001C2   F8           MOV     R0,A
   \   0001C3   7900         MOV     R1,#0x0
   \   0001C5   7401         MOV     A,#0x1
   \   0001C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0001CA   E582         MOV     A,DPL
   \   0001CC   28           ADD     A,R0
   \   0001CD   F8           MOV     R0,A
   \   0001CE   E583         MOV     A,DPH
   \   0001D0   39           ADDC    A,R1
   \   0001D1   F9           MOV     R1,A
   \   0001D2   E8           MOV     A,R0
   \   0001D3   240E         ADD     A,#0xe
   \   0001D5   F582         MOV     DPL,A
   \   0001D7   E4           CLR     A
   \   0001D8   39           ADDC    A,R1
   \   0001D9   F583         MOV     DPH,A
   \   0001DB   D0E0         POP     A
   \   0001DD   F0           MOVX    @DPTR,A
   1310          #else  
   1311                  msg[4 + rptmac->datalen + PKT_HEAD_LEN + 1] = DEFAULTFCS;
   1312          #endif
   1313                  HalUARTWrite( 0, msg, rptmac->datalen + PKT_HEAD_LEN + 1 + 3 + 2 ); //0xfe+fcs  2B
   \   0001DE                ; Setup parameters for call to function HalUARTWrite
   \   0001DE   8E82         MOV     DPL,R6
   \   0001E0   8F83         MOV     DPH,R7
   \   0001E2   A3           INC     DPTR
   \   0001E3   A3           INC     DPTR
   \   0001E4   A3           INC     DPTR
   \   0001E5   A3           INC     DPTR
   \   0001E6   A3           INC     DPTR
   \   0001E7   A3           INC     DPTR
   \   0001E8   A3           INC     DPTR
   \   0001E9   A3           INC     DPTR
   \   0001EA   E0           MOVX    A,@DPTR
   \   0001EB   F8           MOV     R0,A
   \   0001EC   7900         MOV     R1,#0x0
   \   0001EE   E8           MOV     A,R0
   \   0001EF   240F         ADD     A,#0xf
   \   0001F1   FC           MOV     R4,A
   \   0001F2   E4           CLR     A
   \   0001F3   39           ADDC    A,R1
   \   0001F4   FD           MOV     R5,A
   \   0001F5   7401         MOV     A,#0x1
   \   0001F7   12....       LCALL   ?XSTACK_DISP101_8
   \   0001FA   7900         MOV     R1,#0x0
   \   0001FC   12....       LCALL   `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1314          	 osal_msg_deallocate((uint8 *) rptmac );
   \   0001FF                ; Setup parameters for call to function osal_msg_deallocate
   \   0001FF   EE           MOV     A,R6
   \   000200   FA           MOV     R2,A
   \   000201   EF           MOV     A,R7
   \   000202   FB           MOV     R3,A
   \   000203   12....       LCALL   `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \   000206   E9           MOV     A,R1
   1315          	 
   1316              }
   1317          
   1318          }
   \                     ??CustomApp_node_register_ind_0:
   \   000207   741A         MOV     A,#0x1a
   \   000209   12....       LCALL   ?DEALLOC_XSTACK8
   \   00020C   7F07         MOV     R7,#0x7
   \   00020E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1319          
   1320          
   1321          #if 0
   1322          void CustomApp_node_deregister_ind(afAddrType_t addr64, afAddrType_t addr16)
   1323          {
   1324              uint8 msg[25];
   1325              transferpkt_t *rptmac;
   1326              uint8 fcs;
   1327          	
   1328              rptmac = (transferpkt_t *)osal_msg_allocate( sizeof (transferpkt_t) +  PKT_HEAD_LEN + 8 + 1); 
   1329              if (rptmac != NULL)
   1330              {
   1331                  rptmac->msgid = REPORT_RPTMAC_MSG; 
   1332                  rptmac->msgseq = 0x0001;
   1333                  rptmac->srcid = 0x0000;
   1334                  osal_memcpy(&rptmac->destid, &addr16.addr.shortAddr, 2);
   1335                  rptmac->datalen = 8;
   1336          
   1337          	 rptmac->data = (uint8 *)(rptmac + 1);
   1338          	 osal_memcpy(&rptmac->data, &addr64.addr.extAddr, 8);
   1339          	 fcs = MT_UartCalcFCS((uint8 *)rptmac, rptmac->datalen + PKT_HEAD_LEN); 
   1340             
   1341                  msg[0] = MT_CPT_SOP;
   1342                  msg[1] = rptmac->datalen + PKT_HEAD_LEN + 1 ;  //rptmac17 + fcs1 
   1343                  msg[2] = MT_NODE_DEREG_IND & 0xff;
   1344                  msg[3] = (MT_NODE_DEREG_IND & 0xff00) >> 8;
   1345          
   1346                  osal_memcpy(&msg[4], (uint8 *)rptmac, PKT_HEAD_LEN);
   1347                  osal_memcpy(&msg[4 + PKT_HEAD_LEN], &rptmac->data, rptmac->datalen);
   1348                  msg[4 + rptmac->datalen + PKT_HEAD_LEN] = fcs;
   1349          
   1350          #ifdef OPEN_FCS 			
   1351          	 msg[4 + rptmac->datalen + PKT_HEAD_LEN + 1] = MT_UartCalcFCS(&msg[1], rptmac->datalen + PKT_HEAD_LEN + 1 + 3); //rptmac17 + fcs1 + cmd2 + len1
   1352          #else  
   1353                  msg[4 + rptmac->datalen + PKT_HEAD_LEN + 1] = DEFAULTFCS;
   1354          #endif
   1355                  HalUARTWrite( 0, msg, rptmac->datalen + PKT_HEAD_LEN + 1 + 3 + 2 ); //0xfe+fcs  2B
   1356          	 osal_msg_deallocate((uint8 *) rptmac );
   1357          	 
   1358              }
   1359          
   1360          }
   1361          #else
   1362          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1363          void CustomApp_node_deregister_ind(afAddrType_t addr64, afAddrType_t addr16)
   \                     CustomApp_node_deregister_ind:
   1364          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 13
   \   000005   74F3         MOV     A,#-0xd
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1365                  uint8 msg[13];
   1366          		
   1367                  msg[0] = MT_CPT_SOP;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   74FE         MOV     A,#-0x2
   \   000012   F0           MOVX    @DPTR,A
   1368                  msg[1] = Z_EXTADDR_LEN ;  
   \   000013   7401         MOV     A,#0x1
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   7408         MOV     A,#0x8
   \   00001A   F0           MOVX    @DPTR,A
   1369                  msg[2] = MT_NODE_DEREG_IND & 0xff;
   \   00001B   7402         MOV     A,#0x2
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   7480         MOV     A,#-0x80
   \   000022   F0           MOVX    @DPTR,A
   1370                  msg[3] = (MT_NODE_DEREG_IND & 0xff00) >> 8;
   \   000023   7403         MOV     A,#0x3
   \   000025   12....       LCALL   ?XSTACK_DISP0_8
   \   000028   7419         MOV     A,#0x19
   \   00002A   F0           MOVX    @DPTR,A
   1371          		
   1372                  osal_memcpy(&msg[4], &addr64.addr.extAddr, Z_EXTADDR_LEN);
   \   00002B                ; Setup parameters for call to function osal_memcpy
   \   00002B   7418         MOV     A,#0x18
   \   00002D   12....       LCALL   ?XSTACK_DISP100_8
   \   000030   88..         MOV     ?V0,R0
   \   000032   89..         MOV     ?V1,R1
   \   000034   75..00       MOV     ?V2,#0x0
   \   000037   78..         MOV     R0,#?V0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00003C   7C08         MOV     R4,#0x8
   \   00003E   7D00         MOV     R5,#0x0
   \   000040   7407         MOV     A,#0x7
   \   000042   12....       LCALL   ?XSTACK_DISP0_8
   \   000045   AA82         MOV     R2,DPL
   \   000047   AB83         MOV     R3,DPH
   \   000049   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00004C   7403         MOV     A,#0x3
   \   00004E   12....       LCALL   ?DEALLOC_XSTACK8
   1373          	 msg[4 + Z_EXTADDR_LEN] = MT_UartCalcFCS( &msg[1], MT_UART_HEAD_LEN + Z_EXTADDR_LEN );
   \   000051                ; Setup parameters for call to function MT_UartCalcFCS
   \   000051   790B         MOV     R1,#0xb
   \   000053   7401         MOV     A,#0x1
   \   000055   12....       LCALL   ?XSTACK_DISP0_8
   \   000058   AA82         MOV     R2,DPL
   \   00005A   AB83         MOV     R3,DPH
   \   00005C   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   00005F   E9           MOV     A,R1
   \   000060   C0E0         PUSH    A
   \   000062   740C         MOV     A,#0xc
   \   000064   12....       LCALL   ?XSTACK_DISP0_8
   \   000067   D0E0         POP     A
   \   000069   F0           MOVX    @DPTR,A
   1374          
   1375                  HalUARTWrite( 0, msg, MT_UART_HEAD_LEN + Z_EXTADDR_LEN + 2 );
   \   00006A                ; Setup parameters for call to function HalUARTWrite
   \   00006A   7C0D         MOV     R4,#0xd
   \   00006C   7D00         MOV     R5,#0x0
   \   00006E   AA..         MOV     R2,?XSP + 0
   \   000070   AB..         MOV     R3,?XSP + 1
   \   000072   7900         MOV     R1,#0x0
   \   000074   12....       LCALL   `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1376          }
   \   000077   740D         MOV     A,#0xd
   \   000079   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007C   7F03         MOV     R7,#0x3
   \   00007E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1377          
   1378          #endif
   1379          
   1380          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   1381          uint8 cnt=0;
   \                     cnt:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1382          void CustomApp_send_ping_req ( void )  
   \                     CustomApp_send_ping_req:
   1383          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1384              uint16 parentShortAddr;
   1385              uint8 len=sizeof(pingpkt_t);
   \   00000A   7E21         MOV     R6,#0x21
   1386          
   1387          #if 0 // chaokw debug
   1388              uint8 send_buf[13];	
   1389              uint32 timestamp;
   1390          #endif //================	
   1391          
   1392              pingpkt_t *pkt = (pingpkt_t *)osal_msg_allocate( sizeof(pingpkt_t) );	
   \   00000C                ; Setup parameters for call to function osal_msg_allocate
   \   00000C   7A21         MOV     R2,#0x21
   \   00000E   7B00         MOV     R3,#0x0
   \   000010   12....       LCALL   `??osal_msg_allocate::?relay`; Banked call to: osal_msg_allocate
   \   000013   8A..         MOV     ?V0,R2
   \   000015   8B..         MOV     ?V1,R3
   \   000017   85....       MOV     ?V4,?V0
   \   00001A   85....       MOV     ?V5,?V1
   1393              osal_memset(pkt, 0, sizeof(pingpkt_t));
   \   00001D                ; Setup parameters for call to function osal_memset
   \   00001D   7C21         MOV     R4,#0x21
   \   00001F   7D00         MOV     R5,#0x0
   \   000021   7900         MOV     R1,#0x0
   \   000023   AA..         MOV     R2,?V4
   \   000025   AB..         MOV     R3,?V5
   \   000027   12....       LCALL   `??osal_memset::?relay`; Banked call to: osal_memset
   1394          		
   1395              if(pkt != NULL)
   \   00002A   E5..         MOV     A,?V4
   \   00002C   45..         ORL     A,?V5
   \   00002E   7003         JNZ     $+5
   \   000030   02....       LJMP    ??CustomApp_send_ping_req_0 & 0xFFFF
   1396              {
   1397          		pkt->msgid = PING_REQ_MSG;
   \   000033   85..82       MOV     DPL,?V4
   \   000036   85..83       MOV     DPH,?V5
   \   000039   743A         MOV     A,#0x3a
   \   00003B   F0           MOVX    @DPTR,A
   \   00003C   A3           INC     DPTR
   \   00003D   7410         MOV     A,#0x10
   \   00003F   F0           MOVX    @DPTR,A
   1398          		pkt->devAddr16.addr.shortAddr = NLME_GetShortAddr();
   \   000040                ; Setup parameters for call to function NLME_GetShortAddr
   \   000040   12....       LCALL   `??NLME_GetShortAddr::?relay`; Banked call to: NLME_GetShortAddr
   \   000043   E5..         MOV     A,?V4
   \   000045   240E         ADD     A,#0xe
   \   000047   F582         MOV     DPL,A
   \   000049   E4           CLR     A
   \   00004A   35..         ADDC    A,?V5
   \   00004C   F583         MOV     DPH,A
   \   00004E   EA           MOV     A,R2
   \   00004F   F0           MOVX    @DPTR,A
   \   000050   A3           INC     DPTR
   \   000051   EB           MOV     A,R3
   \   000052   F0           MOVX    @DPTR,A
   1399          		osal_memcpy(&pkt->devAddr64.addr.extAddr, NLME_GetExtAddr(), Z_EXTADDR_LEN);
   \   000053                ; Setup parameters for call to function NLME_GetExtAddr
   \   000053   12....       LCALL   `??NLME_GetExtAddr::?relay`; Banked call to: NLME_GetExtAddr
   \   000056   8A..         MOV     ?V2,R2
   \   000058   8B..         MOV     ?V3,R3
   \   00005A   85....       MOV     ?V0,?V2
   \   00005D   85....       MOV     ?V1,?V3
   \   000060                ; Setup parameters for call to function osal_memcpy
   \   000060   75..00       MOV     ?V2,#0x0
   \   000063   78..         MOV     R0,#?V0
   \   000065   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000068   7C08         MOV     R4,#0x8
   \   00006A   7D00         MOV     R5,#0x0
   \   00006C   E5..         MOV     A,?V4
   \   00006E   2402         ADD     A,#0x2
   \   000070   FA           MOV     R2,A
   \   000071   E4           CLR     A
   \   000072   35..         ADDC    A,?V5
   \   000074   FB           MOV     R3,A
   \   000075   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000078   7403         MOV     A,#0x3
   \   00007A   12....       LCALL   ?DEALLOC_XSTACK8
   1400          		pkt->timestamp = osal_getClock();
   \   00007D                ; Setup parameters for call to function osal_getClock
   \   00007D   12....       LCALL   `??osal_getClock::?relay`; Banked call to: osal_getClock
   \   000080   EA           MOV     A,R2
   \   000081   F8           MOV     R0,A
   \   000082   EB           MOV     A,R3
   \   000083   F9           MOV     R1,A
   \   000084   EC           MOV     A,R4
   \   000085   FA           MOV     R2,A
   \   000086   ED           MOV     A,R5
   \   000087   FB           MOV     R3,A
   \   000088   E5..         MOV     A,?V4
   \   00008A   241C         ADD     A,#0x1c
   \   00008C   F582         MOV     DPL,A
   \   00008E   E4           CLR     A
   \   00008F   35..         ADDC    A,?V5
   \   000091   F583         MOV     DPH,A
   \   000093   12....       LCALL   ?XSTORE_R0123
   1401          
   1402          		osal_memcpy(&parentShortAddr, &_NIB.nwkCoordAddress, sizeof(uint16));
   \   000096                ; Setup parameters for call to function osal_memcpy
   \   000096   75....       MOV     ?V0,#(_NIB + 23) & 0xff
   \   000099   75....       MOV     ?V1,#((_NIB + 23) >> 8) & 0xff
   \   00009C   75..00       MOV     ?V2,#0x0
   \   00009F   78..         MOV     R0,#?V0
   \   0000A1   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000A4   7C02         MOV     R4,#0x2
   \   0000A6   7D00         MOV     R5,#0x0
   \   0000A8   7403         MOV     A,#0x3
   \   0000AA   12....       LCALL   ?XSTACK_DISP101_8
   \   0000AD   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0000B0   7403         MOV     A,#0x3
   \   0000B2   12....       LCALL   ?DEALLOC_XSTACK8
   1403          		pkt->parentaddr = parentShortAddr;
   \   0000B5   85..82       MOV     DPL,?XSP + 0
   \   0000B8   85..83       MOV     DPH,?XSP + 1
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F8           MOV     R0,A
   \   0000BD   A3           INC     DPTR
   \   0000BE   E0           MOVX    A,@DPTR
   \   0000BF   F9           MOV     R1,A
   \   0000C0   E5..         MOV     A,?V4
   \   0000C2   241A         ADD     A,#0x1a
   \   0000C4   F582         MOV     DPL,A
   \   0000C6   E4           CLR     A
   \   0000C7   35..         ADDC    A,?V5
   \   0000C9   F583         MOV     DPH,A
   \   0000CB   E8           MOV     A,R0
   \   0000CC   F0           MOVX    @DPTR,A
   \   0000CD   A3           INC     DPTR
   \   0000CE   E9           MOV     A,R1
   \   0000CF   F0           MOVX    @DPTR,A
   1404          
   1405          		cnt++;
   \   0000D0   90....       MOV     DPTR,#cnt
   \   0000D3   E0           MOVX    A,@DPTR
   \   0000D4   2401         ADD     A,#0x1
   \   0000D6   F0           MOVX    @DPTR,A
   1406                        pkt->seqnum = cnt;
   \   0000D7   90....       MOV     DPTR,#cnt
   \   0000DA   E0           MOVX    A,@DPTR
   \   0000DB   C0E0         PUSH    A
   \   0000DD   E5..         MOV     A,?V4
   \   0000DF   2420         ADD     A,#0x20
   \   0000E1   F582         MOV     DPL,A
   \   0000E3   E4           CLR     A
   \   0000E4   35..         ADDC    A,?V5
   \   0000E6   F583         MOV     DPH,A
   \   0000E8   D0E0         POP     A
   \   0000EA   F0           MOVX    @DPTR,A
   1407                        if(cnt>254) cnt=2;  //chaokw
   \   0000EB   90....       MOV     DPTR,#cnt
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   64FF         XRL     A,#0xff
   \   0000F1   7006         JNZ     ??CustomApp_send_ping_req_1
   \   0000F3   90....       MOV     DPTR,#cnt
   \   0000F6   7402         MOV     A,#0x2
   \   0000F8   F0           MOVX    @DPTR,A
   1408                 
   1409          		if (afStatus_SUCCESS == AF_DataRequest( &SerialApp_TxAddr_p2p, &GenericApp_epDesc,
   1410                                 GENERICAPP_CMD_P2P_CLUSTERID,
   1411                                 len,   
   1412                                 (byte *)pkt,  
   1413                                 &GenericApp_TransID,
   1414                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ))   //AF_ACK_REQUEST
   \                     ??CustomApp_send_ping_req_1:
   \   0000F9                ; Setup parameters for call to function AF_DataRequest
   \   0000F9   75..1E       MOV     ?V0,#0x1e
   \   0000FC   78..         MOV     R0,#?V0
   \   0000FE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000101   75....       MOV     ?V0,#GenericApp_TransID & 0xff
   \   000104   75....       MOV     ?V1,#(GenericApp_TransID >> 8) & 0xff
   \   000107   78..         MOV     R0,#?V0
   \   000109   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00010C   78..         MOV     R0,#?V4
   \   00010E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000111   8E..         MOV     ?V0,R6
   \   000113   75..00       MOV     ?V1,#0x0
   \   000116   78..         MOV     R0,#?V0
   \   000118   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011B   75..04       MOV     ?V0,#0x4
   \   00011E   75..00       MOV     ?V1,#0x0
   \   000121   78..         MOV     R0,#?V0
   \   000123   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000126   7900         MOV     R1,#0x0
   \   000128   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00012A   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   00012C   7A..         MOV     R2,#SerialApp_TxAddr_p2p & 0xff
   \   00012E   7B..         MOV     R3,#(SerialApp_TxAddr_p2p >> 8) & 0xff
   \   000130   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   000133   7409         MOV     A,#0x9
   \   000135   12....       LCALL   ?DEALLOC_XSTACK8
   \   000138   E9           MOV     A,R1
   \   000139   7025         JNZ     ??CustomApp_send_ping_req_2
   1415                        {
   1416          #if defined( LCD_SUPPORTED )              
   1417                            HalLcdWriteStringValue( (char*)"pingreqSend", pkt->seqnum, 10, HAL_LCD_LINE_3);
   \   00013B                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00013B   75..05       MOV     ?V0,#0x5
   \   00013E   78..         MOV     R0,#?V0
   \   000140   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000143   790A         MOV     R1,#0xa
   \   000145   E5..         MOV     A,?V4
   \   000147   2420         ADD     A,#0x20
   \   000149   F582         MOV     DPL,A
   \   00014B   E4           CLR     A
   \   00014C   35..         ADDC    A,?V5
   \   00014E   F583         MOV     DPH,A
   \   000150   E0           MOVX    A,@DPTR
   \   000151   FC           MOV     R4,A
   \   000152   7D00         MOV     R5,#0x0
   \   000154   7A..         MOV     R2,#`?<Constant "pingreqSend">` & 0xff
   \   000156   7B..         MOV     R3,#(`?<Constant "pingreqSend">` >> 8) & 0xff
   \   000158   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   00015B   7401         MOV     A,#0x1
   \   00015D   12....       LCALL   ?DEALLOC_XSTACK8
   1418          #endif
   1419                        }
   1420          
   1421          	       osal_msg_deallocate( (uint8 *)pkt );
   \                     ??CustomApp_send_ping_req_2:
   \   000160                ; Setup parameters for call to function osal_msg_deallocate
   \   000160   AA..         MOV     R2,?V4
   \   000162   AB..         MOV     R3,?V5
   \   000164   12....       LCALL   `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \   000167   E9           MOV     A,R1
   1422          
   1423              }
   1424          
   1425          
   1426          #if 0   //chaokw  debug =================================================           
   1427          	send_buf[0] = 0xFE;
   1428          	send_buf[1 + MT_RPC_POS_LEN] = 0x08;
   1429          	send_buf[1 + MT_RPC_POS_CMD0] = 0x0080 & 0xff;
   1430          	send_buf[1 + MT_RPC_POS_CMD1] = (0x0080 >> 8) & 0xff;
   1431          	
   1432          	osal_memcpy( &send_buf[1 + MT_RPC_POS_DAT0], &pingRspTime, 4 );
   1433          
   1434          	timestamp = osal_getClock();
   1435          	osal_memcpy( &send_buf[1 + MT_RPC_POS_DAT0 + 4], &timestamp, 4 );
   1436          
   1437          
   1438          	send_buf[1 + MT_RPC_POS_DAT0 + SADDR_EXT_LEN] =
   1439          	  MT_UartCalcFCS( &send_buf[1 + MT_RPC_POS_LEN], MT_UART_HEAD_LEN + SADDR_EXT_LEN );
   1440          
   1441          	HalUARTWrite( 0, send_buf, MT_UART_HEAD_LEN + SADDR_EXT_LEN + 2 );
   1442          #endif //======================================================	
   1443          	
   1444              return;
   \                     ??CustomApp_send_ping_req_0:
   \   000168   7402         MOV     A,#0x2
   \   00016A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00016D   7F06         MOV     R7,#0x6
   \   00016F   02....       LJMP    ?BANKED_LEAVE_XDATA
   1445          }
   1446          
   1447          
   1448          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1449          void CustomApp_send_ping_rsp ( uint16 Addr16 )  
   \                     CustomApp_send_ping_rsp:
   1450          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   1451              uint16 msgid = PING_RSP_MSG;;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   743B         MOV     A,#0x3b
   \   000016   F0           MOVX    @DPTR,A
   \   000017   A3           INC     DPTR
   \   000018   7410         MOV     A,#0x10
   \   00001A   F0           MOVX    @DPTR,A
   1452          
   1453              SerialApp_TxAddr_p2p.addr.shortAddr = Addr16;
   \   00001B   90....       MOV     DPTR,#SerialApp_TxAddr_p2p
   \   00001E   EE           MOV     A,R6
   \   00001F   F0           MOVX    @DPTR,A
   \   000020   A3           INC     DPTR
   \   000021   EF           MOV     A,R7
   \   000022   F0           MOVX    @DPTR,A
   1454              if (afStatus_SUCCESS == AF_DataRequest( &SerialApp_TxAddr_p2p, &GenericApp_epDesc,
   1455                             GENERICAPP_CMD_P2P_CLUSTERID,
   1456                             2,   
   1457                             (byte *)&msgid,  
   1458                             &GenericApp_TransID,
   1459                             AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ))
   \   000023                ; Setup parameters for call to function AF_DataRequest
   \   000023   75..1E       MOV     ?V0,#0x1e
   \   000026   78..         MOV     R0,#?V0
   \   000028   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002B   75....       MOV     ?V0,#GenericApp_TransID & 0xff
   \   00002E   75....       MOV     ?V1,#(GenericApp_TransID >> 8) & 0xff
   \   000031   78..         MOV     R0,#?V0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7403         MOV     A,#0x3
   \   000038   12....       LCALL   ?XSTACK_DISP100_8
   \   00003B   88..         MOV     ?V0,R0
   \   00003D   89..         MOV     ?V1,R1
   \   00003F   78..         MOV     R0,#?V0
   \   000041   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000044   75..02       MOV     ?V0,#0x2
   \   000047   75..00       MOV     ?V1,#0x0
   \   00004A   78..         MOV     R0,#?V0
   \   00004C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004F   75..04       MOV     ?V0,#0x4
   \   000052   75..00       MOV     ?V1,#0x0
   \   000055   78..         MOV     R0,#?V0
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005A   7900         MOV     R1,#0x0
   \   00005C   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00005E   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   000060   7A..         MOV     R2,#SerialApp_TxAddr_p2p & 0xff
   \   000062   7B..         MOV     R3,#(SerialApp_TxAddr_p2p >> 8) & 0xff
   \   000064   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   000067   7409         MOV     A,#0x9
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006C   E9           MOV     A,R1
   \   00006D   701A         JNZ     ??CustomApp_send_ping_rsp_0
   1460              {
   1461          #if defined( LCD_SUPPORTED )              
   1462               HalLcdWriteStringValue( (char*)"pingrspSend", 1, 10, HAL_LCD_LINE_3);
   \   00006F                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00006F   75..05       MOV     ?V0,#0x5
   \   000072   78..         MOV     R0,#?V0
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000077   790A         MOV     R1,#0xa
   \   000079   7C01         MOV     R4,#0x1
   \   00007B   7D00         MOV     R5,#0x0
   \   00007D   7A..         MOV     R2,#`?<Constant "pingrspSend">` & 0xff
   \   00007F   7B..         MOV     R3,#(`?<Constant "pingrspSend">` >> 8) & 0xff
   \   000081   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000084   7401         MOV     A,#0x1
   \   000086   12....       LCALL   ?DEALLOC_XSTACK8
   1463          #endif
   1464              }
   1465              return;
   \                     ??CustomApp_send_ping_rsp_0:
   \   000089   7402         MOV     A,#0x2
   \   00008B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008E   7F02         MOV     R7,#0x2
   \   000090   02....       LJMP    ?BANKED_LEAVE_XDATA
   1466          }
   1467          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1468          void CustomApp_coordinater_broadcast_ping( void )  //chaokw ping
   \                     CustomApp_coordinater_broadcast_ping:
   1469          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1470              uint16 msgid = PING_RSP_MSG;;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   743B         MOV     A,#0x3b
   \   000012   F0           MOVX    @DPTR,A
   \   000013   A3           INC     DPTR
   \   000014   7410         MOV     A,#0x10
   \   000016   F0           MOVX    @DPTR,A
   1471          
   1472              SerialApp_TxAddr_broadcast.addr.shortAddr = 0xffff;
   \   000017   90....       MOV     DPTR,#SerialApp_TxAddr_broadcast
   \   00001A   74FF         MOV     A,#-0x1
   \   00001C   F0           MOVX    @DPTR,A
   \   00001D   A3           INC     DPTR
   \   00001E   74FF         MOV     A,#-0x1
   \   000020   F0           MOVX    @DPTR,A
   1473              if (afStatus_SUCCESS == AF_DataRequest( &SerialApp_TxAddr_broadcast, &GenericApp_epDesc,
   1474                             GENERICAPP_CMD_P2P_CLUSTERID,
   1475                             2,   
   1476                             (byte *)&msgid,  
   1477                             &GenericApp_TransID,
   1478                             AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ))
   \   000021                ; Setup parameters for call to function AF_DataRequest
   \   000021   75..1E       MOV     ?V0,#0x1e
   \   000024   78..         MOV     R0,#?V0
   \   000026   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000029   75....       MOV     ?V0,#GenericApp_TransID & 0xff
   \   00002C   75....       MOV     ?V1,#(GenericApp_TransID >> 8) & 0xff
   \   00002F   78..         MOV     R0,#?V0
   \   000031   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000034   7403         MOV     A,#0x3
   \   000036   12....       LCALL   ?XSTACK_DISP100_8
   \   000039   88..         MOV     ?V0,R0
   \   00003B   89..         MOV     ?V1,R1
   \   00003D   78..         MOV     R0,#?V0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042   75..02       MOV     ?V0,#0x2
   \   000045   75..00       MOV     ?V1,#0x0
   \   000048   78..         MOV     R0,#?V0
   \   00004A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004D   75..04       MOV     ?V0,#0x4
   \   000050   75..00       MOV     ?V1,#0x0
   \   000053   78..         MOV     R0,#?V0
   \   000055   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000058   7900         MOV     R1,#0x0
   \   00005A   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00005C   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   00005E   7A..         MOV     R2,#SerialApp_TxAddr_broadcast & 0xff
   \   000060   7B..         MOV     R3,#(SerialApp_TxAddr_broadcast >> 8) & 0xff
   \   000062   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   000065   7409         MOV     A,#0x9
   \   000067   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006A   E9           MOV     A,R1
   \   00006B   701A         JNZ     ??CustomApp_coordinater_broadcast_ping_0
   1479              {
   1480          #if defined( LCD_SUPPORTED )              
   1481               HalLcdWriteStringValue( (char*)"broadcast ping", 1, 10, HAL_LCD_LINE_3);
   \   00006D                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00006D   75..05       MOV     ?V0,#0x5
   \   000070   78..         MOV     R0,#?V0
   \   000072   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000075   790A         MOV     R1,#0xa
   \   000077   7C01         MOV     R4,#0x1
   \   000079   7D00         MOV     R5,#0x0
   \   00007B   7A..         MOV     R2,#`?<Constant "broadcast ping">` & 0xff
   \   00007D   7B..         MOV     R3,#(`?<Constant "broadcast ping">` >> 8) & 0xff
   \   00007F   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000082   7401         MOV     A,#0x1
   \   000084   12....       LCALL   ?DEALLOC_XSTACK8
   1482          #endif
   1483              }
   1484              return;
   \                     ??CustomApp_coordinater_broadcast_ping_0:
   \   000087   7402         MOV     A,#0x2
   \   000089   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008C   7F02         MOV     R7,#0x2
   \   00008E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1485          
   1486          }
   1487          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1488          void CustomApp_linkstatus_updated ( void )
   \                     CustomApp_linkstatus_updated:
   1489          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   1490              nodeList_t *nodeSearch = NULL;
   \   000005   7E00         MOV     R6,#0x0
   \   000007   7F00         MOV     R7,#0x0
   1491              uint8 status;
   1492          //#if defined( LCD_SUPPORTED )    	
   1493              uint8 activeCount;
   1494          //#endif
   1495          
   1496          
   1497          node_check:
   1498              for (nodeSearch = nodeList; nodeSearch != NULL; nodeSearch = nodeSearch->nextDesc)
   \                     ??CustomApp_linkstatus_updated_0:
   \   000009   90....       MOV     DPTR,#nodeList
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F8           MOV     R0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F9           MOV     R1,A
   \   000011   E8           MOV     A,R0
   \   000012   FE           MOV     R6,A
   \   000013   E9           MOV     A,R1
   \   000014   FF           MOV     R7,A
   \                     ??CustomApp_linkstatus_updated_1:
   \   000015   EE           MOV     A,R6
   \   000016   4F           ORL     A,R7
   \   000017   7003         JNZ     $+5
   \   000019   02....       LJMP    ??CustomApp_linkstatus_updated_2 & 0xFFFF
   1499              {
   1500                  if (nodeSearch->status == nodedisconnected)
   \   00001C   EE           MOV     A,R6
   \   00001D   241A         ADD     A,#0x1a
   \   00001F   F582         MOV     DPL,A
   \   000021   E4           CLR     A
   \   000022   3F           ADDC    A,R7
   \   000023   F583         MOV     DPH,A
   \   000025   E0           MOVX    A,@DPTR
   \   000026   6401         XRL     A,#0x1
   \   000028   7072         JNZ     ??CustomApp_linkstatus_updated_3
   1501                  {
   1502                      //node delete
   1503          	     status = CustomApp_NodeDelete( nodeSearch->devAddr16.addr.shortAddr );
   \   00002A                ; Setup parameters for call to function CustomApp_NodeDelete
   \   00002A   EE           MOV     A,R6
   \   00002B   240E         ADD     A,#0xe
   \   00002D   F582         MOV     DPL,A
   \   00002F   E4           CLR     A
   \   000030   3F           ADDC    A,R7
   \   000031   F583         MOV     DPH,A
   \   000033   E0           MOVX    A,@DPTR
   \   000034   FA           MOV     R2,A
   \   000035   A3           INC     DPTR
   \   000036   E0           MOVX    A,@DPTR
   \   000037   FB           MOV     R3,A
   \   000038   12....       LCALL   `??CustomApp_NodeDelete::?relay`; Banked call to: CustomApp_NodeDelete
   \   00003B   E9           MOV     A,R1
   \   00003C   F5..         MOV     ?V0,A
   1504                      if(nodeStatus_SUCCESS == status)
   \   00003E   E5..         MOV     A,?V0
   \   000040   703D         JNZ     ??CustomApp_linkstatus_updated_4
   1505                      {
   1506                            CustomApp_node_deregister_ind(nodeSearch->devAddr64, nodeSearch->devAddr16);
   \   000042                ; Setup parameters for call to function CustomApp_node_deregister_ind
   \   000042   EE           MOV     A,R6
   \   000043   240E         ADD     A,#0xe
   \   000045   F582         MOV     DPL,A
   \   000047   E4           CLR     A
   \   000048   3F           ADDC    A,R7
   \   000049   F583         MOV     DPH,A
   \   00004B   740C         MOV     A,#0xc
   \   00004D   12....       LCALL   ?PUSH_XSTACK8_X
   \   000050   8E82         MOV     DPL,R6
   \   000052   8F83         MOV     DPH,R7
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   740C         MOV     A,#0xc
   \   000058   12....       LCALL   ?PUSH_XSTACK8_X
   \   00005B   12....       LCALL   `??CustomApp_node_deregister_ind::?relay`; Banked call to: CustomApp_node_deregister_ind
   \   00005E   7418         MOV     A,#0x18
   \   000060   12....       LCALL   ?DEALLOC_XSTACK8
   1507                            //CustomApp_router_offline_req ( nodeSearch->devAddr16 );		//chaokw ping
   1508          #if defined( LCD_SUPPORTED )				  
   1509                            HalLcdWriteStringValue( (char*)"nodedelete OK:", status, 16, HAL_LCD_LINE_3 );
   \   000063                ; Setup parameters for call to function HalLcdWriteStringValue
   \   000063   75..05       MOV     ?V2,#0x5
   \   000066   78..         MOV     R0,#?V2
   \   000068   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006B   7910         MOV     R1,#0x10
   \   00006D   AC..         MOV     R4,?V0
   \   00006F   7D00         MOV     R5,#0x0
   \   000071   7A..         MOV     R2,#`?<Constant "nodedelete OK:">` & 0xff
   \   000073   7B..         MOV     R3,#(`?<Constant "nodedelete OK:">` >> 8) & 0xff
   \   000075   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000078   7401         MOV     A,#0x1
   \   00007A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007D   808A         SJMP    ??CustomApp_linkstatus_updated_0
   1510          #endif
   1511                      }
   1512                      else
   1513                      {
   1514          #if defined( LCD_SUPPORTED )            
   1515                            HalLcdWriteStringValue( (char*)"nodedelete NOK:", status, 16, HAL_LCD_LINE_3 );
   \                     ??CustomApp_linkstatus_updated_4:
   \   00007F                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00007F   75..05       MOV     ?V2,#0x5
   \   000082   78..         MOV     R0,#?V2
   \   000084   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000087   7910         MOV     R1,#0x10
   \   000089   AC..         MOV     R4,?V0
   \   00008B   7D00         MOV     R5,#0x0
   \   00008D   7A..         MOV     R2,#`?<Constant "nodedelete NOK:">` & 0xff
   \   00008F   7B..         MOV     R3,#(`?<Constant "nodedelete NOK:">` >> 8) & 0xff
   \   000091   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   000094   7401         MOV     A,#0x1
   \   000096   12....       LCALL   ?DEALLOC_XSTACK8
   1516          #endif
   1517                      }
   1518                      goto node_check;   //break;
   \   000099   02....       LJMP    ??CustomApp_linkstatus_updated_0 & 0xFFFF
   1519                  }
   1520                  else if (nodeSearch->status == nodeconnected)
   \                     ??CustomApp_linkstatus_updated_3:
   \   00009C   EE           MOV     A,R6
   \   00009D   241A         ADD     A,#0x1a
   \   00009F   F582         MOV     DPL,A
   \   0000A1   E4           CLR     A
   \   0000A2   3F           ADDC    A,R7
   \   0000A3   F583         MOV     DPH,A
   \   0000A5   E0           MOVX    A,@DPTR
   \   0000A6   6402         XRL     A,#0x2
   \   0000A8   7052         JNZ     ??CustomApp_linkstatus_updated_5
   1521                  {		
   1522                       if(nodeSearch->timestamp == nodeSearch->oldtimestamp)
   \   0000AA   EE           MOV     A,R6
   \   0000AB   2420         ADD     A,#0x20
   \   0000AD   F582         MOV     DPL,A
   \   0000AF   E4           CLR     A
   \   0000B0   3F           ADDC    A,R7
   \   0000B1   F583         MOV     DPH,A
   \   0000B3   78..         MOV     R0,#?V4
   \   0000B5   12....       LCALL   ?L_MOV_X
   \   0000B8   EE           MOV     A,R6
   \   0000B9   241C         ADD     A,#0x1c
   \   0000BB   F582         MOV     DPL,A
   \   0000BD   E4           CLR     A
   \   0000BE   3F           ADDC    A,R7
   \   0000BF   F583         MOV     DPH,A
   \   0000C1   78..         MOV     R0,#?V4
   \   0000C3   12....       LCALL   ?L_EQ_X
   \   0000C6   7034         JNZ     ??CustomApp_linkstatus_updated_5
   1523                       {
   1524                           nodeSearch->timeoutcnt ++;
   \   0000C8   EE           MOV     A,R6
   \   0000C9   2424         ADD     A,#0x24
   \   0000CB   F582         MOV     DPL,A
   \   0000CD   E4           CLR     A
   \   0000CE   3F           ADDC    A,R7
   \   0000CF   F583         MOV     DPH,A
   \   0000D1   E0           MOVX    A,@DPTR
   \   0000D2   2401         ADD     A,#0x1
   \   0000D4   F0           MOVX    @DPTR,A
   1525          	          if(nodeSearch->timeoutcnt < TIMEOUT_CNT)
   \   0000D5   EE           MOV     A,R6
   \   0000D6   2424         ADD     A,#0x24
   \   0000D8   F582         MOV     DPL,A
   \   0000DA   E4           CLR     A
   \   0000DB   3F           ADDC    A,R7
   \   0000DC   F583         MOV     DPH,A
   \   0000DE   E0           MOVX    A,@DPTR
   \   0000DF   C3           CLR     C
   \   0000E0   9404         SUBB    A,#0x4
   \   0000E2   403C         JC      ??CustomApp_linkstatus_updated_2
   1526                           {
   1527                                   break;
   1528                           }
   1529                           nodeSearch->timeoutcnt = 0;
   \   0000E4   EE           MOV     A,R6
   \   0000E5   2424         ADD     A,#0x24
   \   0000E7   F582         MOV     DPL,A
   \   0000E9   E4           CLR     A
   \   0000EA   3F           ADDC    A,R7
   \   0000EB   F583         MOV     DPH,A
   \   0000ED   7400         MOV     A,#0x0
   \   0000EF   F0           MOVX    @DPTR,A
   1530                           nodeSearch->status = nodedisconnected;
   \   0000F0   EE           MOV     A,R6
   \   0000F1   241A         ADD     A,#0x1a
   \   0000F3   F582         MOV     DPL,A
   \   0000F5   E4           CLR     A
   \   0000F6   3F           ADDC    A,R7
   \   0000F7   F583         MOV     DPH,A
   \   0000F9   7401         MOV     A,#0x1
   \   0000FB   F0           MOVX    @DPTR,A
   1531                       }
   1532                  }
   1533                  nodeSearch->oldtimestamp = nodeSearch->timestamp;		
   \                     ??CustomApp_linkstatus_updated_5:
   \   0000FC   EE           MOV     A,R6
   \   0000FD   241C         ADD     A,#0x1c
   \   0000FF   F582         MOV     DPL,A
   \   000101   E4           CLR     A
   \   000102   3F           ADDC    A,R7
   \   000103   F583         MOV     DPH,A
   \   000105   12....       LCALL   ?XLOAD_R0123
   \   000108   EE           MOV     A,R6
   \   000109   2420         ADD     A,#0x20
   \   00010B   F582         MOV     DPL,A
   \   00010D   E4           CLR     A
   \   00010E   3F           ADDC    A,R7
   \   00010F   F583         MOV     DPH,A
   \   000111   12....       LCALL   ?XSTORE_R0123
   1534              }
   \   000114   8E82         MOV     DPL,R6
   \   000116   8F83         MOV     DPH,R7
   \   000118   E0           MOVX    A,@DPTR
   \   000119   FE           MOV     R6,A
   \   00011A   A3           INC     DPTR
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   FF           MOV     R7,A
   \   00011D   02....       LJMP    ??CustomApp_linkstatus_updated_1 & 0xFFFF
   1535          
   1536              activeCount = CustomApp_get_connected_node_count();
   \                     ??CustomApp_linkstatus_updated_2:
   \   000120                ; Setup parameters for call to function CustomApp_get_connected_node_count
   \   000120   12....       LCALL   `??CustomApp_get_connected_node_count::?relay`; Banked call to: CustomApp_get_connected_node_count
   \   000123   E9           MOV     A,R1
   \   000124   F5..         MOV     ?V1,A
   1537          #if defined( LCD_SUPPORTED )    	
   1538              HalLcdWriteStringValue( (char*)"connected:", activeCount, 10, HAL_LCD_LINE_1 );
   \   000126                ; Setup parameters for call to function HalLcdWriteStringValue
   \   000126   75..01       MOV     ?V2,#0x1
   \   000129   78..         MOV     R0,#?V2
   \   00012B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00012E   790A         MOV     R1,#0xa
   \   000130   AC..         MOV     R4,?V1
   \   000132   7D00         MOV     R5,#0x0
   \   000134   7A..         MOV     R2,#`?<Constant "connected:">` & 0xff
   \   000136   7B..         MOV     R3,#(`?<Constant "connected:">` >> 8) & 0xff
   \   000138   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   00013B   7401         MOV     A,#0x1
   \   00013D   12....       LCALL   ?DEALLOC_XSTACK8
   1539          #endif
   1540          
   1541          
   1542          #if 1
   1543              //exception: panid conflict 
   1544              if(activeCount > Authlist_item_cnt())
   \   000140                ; Setup parameters for call to function Authlist_item_cnt
   \   000140   12....       LCALL   `??Authlist_item_cnt::?relay`; Banked call to: Authlist_item_cnt
   \   000143   E9           MOV     A,R1
   \   000144   C3           CLR     C
   \   000145   95..         SUBB    A,?V1
   \   000147   5003         JNC     ??CustomApp_linkstatus_updated_6
   1545              {
   1546          #if defined ( NV_RESTORE )		
   1547                  NLME_InitNV();
   1548                  NLME_SetDefaultNV();
   1549                  ZDSecMgrClearNVKeyValues();
   1550          #endif	  
   1551                  Onboard_soft_reset();
   \   000149                ; Setup parameters for call to function Onboard_soft_reset
   \   000149   12....       LCALL   Onboard_soft_reset & 0xFFFF
   1552              }
   1553          #endif
   1554          
   1555          
   1556              return;
   \                     ??CustomApp_linkstatus_updated_6:
   \   00014C   7F08         MOV     R7,#0x8
   \   00014E   02....       LJMP    ?BANKED_LEAVE_XDATA
   1557          }
   1558          
   1559          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1560          void  CustomApp_process_ping( pingpkt_t *pkt )
   \                     CustomApp_process_ping:
   1561          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1562                  nodeList_t *nodeSearch;
   1563          	 nodeList_t *pnode;
   1564                  nodeSearch = CustomApp_NodeFindNwkAddrList(pkt->devAddr16.addr.shortAddr);
   \   000009                ; Setup parameters for call to function CustomApp_NodeFindNwkAddrList
   \   000009   EE           MOV     A,R6
   \   00000A   240E         ADD     A,#0xe
   \   00000C   F582         MOV     DPL,A
   \   00000E   E4           CLR     A
   \   00000F   3F           ADDC    A,R7
   \   000010   F583         MOV     DPH,A
   \   000012   E0           MOVX    A,@DPTR
   \   000013   FA           MOV     R2,A
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   FB           MOV     R3,A
   \   000017   12....       LCALL   `??CustomApp_NodeFindNwkAddrList::?relay`; Banked call to: CustomApp_NodeFindNwkAddrList
   \   00001A   8A..         MOV     ?V4,R2
   \   00001C   8B..         MOV     ?V5,R3
   \   00001E   85....       MOV     ?V0,?V4
   \   000021   85....       MOV     ?V1,?V5
   1565                  if (nodeSearch!=NULL)
   \   000024   E5..         MOV     A,?V0
   \   000026   45..         ORL     A,?V1
   \   000028   6063         JZ      ??CustomApp_process_ping_0
   1566                  {
   1567                     if(nodeSearch->status == nodeconnected)
   \   00002A   E5..         MOV     A,?V0
   \   00002C   241A         ADD     A,#0x1a
   \   00002E   F582         MOV     DPL,A
   \   000030   E4           CLR     A
   \   000031   35..         ADDC    A,?V1
   \   000033   F583         MOV     DPH,A
   \   000035   E0           MOVX    A,@DPTR
   \   000036   6402         XRL     A,#0x2
   \   000038   6003         JZ      $+5
   \   00003A   02....       LJMP    ??CustomApp_process_ping_1 & 0xFFFF
   1568                     {
   1569          		   nodeSearch->timestamp = pkt->timestamp;
   \   00003D   EE           MOV     A,R6
   \   00003E   241C         ADD     A,#0x1c
   \   000040   F582         MOV     DPL,A
   \   000042   E4           CLR     A
   \   000043   3F           ADDC    A,R7
   \   000044   F583         MOV     DPH,A
   \   000046   12....       LCALL   ?XLOAD_R0123
   \   000049   E5..         MOV     A,?V0
   \   00004B   241C         ADD     A,#0x1c
   \   00004D   F582         MOV     DPL,A
   \   00004F   E4           CLR     A
   \   000050   35..         ADDC    A,?V1
   \   000052   F583         MOV     DPH,A
   \   000054   12....       LCALL   ?XSTORE_R0123
   1570          		   if (pkt->seqnum <= 2)
   \   000057   EE           MOV     A,R6
   \   000058   2420         ADD     A,#0x20
   \   00005A   F582         MOV     DPL,A
   \   00005C   E4           CLR     A
   \   00005D   3F           ADDC    A,R7
   \   00005E   F583         MOV     DPH,A
   \   000060   E0           MOVX    A,@DPTR
   \   000061   C3           CLR     C
   \   000062   9403         SUBB    A,#0x3
   \   000064   4003         JC      $+5
   \   000066   02....       LJMP    ??CustomApp_process_ping_1 & 0xFFFF
   1571          		   CustomApp_node_register_ind(pkt->devAddr64, pkt->devAddr16);
   \   000069                ; Setup parameters for call to function CustomApp_node_register_ind
   \   000069   EE           MOV     A,R6
   \   00006A   240E         ADD     A,#0xe
   \   00006C   F582         MOV     DPL,A
   \   00006E   E4           CLR     A
   \   00006F   3F           ADDC    A,R7
   \   000070   F583         MOV     DPH,A
   \   000072   740C         MOV     A,#0xc
   \   000074   12....       LCALL   ?PUSH_XSTACK8_X
   \   000077   8E82         MOV     DPL,R6
   \   000079   8F83         MOV     DPH,R7
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   740C         MOV     A,#0xc
   \   00007F   12....       LCALL   ?PUSH_XSTACK8_X
   \   000082   12....       LCALL   `??CustomApp_node_register_ind::?relay`; Banked call to: CustomApp_node_register_ind
   \   000085   7418         MOV     A,#0x18
   \   000087   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008A   02....       LJMP    ??CustomApp_process_ping_1 & 0xFFFF
   1572                     }
   1573                  }
   1574          	 else
   1575          	 {
   1576                      pnode=CustomApp_NodeRegister(pkt->devAddr64, pkt->devAddr16);
   \                     ??CustomApp_process_ping_0:
   \   00008D                ; Setup parameters for call to function CustomApp_NodeRegister
   \   00008D   EE           MOV     A,R6
   \   00008E   240E         ADD     A,#0xe
   \   000090   F582         MOV     DPL,A
   \   000092   E4           CLR     A
   \   000093   3F           ADDC    A,R7
   \   000094   F583         MOV     DPH,A
   \   000096   740C         MOV     A,#0xc
   \   000098   12....       LCALL   ?PUSH_XSTACK8_X
   \   00009B   8E82         MOV     DPL,R6
   \   00009D   8F83         MOV     DPH,R7
   \   00009F   A3           INC     DPTR
   \   0000A0   A3           INC     DPTR
   \   0000A1   740C         MOV     A,#0xc
   \   0000A3   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000A6   12....       LCALL   `??CustomApp_NodeRegister::?relay`; Banked call to: CustomApp_NodeRegister
   \   0000A9   7418         MOV     A,#0x18
   \   0000AB   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000AE   8A..         MOV     ?V4,R2
   \   0000B0   8B..         MOV     ?V5,R3
   \   0000B2   85....       MOV     ?V2,?V4
   \   0000B5   85....       MOV     ?V3,?V5
   1577                      if(pnode!=NULL)
   \   0000B8   E5..         MOV     A,?V2
   \   0000BA   45..         ORL     A,?V3
   \   0000BC   6073         JZ      ??CustomApp_process_ping_1
   1578                      {
   1579                           CustomApp_node_register_ind(pkt->devAddr64, pkt->devAddr16);	//0x18
   \   0000BE                ; Setup parameters for call to function CustomApp_node_register_ind
   \   0000BE   EE           MOV     A,R6
   \   0000BF   240E         ADD     A,#0xe
   \   0000C1   F582         MOV     DPL,A
   \   0000C3   E4           CLR     A
   \   0000C4   3F           ADDC    A,R7
   \   0000C5   F583         MOV     DPH,A
   \   0000C7   740C         MOV     A,#0xc
   \   0000C9   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000CC   8E82         MOV     DPL,R6
   \   0000CE   8F83         MOV     DPH,R7
   \   0000D0   A3           INC     DPTR
   \   0000D1   A3           INC     DPTR
   \   0000D2   740C         MOV     A,#0xc
   \   0000D4   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000D7   12....       LCALL   `??CustomApp_node_register_ind::?relay`; Banked call to: CustomApp_node_register_ind
   \   0000DA   7418         MOV     A,#0x18
   \   0000DC   12....       LCALL   ?DEALLOC_XSTACK8
   1580                           CustomApp_router_online_req(pkt->devAddr16);
   \   0000DF                ; Setup parameters for call to function CustomApp_router_online_req
   \   0000DF   EE           MOV     A,R6
   \   0000E0   240E         ADD     A,#0xe
   \   0000E2   F582         MOV     DPL,A
   \   0000E4   E4           CLR     A
   \   0000E5   3F           ADDC    A,R7
   \   0000E6   F583         MOV     DPH,A
   \   0000E8   740C         MOV     A,#0xc
   \   0000EA   12....       LCALL   ?PUSH_XSTACK8_X
   \   0000ED   12....       LCALL   `??CustomApp_router_online_req::?relay`; Banked call to: CustomApp_router_online_req
   \   0000F0   740C         MOV     A,#0xc
   \   0000F2   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F5   E9           MOV     A,R1
   1581          #if 0				 
   1582                           osal_start_timerEx( GenericApp_TaskID,
   1583          					GENERICAPP_ROUTER_ONLINE_EVT,
   1584          					5000); 		
   1585          #endif
   1586                           CustomApp_router_online_req(pkt->devAddr16);
   \   0000F6                ; Setup parameters for call to function CustomApp_router_online_req
   \   0000F6   EE           MOV     A,R6
   \   0000F7   240E         ADD     A,#0xe
   \   0000F9   F582         MOV     DPL,A
   \   0000FB   E4           CLR     A
   \   0000FC   3F           ADDC    A,R7
   \   0000FD   F583         MOV     DPH,A
   \   0000FF   740C         MOV     A,#0xc
   \   000101   12....       LCALL   ?PUSH_XSTACK8_X
   \   000104   12....       LCALL   `??CustomApp_router_online_req::?relay`; Banked call to: CustomApp_router_online_req
   \   000107   740C         MOV     A,#0xc
   \   000109   12....       LCALL   ?DEALLOC_XSTACK8
   \   00010C   E9           MOV     A,R1
   1587          #if defined( LCD_SUPPORTED )
   1588                           HalLcdWriteStringValue( (char*)"nodregOK:", pkt->devAddr16.addr.shortAddr, 16, HAL_LCD_LINE_2 );  
   \   00010D                ; Setup parameters for call to function HalLcdWriteStringValue
   \   00010D   75..03       MOV     ?V4,#0x3
   \   000110   78..         MOV     R0,#?V4
   \   000112   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000115   7910         MOV     R1,#0x10
   \   000117   EE           MOV     A,R6
   \   000118   240E         ADD     A,#0xe
   \   00011A   F582         MOV     DPL,A
   \   00011C   E4           CLR     A
   \   00011D   3F           ADDC    A,R7
   \   00011E   F583         MOV     DPH,A
   \   000120   E0           MOVX    A,@DPTR
   \   000121   FC           MOV     R4,A
   \   000122   A3           INC     DPTR
   \   000123   E0           MOVX    A,@DPTR
   \   000124   FD           MOV     R5,A
   \   000125   7A..         MOV     R2,#`?<Constant "nodregOK:">` & 0xff
   \   000127   7B..         MOV     R3,#(`?<Constant "nodregOK:">` >> 8) & 0xff
   \   000129   12....       LCALL   `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   00012C   7401         MOV     A,#0x1
   \   00012E   12....       LCALL   ?DEALLOC_XSTACK8
   1589          #endif
   1590                      }	  
   1591          	 }
   1592          	 nodeSearch->oldtimestamp = nodeSearch->timestamp;  //chaokw ping
   \                     ??CustomApp_process_ping_1:
   \   000131   E5..         MOV     A,?V0
   \   000133   241C         ADD     A,#0x1c
   \   000135   F582         MOV     DPL,A
   \   000137   E4           CLR     A
   \   000138   35..         ADDC    A,?V1
   \   00013A   F583         MOV     DPH,A
   \   00013C   12....       LCALL   ?XLOAD_R0123
   \   00013F   E5..         MOV     A,?V0
   \   000141   2420         ADD     A,#0x20
   \   000143   F582         MOV     DPL,A
   \   000145   E4           CLR     A
   \   000146   35..         ADDC    A,?V1
   \   000148   F583         MOV     DPH,A
   \   00014A   12....       LCALL   ?XSTORE_R0123
   1593          	 CustomApp_send_ping_rsp(pkt->devAddr16.addr.shortAddr);  //chaokw ping
   \   00014D                ; Setup parameters for call to function CustomApp_send_ping_rsp
   \   00014D   EE           MOV     A,R6
   \   00014E   240E         ADD     A,#0xe
   \   000150   F582         MOV     DPL,A
   \   000152   E4           CLR     A
   \   000153   3F           ADDC    A,R7
   \   000154   F583         MOV     DPH,A
   \   000156   E0           MOVX    A,@DPTR
   \   000157   FA           MOV     R2,A
   \   000158   A3           INC     DPTR
   \   000159   E0           MOVX    A,@DPTR
   \   00015A   FB           MOV     R3,A
   \   00015B   12....       LCALL   `??CustomApp_send_ping_rsp::?relay`; Banked call to: CustomApp_send_ping_rsp
   1594          	 
   1595          }
   \   00015E   7F06         MOV     R7,#0x6
   \   000160   02....       LJMP    ?BANKED_LEAVE_XDATA
   1596          
   1597          
   1598          #if( ZSTACK_DEVICE_BUILD != DEVICE_BUILD_COORDINATOR)	

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1599          void CustomApp_ping_timeout_check ( void )
   \                     CustomApp_ping_timeout_check:
   1600          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000                REQUIRE ?V10
   \   000000                REQUIRE ?V11
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
   1601              uint32 timestamp = osal_getClock();
   \   000005                ; Setup parameters for call to function osal_getClock
   \   000005   12....       LCALL   `??osal_getClock::?relay`; Banked call to: osal_getClock
   \   000008   8A..         MOV     ?V8,R2
   \   00000A   8B..         MOV     ?V9,R3
   \   00000C   8C..         MOV     ?V10,R4
   \   00000E   8D..         MOV     ?V11,R5
   1602          #if 0	
   1603          #if defined( LCD_SUPPORTED )
   1604              HalLcdWriteStringValue( (char*)"ping timeout:", (timestamp - pingRspTime), 16, HAL_LCD_LINE_3 );  
   1605          #endif	
   1606          #endif
   1607              if ( abs(timestamp - pingRspTime) >= 60 ) 
   \   000010                ; Setup parameters for call to function abs
   \   000010   85....       MOV     ?V0,?V8
   \   000013   85....       MOV     ?V1,?V9
   \   000016   90....       MOV     DPTR,#pingRspTime
   \   000019   78..         MOV     R0,#?V4
   \   00001B   12....       LCALL   ?L_MOV_X
   \   00001E   E5..         MOV     A,?V0
   \   000020   C3           CLR     C
   \   000021   95..         SUBB    A,?V4
   \   000023   FA           MOV     R2,A
   \   000024   E5..         MOV     A,?V1
   \   000026   95..         SUBB    A,?V5
   \   000028   FB           MOV     R3,A
   \   000029   12....       LCALL   `??abs::?relay`      ; Banked call to: abs
   \   00002C   8A..         MOV     ?V0,R2
   \   00002E   8B..         MOV     ?V1,R3
   \   000030   C3           CLR     C
   \   000031   E5..         MOV     A,?V0
   \   000033   943C         SUBB    A,#0x3c
   \   000035   E5..         MOV     A,?V1
   \   000037   9400         SUBB    A,#0x0
   \   000039   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00003B   65D0         XRL     A,PSW
   \   00003D   33           RLC     A
   \   00003E   4003         JC      ??CustomApp_ping_timeout_check_0
   1608                  Onboard_soft_reset();	
   \   000040                ; Setup parameters for call to function Onboard_soft_reset
   \   000040   12....       LCALL   Onboard_soft_reset & 0xFFFF
   1609          }
   \                     ??CustomApp_ping_timeout_check_0:
   \   000043   7F0C         MOV     R7,#0xc
   \   000045   02....       LJMP    ?BANKED_LEAVE_XDATA
   1610          #endif
   1611          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1612          uint8 CustomApp_get_connected_node_count( void )
   \                     CustomApp_get_connected_node_count:
   1613          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1614          	uint8 activeCount = 0;
   \   000004   7900         MOV     R1,#0x0
   1615          	nodeList_t *nodeSearch;
   1616          
   1617                 for (nodeSearch = nodeList; (nodeSearch != NULL); nodeSearch = nodeSearch->nextDesc)
   \   000006   90....       MOV     DPTR,#nodeList
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   FC           MOV     R4,A
   \   00000B   A3           INC     DPTR
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   FD           MOV     R5,A
   \   00000E   EC           MOV     A,R4
   \   00000F   FA           MOV     R2,A
   \   000010   ED           MOV     A,R5
   \   000011   FB           MOV     R3,A
   \                     ??CustomApp_get_connected_node_count_0:
   \   000012   EA           MOV     A,R2
   \   000013   4B           ORL     A,R3
   \   000014   601A         JZ      ??CustomApp_get_connected_node_count_1
   1618                 {
   1619                  if (nodeSearch->status == nodeconnected)
   \   000016   EA           MOV     A,R2
   \   000017   241A         ADD     A,#0x1a
   \   000019   F582         MOV     DPL,A
   \   00001B   E4           CLR     A
   \   00001C   3B           ADDC    A,R3
   \   00001D   F583         MOV     DPH,A
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   6402         XRL     A,#0x2
   \   000022   7001         JNZ     ??CustomApp_get_connected_node_count_2
   1620                  {
   1621                      activeCount ++;
   \   000024   09           INC     R1
   1622                  }
   1623                 }
   \                     ??CustomApp_get_connected_node_count_2:
   \   000025   8A82         MOV     DPL,R2
   \   000027   8B83         MOV     DPH,R3
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   FA           MOV     R2,A
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   FB           MOV     R3,A
   \   00002E   80E2         SJMP    ??CustomApp_get_connected_node_count_0
   1624                 return activeCount;
   \                     ??CustomApp_get_connected_node_count_1:
   \   000030   D083         POP     DPH
   \   000032   D082         POP     DPL
   \   000034   02....       LJMP    ?BRET
   1625          }
   1626          
   1627          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1628          bool GenericApp_Device_JoinRsp(afIncomingMSGPacket_t *pkt)
   \                     GenericApp_Device_JoinRsp:
   1629          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 108
   \   000005   7494         MOV     A,#-0x6c
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V8,R2
   \   00000C   8B..         MOV     ?V9,R3
   1630          	transferpkt_t *protocol_pack;
   1631          	uint16 clusterid;
   1632          	uint8 buf[100];
   1633          	bool ret = FALSE;
   \   00000E   75..00       MOV     ?V2,#0x0
   1634          	uint8 extaddr[SADDR_EXT_LEN] = {0};
   \   000011   90....       MOV     DPTR,#`?<Constant {0, 0, 0, 0, 0, 0, 0, 0}>`
   \   000014   AC..         MOV     R4,?XSP + 0
   \   000016   AD..         MOV     R5,?XSP + 1
   \   000018   7408         MOV     A,#0x8
   \   00001A   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1635          
   1636          	osal_memcpy(extaddr, pkt->cmd.Data + PKT_HEAD_LEN , SADDR_EXT_LEN);
   \   00001D                ; Setup parameters for call to function osal_memcpy
   \   00001D   E5..         MOV     A,?V8
   \   00001F   2422         ADD     A,#0x22
   \   000021   F582         MOV     DPL,A
   \   000023   E4           CLR     A
   \   000024   35..         ADDC    A,?V9
   \   000026   F583         MOV     DPH,A
   \   000028   E0           MOVX    A,@DPTR
   \   000029   2409         ADD     A,#0x9
   \   00002B   F5..         MOV     ?V4,A
   \   00002D   A3           INC     DPTR
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   3400         ADDC    A,#0x0
   \   000031   F5..         MOV     ?V5,A
   \   000033   75..00       MOV     ?V6,#0x0
   \   000036   78..         MOV     R0,#?V4
   \   000038   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00003B   7C08         MOV     R4,#0x8
   \   00003D   7D00         MOV     R5,#0x0
   \   00003F   7403         MOV     A,#0x3
   \   000041   12....       LCALL   ?XSTACK_DISP101_8
   \   000044   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000047   7403         MOV     A,#0x3
   \   000049   12....       LCALL   ?DEALLOC_XSTACK8
   1637          
   1638          	protocol_pack = (transferpkt_t *)osal_msg_allocate( sizeof( transferpkt_t ) + SADDR_EXT_LEN + 1);
   \   00004C                ; Setup parameters for call to function osal_msg_allocate
   \   00004C   7A15         MOV     R2,#0x15
   \   00004E   7B00         MOV     R3,#0x0
   \   000050   12....       LCALL   `??osal_msg_allocate::?relay`; Banked call to: osal_msg_allocate
   \   000053   8A..         MOV     ?V4,R2
   \   000055   8B..         MOV     ?V5,R3
   \   000057   AE..         MOV     R6,?V4
   \   000059   AF..         MOV     R7,?V5
   1639          	protocol_pack->msgid = PROT_JOIN_RSP_MSG;
   \   00005B   8E82         MOV     DPL,R6
   \   00005D   8F83         MOV     DPH,R7
   \   00005F   744B         MOV     A,#0x4b
   \   000061   F0           MOVX    @DPTR,A
   \   000062   A3           INC     DPTR
   \   000063   7430         MOV     A,#0x30
   \   000065   F0           MOVX    @DPTR,A
   1640          	protocol_pack->msgseq = 0x0001;
   \   000066   8E82         MOV     DPL,R6
   \   000068   8F83         MOV     DPH,R7
   \   00006A   A3           INC     DPTR
   \   00006B   A3           INC     DPTR
   \   00006C   7401         MOV     A,#0x1
   \   00006E   F0           MOVX    @DPTR,A
   \   00006F   A3           INC     DPTR
   \   000070   7400         MOV     A,#0x0
   \   000072   F0           MOVX    @DPTR,A
   1641          	protocol_pack->destid = (pkt->cmd.Data[7] << 8) | pkt->cmd.Data[6];
   \   000073   E5..         MOV     A,?V8
   \   000075   2422         ADD     A,#0x22
   \   000077   F582         MOV     DPL,A
   \   000079   E4           CLR     A
   \   00007A   35..         ADDC    A,?V9
   \   00007C   F583         MOV     DPH,A
   \   00007E   E0           MOVX    A,@DPTR
   \   00007F   F8           MOV     R0,A
   \   000080   A3           INC     DPTR
   \   000081   E0           MOVX    A,@DPTR
   \   000082   C8           XCH     A,R0
   \   000083   2407         ADD     A,#0x7
   \   000085   F582         MOV     DPL,A
   \   000087   C8           XCH     A,R0
   \   000088   3400         ADDC    A,#0x0
   \   00008A   F583         MOV     DPH,A
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   FA           MOV     R2,A
   \   00008E   7B00         MOV     R3,#0x0
   \   000090   E4           CLR     A
   \   000091   CA           XCH     A,R2
   \   000092   FB           MOV     R3,A
   \   000093   E5..         MOV     A,?V8
   \   000095   2422         ADD     A,#0x22
   \   000097   F582         MOV     DPL,A
   \   000099   E4           CLR     A
   \   00009A   35..         ADDC    A,?V9
   \   00009C   F583         MOV     DPH,A
   \   00009E   E0           MOVX    A,@DPTR
   \   00009F   F8           MOV     R0,A
   \   0000A0   A3           INC     DPTR
   \   0000A1   E0           MOVX    A,@DPTR
   \   0000A2   C8           XCH     A,R0
   \   0000A3   2406         ADD     A,#0x6
   \   0000A5   F582         MOV     DPL,A
   \   0000A7   C8           XCH     A,R0
   \   0000A8   3400         ADDC    A,#0x0
   \   0000AA   F583         MOV     DPH,A
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   F8           MOV     R0,A
   \   0000AE   7900         MOV     R1,#0x0
   \   0000B0   EA           MOV     A,R2
   \   0000B1   48           ORL     A,R0
   \   0000B2   F8           MOV     R0,A
   \   0000B3   EB           MOV     A,R3
   \   0000B4   49           ORL     A,R1
   \   0000B5   F9           MOV     R1,A
   \   0000B6   8E82         MOV     DPL,R6
   \   0000B8   8F83         MOV     DPH,R7
   \   0000BA   A3           INC     DPTR
   \   0000BB   A3           INC     DPTR
   \   0000BC   A3           INC     DPTR
   \   0000BD   A3           INC     DPTR
   \   0000BE   E8           MOV     A,R0
   \   0000BF   F0           MOVX    @DPTR,A
   \   0000C0   A3           INC     DPTR
   \   0000C1   E9           MOV     A,R1
   \   0000C2   F0           MOVX    @DPTR,A
   1642          	protocol_pack->srcid = NLME_GetShortAddr();
   \   0000C3                ; Setup parameters for call to function NLME_GetShortAddr
   \   0000C3   12....       LCALL   `??NLME_GetShortAddr::?relay`; Banked call to: NLME_GetShortAddr
   \   0000C6   8E82         MOV     DPL,R6
   \   0000C8   8F83         MOV     DPH,R7
   \   0000CA   A3           INC     DPTR
   \   0000CB   A3           INC     DPTR
   \   0000CC   A3           INC     DPTR
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   EA           MOV     A,R2
   \   0000D1   F0           MOVX    @DPTR,A
   \   0000D2   A3           INC     DPTR
   \   0000D3   EB           MOV     A,R3
   \   0000D4   F0           MOVX    @DPTR,A
   1643          	protocol_pack->datalen = SADDR_EXT_LEN;
   \   0000D5   8E82         MOV     DPL,R6
   \   0000D7   8F83         MOV     DPH,R7
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   A3           INC     DPTR
   \   0000DC   A3           INC     DPTR
   \   0000DD   A3           INC     DPTR
   \   0000DE   A3           INC     DPTR
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   7408         MOV     A,#0x8
   \   0000E3   F0           MOVX    @DPTR,A
   1644          
   1645          	if (!Authlist_verify_device(0x0000, extaddr, 0, 0))
   \   0000E4                ; Setup parameters for call to function Authlist_verify_device
   \   0000E4   75..00       MOV     ?V3,#0x0
   \   0000E7   78..         MOV     R0,#?V3
   \   0000E9   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000EC   7900         MOV     R1,#0x0
   \   0000EE   7401         MOV     A,#0x1
   \   0000F0   12....       LCALL   ?XSTACK_DISP102_8
   \   0000F3   7A00         MOV     R2,#0x0
   \   0000F5   7B00         MOV     R3,#0x0
   \   0000F7   12....       LCALL   `??Authlist_verify_device::?relay`; Banked call to: Authlist_verify_device
   \   0000FA   7401         MOV     A,#0x1
   \   0000FC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000FF   E9           MOV     A,R1
   \   000100   700D         JNZ     ??GenericApp_Device_JoinRsp_0
   1646                    osal_memset(extaddr, 0, SADDR_EXT_LEN);
   \   000102                ; Setup parameters for call to function osal_memset
   \   000102   7C08         MOV     R4,#0x8
   \   000104   7D00         MOV     R5,#0x0
   \   000106   7900         MOV     R1,#0x0
   \   000108   AA..         MOV     R2,?XSP + 0
   \   00010A   AB..         MOV     R3,?XSP + 1
   \   00010C   12....       LCALL   `??osal_memset::?relay`; Banked call to: osal_memset
   1647          
   1648          	protocol_pack->data = (uint8 *)(protocol_pack + 1);
   \                     ??GenericApp_Device_JoinRsp_0:
   \   00010F   EE           MOV     A,R6
   \   000110   240C         ADD     A,#0xc
   \   000112   F8           MOV     R0,A
   \   000113   E4           CLR     A
   \   000114   3F           ADDC    A,R7
   \   000115   F9           MOV     R1,A
   \   000116   8E82         MOV     DPL,R6
   \   000118   8F83         MOV     DPH,R7
   \   00011A   A3           INC     DPTR
   \   00011B   A3           INC     DPTR
   \   00011C   A3           INC     DPTR
   \   00011D   A3           INC     DPTR
   \   00011E   A3           INC     DPTR
   \   00011F   A3           INC     DPTR
   \   000120   A3           INC     DPTR
   \   000121   A3           INC     DPTR
   \   000122   A3           INC     DPTR
   \   000123   E8           MOV     A,R0
   \   000124   F0           MOVX    @DPTR,A
   \   000125   A3           INC     DPTR
   \   000126   E9           MOV     A,R1
   \   000127   F0           MOVX    @DPTR,A
   1649          	osal_memcpy(protocol_pack->data, extaddr, SADDR_EXT_LEN);
   \   000128                ; Setup parameters for call to function osal_memcpy
   \   000128   A8..         MOV     R0,?XSP + 0
   \   00012A   A9..         MOV     R1,?XSP + 1
   \   00012C   88..         MOV     ?V4,R0
   \   00012E   89..         MOV     ?V5,R1
   \   000130   75..00       MOV     ?V6,#0x0
   \   000133   78..         MOV     R0,#?V4
   \   000135   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000138   7C08         MOV     R4,#0x8
   \   00013A   7D00         MOV     R5,#0x0
   \   00013C   8E82         MOV     DPL,R6
   \   00013E   8F83         MOV     DPH,R7
   \   000140   A3           INC     DPTR
   \   000141   A3           INC     DPTR
   \   000142   A3           INC     DPTR
   \   000143   A3           INC     DPTR
   \   000144   A3           INC     DPTR
   \   000145   A3           INC     DPTR
   \   000146   A3           INC     DPTR
   \   000147   A3           INC     DPTR
   \   000148   A3           INC     DPTR
   \   000149   E0           MOVX    A,@DPTR
   \   00014A   FA           MOV     R2,A
   \   00014B   A3           INC     DPTR
   \   00014C   E0           MOVX    A,@DPTR
   \   00014D   FB           MOV     R3,A
   \   00014E   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000151   7403         MOV     A,#0x3
   \   000153   12....       LCALL   ?DEALLOC_XSTACK8
   1650          	osal_memcpy( buf, (uint8 *)protocol_pack, PKT_HEAD_LEN );
   \   000156                ; Setup parameters for call to function osal_memcpy
   \   000156   8E..         MOV     ?V4,R6
   \   000158   8F..         MOV     ?V5,R7
   \   00015A   75..00       MOV     ?V6,#0x0
   \   00015D   78..         MOV     R0,#?V4
   \   00015F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000162   7C09         MOV     R4,#0x9
   \   000164   7D00         MOV     R5,#0x0
   \   000166   740B         MOV     A,#0xb
   \   000168   12....       LCALL   ?XSTACK_DISP101_8
   \   00016B   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00016E   7403         MOV     A,#0x3
   \   000170   12....       LCALL   ?DEALLOC_XSTACK8
   1651          	osal_memcpy(&buf[PKT_HEAD_LEN], protocol_pack->data, protocol_pack->datalen);
   \   000173                ; Setup parameters for call to function osal_memcpy
   \   000173   8E82         MOV     DPL,R6
   \   000175   8F83         MOV     DPH,R7
   \   000177   A3           INC     DPTR
   \   000178   A3           INC     DPTR
   \   000179   A3           INC     DPTR
   \   00017A   A3           INC     DPTR
   \   00017B   A3           INC     DPTR
   \   00017C   A3           INC     DPTR
   \   00017D   A3           INC     DPTR
   \   00017E   A3           INC     DPTR
   \   00017F   A3           INC     DPTR
   \   000180   E0           MOVX    A,@DPTR
   \   000181   F5..         MOV     ?V4,A
   \   000183   A3           INC     DPTR
   \   000184   E0           MOVX    A,@DPTR
   \   000185   F5..         MOV     ?V5,A
   \   000187   75..00       MOV     ?V6,#0x0
   \   00018A   78..         MOV     R0,#?V4
   \   00018C   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00018F   8E82         MOV     DPL,R6
   \   000191   8F83         MOV     DPH,R7
   \   000193   A3           INC     DPTR
   \   000194   A3           INC     DPTR
   \   000195   A3           INC     DPTR
   \   000196   A3           INC     DPTR
   \   000197   A3           INC     DPTR
   \   000198   A3           INC     DPTR
   \   000199   A3           INC     DPTR
   \   00019A   A3           INC     DPTR
   \   00019B   E0           MOVX    A,@DPTR
   \   00019C   FC           MOV     R4,A
   \   00019D   7D00         MOV     R5,#0x0
   \   00019F   7414         MOV     A,#0x14
   \   0001A1   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A4   AA82         MOV     R2,DPL
   \   0001A6   AB83         MOV     R3,DPH
   \   0001A8   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0001AB   7403         MOV     A,#0x3
   \   0001AD   12....       LCALL   ?DEALLOC_XSTACK8
   1652          	protocol_pack->fcs = MT_UartCalcFCS( buf, PKT_HEAD_LEN + protocol_pack->datalen );
   \   0001B0                ; Setup parameters for call to function MT_UartCalcFCS
   \   0001B0   8E82         MOV     DPL,R6
   \   0001B2   8F83         MOV     DPH,R7
   \   0001B4   A3           INC     DPTR
   \   0001B5   A3           INC     DPTR
   \   0001B6   A3           INC     DPTR
   \   0001B7   A3           INC     DPTR
   \   0001B8   A3           INC     DPTR
   \   0001B9   A3           INC     DPTR
   \   0001BA   A3           INC     DPTR
   \   0001BB   A3           INC     DPTR
   \   0001BC   E0           MOVX    A,@DPTR
   \   0001BD   2409         ADD     A,#0x9
   \   0001BF   F9           MOV     R1,A
   \   0001C0   7408         MOV     A,#0x8
   \   0001C2   12....       LCALL   ?XSTACK_DISP101_8
   \   0001C5   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   0001C8   E9           MOV     A,R1
   \   0001C9   C0E0         PUSH    A
   \   0001CB   EE           MOV     A,R6
   \   0001CC   240B         ADD     A,#0xb
   \   0001CE   F582         MOV     DPL,A
   \   0001D0   E4           CLR     A
   \   0001D1   3F           ADDC    A,R7
   \   0001D2   F583         MOV     DPH,A
   \   0001D4   D0E0         POP     A
   \   0001D6   F0           MOVX    @DPTR,A
   1653          	buf[PKT_HEAD_LEN + protocol_pack->datalen] = protocol_pack->fcs;
   \   0001D7   EE           MOV     A,R6
   \   0001D8   240B         ADD     A,#0xb
   \   0001DA   F582         MOV     DPL,A
   \   0001DC   E4           CLR     A
   \   0001DD   3F           ADDC    A,R7
   \   0001DE   F583         MOV     DPH,A
   \   0001E0   E0           MOVX    A,@DPTR
   \   0001E1   C0E0         PUSH    A
   \   0001E3   8E82         MOV     DPL,R6
   \   0001E5   8F83         MOV     DPH,R7
   \   0001E7   A3           INC     DPTR
   \   0001E8   A3           INC     DPTR
   \   0001E9   A3           INC     DPTR
   \   0001EA   A3           INC     DPTR
   \   0001EB   A3           INC     DPTR
   \   0001EC   A3           INC     DPTR
   \   0001ED   A3           INC     DPTR
   \   0001EE   A3           INC     DPTR
   \   0001EF   E0           MOVX    A,@DPTR
   \   0001F0   F8           MOV     R0,A
   \   0001F1   7900         MOV     R1,#0x0
   \   0001F3   7408         MOV     A,#0x8
   \   0001F5   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F8   E582         MOV     A,DPL
   \   0001FA   28           ADD     A,R0
   \   0001FB   F582         MOV     DPL,A
   \   0001FD   E583         MOV     A,DPH
   \   0001FF   39           ADDC    A,R1
   \   000200   F583         MOV     DPH,A
   \   000202   A3           INC     DPTR
   \   000203   A3           INC     DPTR
   \   000204   A3           INC     DPTR
   \   000205   A3           INC     DPTR
   \   000206   A3           INC     DPTR
   \   000207   A3           INC     DPTR
   \   000208   A3           INC     DPTR
   \   000209   A3           INC     DPTR
   \   00020A   A3           INC     DPTR
   \   00020B   D0E0         POP     A
   \   00020D   F0           MOVX    @DPTR,A
   1654          	clusterid = GENERICAPP_P2P_PERMIT_JOIN_RSP_CLUSTERID;
   \   00020E   75..07       MOV     ?V0,#0x7
   \   000211   75..00       MOV     ?V1,#0x0
   1655          	SerialApp_TxAddr_p2p.addr.shortAddr = protocol_pack->destid;
   \   000214   8E82         MOV     DPL,R6
   \   000216   8F83         MOV     DPH,R7
   \   000218   A3           INC     DPTR
   \   000219   A3           INC     DPTR
   \   00021A   A3           INC     DPTR
   \   00021B   A3           INC     DPTR
   \   00021C   E0           MOVX    A,@DPTR
   \   00021D   F8           MOV     R0,A
   \   00021E   A3           INC     DPTR
   \   00021F   E0           MOVX    A,@DPTR
   \   000220   F9           MOV     R1,A
   \   000221   90....       MOV     DPTR,#SerialApp_TxAddr_p2p
   \   000224   E8           MOV     A,R0
   \   000225   F0           MOVX    @DPTR,A
   \   000226   A3           INC     DPTR
   \   000227   E9           MOV     A,R1
   \   000228   F0           MOVX    @DPTR,A
   1656          
   1657          	if ( AF_DataRequest( &SerialApp_TxAddr_p2p, &GenericApp_epDesc,
   1658          						clusterid,
   1659          						PKT_HEAD_LEN + SADDR_EXT_LEN + 1,
   1660          						buf, //(uint8 *)protocol_pack,
   1661          						&GenericApp_TransID,
   1662          						AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000229                ; Setup parameters for call to function AF_DataRequest
   \   000229   75..1E       MOV     ?V3,#0x1e
   \   00022C   78..         MOV     R0,#?V3
   \   00022E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000231   75....       MOV     ?V4,#GenericApp_TransID & 0xff
   \   000234   75....       MOV     ?V5,#(GenericApp_TransID >> 8) & 0xff
   \   000237   78..         MOV     R0,#?V4
   \   000239   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00023C   740B         MOV     A,#0xb
   \   00023E   12....       LCALL   ?XSTACK_DISP100_8
   \   000241   88..         MOV     ?V4,R0
   \   000243   89..         MOV     ?V5,R1
   \   000245   78..         MOV     R0,#?V4
   \   000247   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00024A   75..12       MOV     ?V4,#0x12
   \   00024D   75..00       MOV     ?V5,#0x0
   \   000250   78..         MOV     R0,#?V4
   \   000252   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000255   78..         MOV     R0,#?V0
   \   000257   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00025A   7900         MOV     R1,#0x0
   \   00025C   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   00025E   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   000260   7A..         MOV     R2,#SerialApp_TxAddr_p2p & 0xff
   \   000262   7B..         MOV     R3,#(SerialApp_TxAddr_p2p >> 8) & 0xff
   \   000264   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   000267   7409         MOV     A,#0x9
   \   000269   12....       LCALL   ?DEALLOC_XSTACK8
   \   00026C   E9           MOV     A,R1
   \   00026D   7005         JNZ     ??GenericApp_Device_JoinRsp_1
   1663          	{
   1664          		ret = TRUE;
   \   00026F   75..01       MOV     ?V2,#0x1
   \   000272   8003         SJMP    ??GenericApp_Device_JoinRsp_2
   1665          	}
   1666          	else
   1667          	{
   1668          		ret = FALSE;
   \                     ??GenericApp_Device_JoinRsp_1:
   \   000274   75..00       MOV     ?V2,#0x0
   1669          	}
   1670          	osal_msg_deallocate( (uint8 *)protocol_pack );
   \                     ??GenericApp_Device_JoinRsp_2:
   \   000277                ; Setup parameters for call to function osal_msg_deallocate
   \   000277   EE           MOV     A,R6
   \   000278   FA           MOV     R2,A
   \   000279   EF           MOV     A,R7
   \   00027A   FB           MOV     R3,A
   \   00027B   12....       LCALL   `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \   00027E   E9           MOV     A,R1
   1671          	return ret;
   \   00027F   A9..         MOV     R1,?V2
   \   000281   746C         MOV     A,#0x6c
   \   000283   12....       LCALL   ?DEALLOC_XSTACK8
   \   000286   7F0A         MOV     R7,#0xa
   \   000288   02....       LJMP    ?BANKED_LEAVE_XDATA
   1672          }
   1673          
   1674          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1675          void GenericApp_Get_PermitJoin(afIncomingMSGPacket_t *pkt)
   \                     GenericApp_Get_PermitJoin:
   1676          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V8
   \   000000                REQUIRE ?V9
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V8,R2
   \   00000C   8B..         MOV     ?V9,R3
   1677          	uint8 extaddr[SADDR_EXT_LEN];
   1678          	ZDO_Permit_Join_Device_t *tmp_join_device = NULL;
   \   00000E   7E00         MOV     R6,#0x0
   \   000010   7F00         MOV     R7,#0x0
   1679          	ZDO_Permit_Join_Device_t *new_join_device = NULL;
   \   000012   75..00       MOV     ?V0,#0x0
   \   000015   75..00       MOV     ?V1,#0x0
   1680          	uint8 device_cnt = 0;
   \   000018   75..00       MOV     ?V2,#0x0
   1681          	static uint8 device_index = 0;
   1682          
   1683          	osal_memcpy(extaddr, pkt->cmd.Data + PKT_HEAD_LEN, SADDR_EXT_LEN);
   \   00001B                ; Setup parameters for call to function osal_memcpy
   \   00001B   E5..         MOV     A,?V8
   \   00001D   2422         ADD     A,#0x22
   \   00001F   F582         MOV     DPL,A
   \   000021   E4           CLR     A
   \   000022   35..         ADDC    A,?V9
   \   000024   F583         MOV     DPH,A
   \   000026   E0           MOVX    A,@DPTR
   \   000027   2409         ADD     A,#0x9
   \   000029   F5..         MOV     ?V4,A
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   3400         ADDC    A,#0x0
   \   00002F   F5..         MOV     ?V5,A
   \   000031   75..00       MOV     ?V6,#0x0
   \   000034   78..         MOV     R0,#?V4
   \   000036   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000039   7C08         MOV     R4,#0x8
   \   00003B   7D00         MOV     R5,#0x0
   \   00003D   7403         MOV     A,#0x3
   \   00003F   12....       LCALL   ?XSTACK_DISP101_8
   \   000042   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000045   7403         MOV     A,#0x3
   \   000047   12....       LCALL   ?DEALLOC_XSTACK8
   1684           
   1685          	tmp_join_device = zdo_join_device;
   \   00004A   90....       MOV     DPTR,#zdo_join_device
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   F8           MOV     R0,A
   \   00004F   A3           INC     DPTR
   \   000050   E0           MOVX    A,@DPTR
   \   000051   F9           MOV     R1,A
   \   000052   E8           MOV     A,R0
   \   000053   FE           MOV     R6,A
   \   000054   E9           MOV     A,R1
   \   000055   FF           MOV     R7,A
   1686          	while (tmp_join_device)
   \                     ??GenericApp_Get_PermitJoin_0:
   \   000056   EE           MOV     A,R6
   \   000057   4F           ORL     A,R7
   \   000058   603F         JZ      ??GenericApp_Get_PermitJoin_1
   1687          	{
   1688          		if (osal_memcmp(tmp_join_device->permit_device.extaddr, extaddr, SADDR_EXT_LEN))
   \   00005A                ; Setup parameters for call to function osal_memcmp
   \   00005A   A8..         MOV     R0,?XSP + 0
   \   00005C   A9..         MOV     R1,?XSP + 1
   \   00005E   88..         MOV     ?V4,R0
   \   000060   89..         MOV     ?V5,R1
   \   000062   75..00       MOV     ?V6,#0x0
   \   000065   78..         MOV     R0,#?V4
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00006A   7C08         MOV     R4,#0x8
   \   00006C   7D00         MOV     R5,#0x0
   \   00006E   8E82         MOV     DPL,R6
   \   000070   8F83         MOV     DPH,R7
   \   000072   A982         MOV     R1,DPL
   \   000074   AA83         MOV     R2,DPH
   \   000076   7B00         MOV     R3,#0x0
   \   000078   12....       LCALL   `??osal_memcmp::?relay`; Banked call to: osal_memcmp
   \   00007B   7403         MOV     A,#0x3
   \   00007D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000080   E9           MOV     A,R1
   \   000081   6003         JZ      $+5
   \   000083   02....       LJMP    ??GenericApp_Get_PermitJoin_2 & 0xFFFF
   1689          		{
   1690          			return;
   1691          		}
   1692          		tmp_join_device = tmp_join_device->next;
   \   000086   8E82         MOV     DPL,R6
   \   000088   8F83         MOV     DPH,R7
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   A3           INC     DPTR
   \   000090   A3           INC     DPTR
   \   000091   A3           INC     DPTR
   \   000092   E0           MOVX    A,@DPTR
   \   000093   FE           MOV     R6,A
   \   000094   A3           INC     DPTR
   \   000095   E0           MOVX    A,@DPTR
   \   000096   FF           MOV     R7,A
   \   000097   80BD         SJMP    ??GenericApp_Get_PermitJoin_0
   1693          	}
   1694          	// Calculate permit device count
   1695          	tmp_join_device = zdo_join_device;
   \                     ??GenericApp_Get_PermitJoin_1:
   \   000099   90....       MOV     DPTR,#zdo_join_device
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   F8           MOV     R0,A
   \   00009E   A3           INC     DPTR
   \   00009F   E0           MOVX    A,@DPTR
   \   0000A0   F9           MOV     R1,A
   \   0000A1   E8           MOV     A,R0
   \   0000A2   FE           MOV     R6,A
   \   0000A3   E9           MOV     A,R1
   \   0000A4   FF           MOV     R7,A
   1696          	if (tmp_join_device)
   \   0000A5   EE           MOV     A,R6
   \   0000A6   4F           ORL     A,R7
   \   0000A7   602D         JZ      ??GenericApp_Get_PermitJoin_3
   1697          	{
   1698          		device_cnt = 1;
   \   0000A9   75..01       MOV     ?V2,#0x1
   1699          		while (tmp_join_device->next)
   \                     ??GenericApp_Get_PermitJoin_4:
   \   0000AC   8E82         MOV     DPL,R6
   \   0000AE   8F83         MOV     DPH,R7
   \   0000B0   A3           INC     DPTR
   \   0000B1   A3           INC     DPTR
   \   0000B2   A3           INC     DPTR
   \   0000B3   A3           INC     DPTR
   \   0000B4   A3           INC     DPTR
   \   0000B5   A3           INC     DPTR
   \   0000B6   A3           INC     DPTR
   \   0000B7   A3           INC     DPTR
   \   0000B8   E0           MOVX    A,@DPTR
   \   0000B9   F8           MOV     R0,A
   \   0000BA   A3           INC     DPTR
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F9           MOV     R1,A
   \   0000BD   E8           MOV     A,R0
   \   0000BE   49           ORL     A,R1
   \   0000BF   6015         JZ      ??GenericApp_Get_PermitJoin_3
   1700          		{
   1701          			device_cnt++;
   \   0000C1   05..         INC     ?V2
   1702          			tmp_join_device = tmp_join_device->next;
   \   0000C3   8E82         MOV     DPL,R6
   \   0000C5   8F83         MOV     DPH,R7
   \   0000C7   A3           INC     DPTR
   \   0000C8   A3           INC     DPTR
   \   0000C9   A3           INC     DPTR
   \   0000CA   A3           INC     DPTR
   \   0000CB   A3           INC     DPTR
   \   0000CC   A3           INC     DPTR
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   E0           MOVX    A,@DPTR
   \   0000D0   FE           MOV     R6,A
   \   0000D1   A3           INC     DPTR
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   FF           MOV     R7,A
   \   0000D4   80D6         SJMP    ??GenericApp_Get_PermitJoin_4
   1703          		}
   1704          	}
   1705          	if (device_cnt < MAX_JOIN_DEVICE_CNT)
   \                     ??GenericApp_Get_PermitJoin_3:
   \   0000D6   E5..         MOV     A,?V2
   \   0000D8   C3           CLR     C
   \   0000D9   940A         SUBB    A,#0xa
   \   0000DB   506D         JNC     ??GenericApp_Get_PermitJoin_5
   1706          	{
   1707          		new_join_device = (ZDO_Permit_Join_Device_t *) osal_mem_alloc(sizeof(ZDO_Permit_Join_Device_t));
   \   0000DD                ; Setup parameters for call to function osal_mem_alloc
   \   0000DD   7A0A         MOV     R2,#0xa
   \   0000DF   7B00         MOV     R3,#0x0
   \   0000E1   12....       LCALL   `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   0000E4   8A..         MOV     ?V4,R2
   \   0000E6   8B..         MOV     ?V5,R3
   \   0000E8   85....       MOV     ?V0,?V4
   \   0000EB   85....       MOV     ?V1,?V5
   1708          		osal_memcpy(new_join_device->permit_device.extaddr, extaddr, SADDR_EXT_LEN);
   \   0000EE                ; Setup parameters for call to function osal_memcpy
   \   0000EE   A8..         MOV     R0,?XSP + 0
   \   0000F0   A9..         MOV     R1,?XSP + 1
   \   0000F2   88..         MOV     ?V4,R0
   \   0000F4   89..         MOV     ?V5,R1
   \   0000F6   75..00       MOV     ?V6,#0x0
   \   0000F9   78..         MOV     R0,#?V4
   \   0000FB   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000FE   7C08         MOV     R4,#0x8
   \   000100   7D00         MOV     R5,#0x0
   \   000102   AA..         MOV     R2,?V0
   \   000104   AB..         MOV     R3,?V1
   \   000106   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000109   7403         MOV     A,#0x3
   \   00010B   12....       LCALL   ?DEALLOC_XSTACK8
   1709          		new_join_device->next = NULL;
   \   00010E   85..82       MOV     DPL,?V0
   \   000111   85..83       MOV     DPH,?V1
   \   000114   A3           INC     DPTR
   \   000115   A3           INC     DPTR
   \   000116   A3           INC     DPTR
   \   000117   A3           INC     DPTR
   \   000118   A3           INC     DPTR
   \   000119   A3           INC     DPTR
   \   00011A   A3           INC     DPTR
   \   00011B   A3           INC     DPTR
   \   00011C   7400         MOV     A,#0x0
   \   00011E   F0           MOVX    @DPTR,A
   \   00011F   A3           INC     DPTR
   \   000120   7400         MOV     A,#0x0
   \   000122   F0           MOVX    @DPTR,A
   1710          		if (tmp_join_device)
   \   000123   EE           MOV     A,R6
   \   000124   4F           ORL     A,R7
   \   000125   6015         JZ      ??GenericApp_Get_PermitJoin_6
   1711          		{
   1712          			tmp_join_device->next = new_join_device;
   \   000127   8E82         MOV     DPL,R6
   \   000129   8F83         MOV     DPH,R7
   \   00012B   A3           INC     DPTR
   \   00012C   A3           INC     DPTR
   \   00012D   A3           INC     DPTR
   \   00012E   A3           INC     DPTR
   \   00012F   A3           INC     DPTR
   \   000130   A3           INC     DPTR
   \   000131   A3           INC     DPTR
   \   000132   A3           INC     DPTR
   \   000133   E5..         MOV     A,?V0
   \   000135   F0           MOVX    @DPTR,A
   \   000136   A3           INC     DPTR
   \   000137   E5..         MOV     A,?V1
   \   000139   F0           MOVX    @DPTR,A
   \   00013A   800A         SJMP    ??GenericApp_Get_PermitJoin_7
   1713          		}
   1714          		else
   1715          		{
   1716          			zdo_join_device = new_join_device;
   \                     ??GenericApp_Get_PermitJoin_6:
   \   00013C   90....       MOV     DPTR,#zdo_join_device
   \   00013F   E5..         MOV     A,?V0
   \   000141   F0           MOVX    @DPTR,A
   \   000142   A3           INC     DPTR
   \   000143   E5..         MOV     A,?V1
   \   000145   F0           MOVX    @DPTR,A
   1717          		}
   1718          		device_cnt++;
   \                     ??GenericApp_Get_PermitJoin_7:
   \   000146   05..         INC     ?V2
   \   000148   8062         SJMP    ??GenericApp_Get_PermitJoin_2
   1719          	}
   1720          	else
   1721          	{
   1722          		tmp_join_device = zdo_join_device;
   \                     ??GenericApp_Get_PermitJoin_5:
   \   00014A   90....       MOV     DPTR,#zdo_join_device
   \   00014D   E0           MOVX    A,@DPTR
   \   00014E   F8           MOV     R0,A
   \   00014F   A3           INC     DPTR
   \   000150   E0           MOVX    A,@DPTR
   \   000151   F9           MOV     R1,A
   \   000152   E8           MOV     A,R0
   \   000153   FE           MOV     R6,A
   \   000154   E9           MOV     A,R1
   \   000155   FF           MOV     R7,A
   1723          		for (uint8 i = 0; i < device_index; i++)
   \   000156   7800         MOV     R0,#0x0
   \                     ??GenericApp_Get_PermitJoin_8:
   \   000158   90....       MOV     DPTR,#??device_index
   \   00015B   E0           MOVX    A,@DPTR
   \   00015C   F9           MOV     R1,A
   \   00015D   E8           MOV     A,R0
   \   00015E   C3           CLR     C
   \   00015F   99           SUBB    A,R1
   \   000160   5014         JNC     ??GenericApp_Get_PermitJoin_9
   1724          		{
   1725          			tmp_join_device = tmp_join_device->next;
   \   000162   8E82         MOV     DPL,R6
   \   000164   8F83         MOV     DPH,R7
   \   000166   A3           INC     DPTR
   \   000167   A3           INC     DPTR
   \   000168   A3           INC     DPTR
   \   000169   A3           INC     DPTR
   \   00016A   A3           INC     DPTR
   \   00016B   A3           INC     DPTR
   \   00016C   A3           INC     DPTR
   \   00016D   A3           INC     DPTR
   \   00016E   E0           MOVX    A,@DPTR
   \   00016F   FE           MOV     R6,A
   \   000170   A3           INC     DPTR
   \   000171   E0           MOVX    A,@DPTR
   \   000172   FF           MOV     R7,A
   1726          		}
   \   000173   08           INC     R0
   \   000174   80E2         SJMP    ??GenericApp_Get_PermitJoin_8
   1727          		osal_memcpy(tmp_join_device->permit_device.extaddr, extaddr, SADDR_EXT_LEN);
   \                     ??GenericApp_Get_PermitJoin_9:
   \   000176                ; Setup parameters for call to function osal_memcpy
   \   000176   A8..         MOV     R0,?XSP + 0
   \   000178   A9..         MOV     R1,?XSP + 1
   \   00017A   88..         MOV     ?V4,R0
   \   00017C   89..         MOV     ?V5,R1
   \   00017E   75..00       MOV     ?V6,#0x0
   \   000181   78..         MOV     R0,#?V4
   \   000183   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000186   7C08         MOV     R4,#0x8
   \   000188   7D00         MOV     R5,#0x0
   \   00018A   EE           MOV     A,R6
   \   00018B   FA           MOV     R2,A
   \   00018C   EF           MOV     A,R7
   \   00018D   FB           MOV     R3,A
   \   00018E   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000191   7403         MOV     A,#0x3
   \   000193   12....       LCALL   ?DEALLOC_XSTACK8
   1728          		if (++device_index >= MAX_JOIN_DEVICE_CNT)
   \   000196   90....       MOV     DPTR,#??device_index
   \   000199   E0           MOVX    A,@DPTR
   \   00019A   2401         ADD     A,#0x1
   \   00019C   F0           MOVX    @DPTR,A
   \   00019D   90....       MOV     DPTR,#??device_index
   \   0001A0   E0           MOVX    A,@DPTR
   \   0001A1   C3           CLR     C
   \   0001A2   940A         SUBB    A,#0xa
   \   0001A4   4006         JC      ??GenericApp_Get_PermitJoin_2
   1729          		{
   1730          			device_index = 0;
   \   0001A6   90....       MOV     DPTR,#??device_index
   \   0001A9   7400         MOV     A,#0x0
   \   0001AB   F0           MOVX    @DPTR,A
   1731          		}
   1732          	}
   1733          	
   1734          }
   \                     ??GenericApp_Get_PermitJoin_2:
   \   0001AC   7408         MOV     A,#0x8
   \   0001AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B1   7F0A         MOV     R7,#0xa
   \   0001B3   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??device_index:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
   1735          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1736          bool GenericApp_Device_JoinReq(void)
   \                     GenericApp_Device_JoinReq:
   1737          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 200
   \   000005   7438         MOV     A,#0x38
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1738          	transferpkt_t *protocol_pack;
   1739          	uint16 clusterid;
   1740          	uint8 buf[200];
   1741          	bool ret = FALSE;
   \   00000A   75..00       MOV     ?V0,#0x0
   1742          
   1743          	protocol_pack = (transferpkt_t *)osal_msg_allocate( sizeof( transferpkt_t ) + SADDR_EXT_LEN + 1);
   \   00000D                ; Setup parameters for call to function osal_msg_allocate
   \   00000D   7A15         MOV     R2,#0x15
   \   00000F   7B00         MOV     R3,#0x0
   \   000011   12....       LCALL   `??osal_msg_allocate::?relay`; Banked call to: osal_msg_allocate
   \   000014   8A..         MOV     ?V4,R2
   \   000016   8B..         MOV     ?V5,R3
   \   000018   AE..         MOV     R6,?V4
   \   00001A   AF..         MOV     R7,?V5
   1744          	if ( protocol_pack == NULL )
   \   00001C   EE           MOV     A,R6
   \   00001D   4F           ORL     A,R7
   \   00001E   7005         JNZ     ??GenericApp_Device_JoinReq_0
   1745          	{
   1746          		return ZFailure;
   \   000020   7901         MOV     R1,#0x1
   \   000022   02....       LJMP    ??GenericApp_Device_JoinReq_1 & 0xFFFF
   1747          	}
   1748          
   1749          	protocol_pack->msgid = PROT_JOIN_REQ_MSG;
   \                     ??GenericApp_Device_JoinReq_0:
   \   000025   8E82         MOV     DPL,R6
   \   000027   8F83         MOV     DPH,R7
   \   000029   744A         MOV     A,#0x4a
   \   00002B   F0           MOVX    @DPTR,A
   \   00002C   A3           INC     DPTR
   \   00002D   7430         MOV     A,#0x30
   \   00002F   F0           MOVX    @DPTR,A
   1750          	protocol_pack->msgseq = 0x0001;
   \   000030   8E82         MOV     DPL,R6
   \   000032   8F83         MOV     DPH,R7
   \   000034   A3           INC     DPTR
   \   000035   A3           INC     DPTR
   \   000036   7401         MOV     A,#0x1
   \   000038   F0           MOVX    @DPTR,A
   \   000039   A3           INC     DPTR
   \   00003A   7400         MOV     A,#0x0
   \   00003C   F0           MOVX    @DPTR,A
   1751          	protocol_pack->destid = 0x0000;
   \   00003D   8E82         MOV     DPL,R6
   \   00003F   8F83         MOV     DPH,R7
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   7400         MOV     A,#0x0
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   7400         MOV     A,#0x0
   \   00004B   F0           MOVX    @DPTR,A
   1752          	protocol_pack->srcid = NLME_GetShortAddr();
   \   00004C                ; Setup parameters for call to function NLME_GetShortAddr
   \   00004C   12....       LCALL   `??NLME_GetShortAddr::?relay`; Banked call to: NLME_GetShortAddr
   \   00004F   8E82         MOV     DPL,R6
   \   000051   8F83         MOV     DPH,R7
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   EA           MOV     A,R2
   \   00005A   F0           MOVX    @DPTR,A
   \   00005B   A3           INC     DPTR
   \   00005C   EB           MOV     A,R3
   \   00005D   F0           MOVX    @DPTR,A
   1753          	protocol_pack->datalen = SADDR_EXT_LEN;
   \   00005E   8E82         MOV     DPL,R6
   \   000060   8F83         MOV     DPH,R7
   \   000062   A3           INC     DPTR
   \   000063   A3           INC     DPTR
   \   000064   A3           INC     DPTR
   \   000065   A3           INC     DPTR
   \   000066   A3           INC     DPTR
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   A3           INC     DPTR
   \   00006A   7408         MOV     A,#0x8
   \   00006C   F0           MOVX    @DPTR,A
   1754          
   1755          	protocol_pack->data = (uint8 *)(protocol_pack + 1);
   \   00006D   EE           MOV     A,R6
   \   00006E   240C         ADD     A,#0xc
   \   000070   F8           MOV     R0,A
   \   000071   E4           CLR     A
   \   000072   3F           ADDC    A,R7
   \   000073   F9           MOV     R1,A
   \   000074   8E82         MOV     DPL,R6
   \   000076   8F83         MOV     DPH,R7
   \   000078   A3           INC     DPTR
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   A3           INC     DPTR
   \   000081   E8           MOV     A,R0
   \   000082   F0           MOVX    @DPTR,A
   \   000083   A3           INC     DPTR
   \   000084   E9           MOV     A,R1
   \   000085   F0           MOVX    @DPTR,A
   1756          	osal_memcpy(protocol_pack->data, join_device_extaddr, SADDR_EXT_LEN);
   \   000086                ; Setup parameters for call to function osal_memcpy
   \   000086   75....       MOV     ?V4,#join_device_extaddr & 0xff
   \   000089   75....       MOV     ?V5,#(join_device_extaddr >> 8) & 0xff
   \   00008C   75..00       MOV     ?V6,#0x0
   \   00008F   78..         MOV     R0,#?V4
   \   000091   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000094   7C08         MOV     R4,#0x8
   \   000096   7D00         MOV     R5,#0x0
   \   000098   8E82         MOV     DPL,R6
   \   00009A   8F83         MOV     DPH,R7
   \   00009C   A3           INC     DPTR
   \   00009D   A3           INC     DPTR
   \   00009E   A3           INC     DPTR
   \   00009F   A3           INC     DPTR
   \   0000A0   A3           INC     DPTR
   \   0000A1   A3           INC     DPTR
   \   0000A2   A3           INC     DPTR
   \   0000A3   A3           INC     DPTR
   \   0000A4   A3           INC     DPTR
   \   0000A5   E0           MOVX    A,@DPTR
   \   0000A6   FA           MOV     R2,A
   \   0000A7   A3           INC     DPTR
   \   0000A8   E0           MOVX    A,@DPTR
   \   0000A9   FB           MOV     R3,A
   \   0000AA   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0000AD   7403         MOV     A,#0x3
   \   0000AF   12....       LCALL   ?DEALLOC_XSTACK8
   1757          	//+msg id 2B+msg_seq2B+len byte+ dest_id 2B+src_id 2B
   1758          	osal_memcpy( buf, (uint8 *)protocol_pack, PKT_HEAD_LEN );
   \   0000B2                ; Setup parameters for call to function osal_memcpy
   \   0000B2   8E..         MOV     ?V4,R6
   \   0000B4   8F..         MOV     ?V5,R7
   \   0000B6   75..00       MOV     ?V6,#0x0
   \   0000B9   78..         MOV     R0,#?V4
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000BE   7C09         MOV     R4,#0x9
   \   0000C0   7D00         MOV     R5,#0x0
   \   0000C2   7403         MOV     A,#0x3
   \   0000C4   12....       LCALL   ?XSTACK_DISP101_8
   \   0000C7   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0000CA   7403         MOV     A,#0x3
   \   0000CC   12....       LCALL   ?DEALLOC_XSTACK8
   1759          	osal_memcpy(&buf[PKT_HEAD_LEN], protocol_pack->data, SADDR_EXT_LEN);
   \   0000CF                ; Setup parameters for call to function osal_memcpy
   \   0000CF   8E82         MOV     DPL,R6
   \   0000D1   8F83         MOV     DPH,R7
   \   0000D3   A3           INC     DPTR
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   A3           INC     DPTR
   \   0000D7   A3           INC     DPTR
   \   0000D8   A3           INC     DPTR
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   A3           INC     DPTR
   \   0000DC   E0           MOVX    A,@DPTR
   \   0000DD   F5..         MOV     ?V4,A
   \   0000DF   A3           INC     DPTR
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   F5..         MOV     ?V5,A
   \   0000E3   75..00       MOV     ?V6,#0x0
   \   0000E6   78..         MOV     R0,#?V4
   \   0000E8   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000EB   7C08         MOV     R4,#0x8
   \   0000ED   7D00         MOV     R5,#0x0
   \   0000EF   740C         MOV     A,#0xc
   \   0000F1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F4   AA82         MOV     R2,DPL
   \   0000F6   AB83         MOV     R3,DPH
   \   0000F8   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0000FB   7403         MOV     A,#0x3
   \   0000FD   12....       LCALL   ?DEALLOC_XSTACK8
   1760          	protocol_pack->fcs = MT_UartCalcFCS( buf, PKT_HEAD_LEN + protocol_pack->datalen );
   \   000100                ; Setup parameters for call to function MT_UartCalcFCS
   \   000100   8E82         MOV     DPL,R6
   \   000102   8F83         MOV     DPH,R7
   \   000104   A3           INC     DPTR
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   A3           INC     DPTR
   \   000108   A3           INC     DPTR
   \   000109   A3           INC     DPTR
   \   00010A   A3           INC     DPTR
   \   00010B   A3           INC     DPTR
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   2409         ADD     A,#0x9
   \   00010F   F9           MOV     R1,A
   \   000110   AA..         MOV     R2,?XSP + 0
   \   000112   AB..         MOV     R3,?XSP + 1
   \   000114   12....       LCALL   `??MT_UartCalcFCS::?relay`; Banked call to: MT_UartCalcFCS
   \   000117   E9           MOV     A,R1
   \   000118   C0E0         PUSH    A
   \   00011A   EE           MOV     A,R6
   \   00011B   240B         ADD     A,#0xb
   \   00011D   F582         MOV     DPL,A
   \   00011F   E4           CLR     A
   \   000120   3F           ADDC    A,R7
   \   000121   F583         MOV     DPH,A
   \   000123   D0E0         POP     A
   \   000125   F0           MOVX    @DPTR,A
   1761          	buf[PKT_HEAD_LEN + protocol_pack->datalen] = protocol_pack->fcs;
   \   000126   EE           MOV     A,R6
   \   000127   240B         ADD     A,#0xb
   \   000129   F582         MOV     DPL,A
   \   00012B   E4           CLR     A
   \   00012C   3F           ADDC    A,R7
   \   00012D   F583         MOV     DPH,A
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   C0E0         PUSH    A
   \   000132   8E82         MOV     DPL,R6
   \   000134   8F83         MOV     DPH,R7
   \   000136   A3           INC     DPTR
   \   000137   A3           INC     DPTR
   \   000138   A3           INC     DPTR
   \   000139   A3           INC     DPTR
   \   00013A   A3           INC     DPTR
   \   00013B   A3           INC     DPTR
   \   00013C   A3           INC     DPTR
   \   00013D   A3           INC     DPTR
   \   00013E   E0           MOVX    A,@DPTR
   \   00013F   F8           MOV     R0,A
   \   000140   7900         MOV     R1,#0x0
   \   000142   85..82       MOV     DPL,?XSP + 0
   \   000145   85..83       MOV     DPH,?XSP + 1
   \   000148   E582         MOV     A,DPL
   \   00014A   28           ADD     A,R0
   \   00014B   F582         MOV     DPL,A
   \   00014D   E583         MOV     A,DPH
   \   00014F   39           ADDC    A,R1
   \   000150   F583         MOV     DPH,A
   \   000152   A3           INC     DPTR
   \   000153   A3           INC     DPTR
   \   000154   A3           INC     DPTR
   \   000155   A3           INC     DPTR
   \   000156   A3           INC     DPTR
   \   000157   A3           INC     DPTR
   \   000158   A3           INC     DPTR
   \   000159   A3           INC     DPTR
   \   00015A   A3           INC     DPTR
   \   00015B   D0E0         POP     A
   \   00015D   F0           MOVX    @DPTR,A
   1762          
   1763          	clusterid = GENERICAPP_P2P_PERMIT_JOIN_REQ_CLUSTERID;
   \   00015E   75..06       MOV     ?V2,#0x6
   \   000161   75..00       MOV     ?V3,#0x0
   1764          	SerialApp_TxAddr_p2p.addr.shortAddr = 0x0000;
   \   000164   90....       MOV     DPTR,#SerialApp_TxAddr_p2p
   \   000167   7400         MOV     A,#0x0
   \   000169   F0           MOVX    @DPTR,A
   \   00016A   A3           INC     DPTR
   \   00016B   7400         MOV     A,#0x0
   \   00016D   F0           MOVX    @DPTR,A
   1765          
   1766          	if ( AF_DataRequest( &SerialApp_TxAddr_p2p, &GenericApp_epDesc,
   1767          						clusterid,
   1768          						PKT_HEAD_LEN + SADDR_EXT_LEN + 1,
   1769          						buf, //(uint8 *)protocol_pack,
   1770          						&GenericApp_TransID,
   1771          						AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00016E                ; Setup parameters for call to function AF_DataRequest
   \   00016E   75..1E       MOV     ?V1,#0x1e
   \   000171   78..         MOV     R0,#?V1
   \   000173   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000176   75....       MOV     ?V4,#GenericApp_TransID & 0xff
   \   000179   75....       MOV     ?V5,#(GenericApp_TransID >> 8) & 0xff
   \   00017C   78..         MOV     R0,#?V4
   \   00017E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000181   7403         MOV     A,#0x3
   \   000183   12....       LCALL   ?XSTACK_DISP100_8
   \   000186   88..         MOV     ?V4,R0
   \   000188   89..         MOV     ?V5,R1
   \   00018A   78..         MOV     R0,#?V4
   \   00018C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00018F   75..12       MOV     ?V4,#0x12
   \   000192   75..00       MOV     ?V5,#0x0
   \   000195   78..         MOV     R0,#?V4
   \   000197   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00019A   78..         MOV     R0,#?V2
   \   00019C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00019F   7900         MOV     R1,#0x0
   \   0001A1   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   0001A3   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   0001A5   7A..         MOV     R2,#SerialApp_TxAddr_p2p & 0xff
   \   0001A7   7B..         MOV     R3,#(SerialApp_TxAddr_p2p >> 8) & 0xff
   \   0001A9   12....       LCALL   `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   0001AC   7409         MOV     A,#0x9
   \   0001AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B1   E9           MOV     A,R1
   \   0001B2   7005         JNZ     ??GenericApp_Device_JoinReq_2
   1772          	{
   1773          		ret = TRUE;
   \   0001B4   75..01       MOV     ?V0,#0x1
   \   0001B7   8003         SJMP    ??GenericApp_Device_JoinReq_3
   1774          	}
   1775          	else
   1776          	{
   1777          		ret = FALSE;
   \                     ??GenericApp_Device_JoinReq_2:
   \   0001B9   75..00       MOV     ?V0,#0x0
   1778          	}
   1779          	osal_msg_deallocate( (uint8 *)protocol_pack );
   \                     ??GenericApp_Device_JoinReq_3:
   \   0001BC                ; Setup parameters for call to function osal_msg_deallocate
   \   0001BC   EE           MOV     A,R6
   \   0001BD   FA           MOV     R2,A
   \   0001BE   EF           MOV     A,R7
   \   0001BF   FB           MOV     R3,A
   \   0001C0   12....       LCALL   `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \   0001C3   E9           MOV     A,R1
   1780          	return ret;
   \   0001C4   A9..         MOV     R1,?V0
   \                     ??GenericApp_Device_JoinReq_1:
   \   0001C6   74C8         MOV     A,#-0x38
   \   0001C8   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001CB   7F07         MOV     R7,#0x7
   \   0001CD   02....       LJMP    ?BANKED_LEAVE_XDATA
   1781          }
   1782          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1783          void GenericApp_Free_Join_DeviceInfo(ZDO_Permit_Join_Device_t *permit_join_device)  
   \                     GenericApp_Free_Join_DeviceInfo:
   1784          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0,R2
   \   000007   8B..         MOV     ?V1,R3
   1785          	ZDO_Permit_Join_Device_t *head_join_device;
   1786          	ZDO_Permit_Join_Device_t *tmp_join_device = permit_join_device;
   \   000009   A8..         MOV     R0,?V0
   \   00000B   A9..         MOV     R1,?V1
   \   00000D   E8           MOV     A,R0
   \   00000E   FE           MOV     R6,A
   \   00000F   E9           MOV     A,R1
   \   000010   FF           MOV     R7,A
   1787          	while (tmp_join_device)
   \                     ??GenericApp_Free_Join_DeviceInfo_0:
   \   000011   EE           MOV     A,R6
   \   000012   4F           ORL     A,R7
   \   000013   6026         JZ      ??GenericApp_Free_Join_DeviceInfo_1
   1788          	{
   1789          		head_join_device = tmp_join_device->next;
   \   000015   8E82         MOV     DPL,R6
   \   000017   8F83         MOV     DPH,R7
   \   000019   A3           INC     DPTR
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   A3           INC     DPTR
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F8           MOV     R0,A
   \   000023   A3           INC     DPTR
   \   000024   E0           MOVX    A,@DPTR
   \   000025   F9           MOV     R1,A
   \   000026   88..         MOV     ?V2,R0
   \   000028   89..         MOV     ?V3,R1
   1790          		osal_mem_free(tmp_join_device);   //chaokw open issue
   \   00002A                ; Setup parameters for call to function osal_mem_free
   \   00002A   EE           MOV     A,R6
   \   00002B   FA           MOV     R2,A
   \   00002C   EF           MOV     A,R7
   \   00002D   FB           MOV     R3,A
   \   00002E   12....       LCALL   `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   1791          		tmp_join_device = head_join_device;
   \   000031   A8..         MOV     R0,?V2
   \   000033   A9..         MOV     R1,?V3
   \   000035   E8           MOV     A,R0
   \   000036   FE           MOV     R6,A
   \   000037   E9           MOV     A,R1
   \   000038   FF           MOV     R7,A
   \   000039   80D6         SJMP    ??GenericApp_Free_Join_DeviceInfo_0
   1792          	}
   1793          }
   \                     ??GenericApp_Free_Join_DeviceInfo_1:
   \   00003B   7F04         MOV     R7,#0x4
   \   00003D   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for txMsgDelay>`:
   \   000000   88130000     DD 5000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for fw_version>`:
   \   000000   ....         DW `?<Constant "v01.00.008">`

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_Init::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_ProcessEvent::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_ProcessZDOMsgs::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessZDOMsgs

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_HandleKeys::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_MessageMSGCB::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_SendTheMessage::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_SendTheMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_NodeRegister::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_NodeRegister

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_NodeDelete::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_NodeDelete

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_NodeFindNwkAddrList::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_NodeFindNwkAddrList

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_NodeFindMacAddrList::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_NodeFindMacAddrList

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_ping_request_init::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_ping_request_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_linkstatus_init::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_linkstatus_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_ping_timeout_check_init::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_ping_timeout_check_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_coordinater_broadcast_ping_init::?r`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_coordinater_broadcast_ping_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_zigbee_start_ind::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_zigbee_start_ind

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_loadstatus_ind::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_loadstatus_ind

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_node_register_ind::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_node_register_ind

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_node_deregister_ind::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_node_deregister_ind

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_send_ping_req::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_send_ping_req

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_send_ping_rsp::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_send_ping_rsp

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_coordinater_broadcast_ping::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_coordinater_broadcast_ping

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_linkstatus_updated::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_linkstatus_updated

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_process_ping::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_process_ping

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_ping_timeout_check::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_ping_timeout_check

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??CustomApp_get_connected_node_count::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CustomApp_get_connected_node_count

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_Device_JoinRsp::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Device_JoinRsp

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_Get_PermitJoin::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Get_PermitJoin

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_Device_JoinReq::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Device_JoinReq

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??GenericApp_Free_Join_DeviceInfo::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Free_Join_DeviceInfo

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "v01.00.008">`:
   \   000000   7630312E     DB "v01.00.008"
   \            30302E30
   \            303800  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "GenericApp">`:
   \   000000   47656E65     DB "GenericApp"
   \            72696341
   \            707000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "aps ack:">`:
   \   000000   61707320     DB "aps ack:"
   \            61636B3A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "pingresult">`:
   \   000000   70696E67     DB "pingresult"
   \            72657375
   \            6C7400  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "panid:">`:
   \   000000   70616E69     DB "panid:"
   \            643A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "devState:">`:
   \   000000   64657653     DB "devState:"
   \            74617465
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nodregOK:">`:
   \   000000   6E6F6472     DB "nodregOK:"
   \            65674F4B
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Rcvd:">`:
   \   000000   52637664     DB "Rcvd:"
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "cmd Rcvd:">`:
   \   000000   636D6420     DB "cmd Rcvd:"
   \            52637664
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ping rsp:">`:
   \   000000   70696E67     DB "ping rsp:"
   \            20727370
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ask WL:">`:
   \   000000   61736B20     DB "ask WL:"
   \            574C3A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Hello World">`:
   \   000000   48656C6C     DB "Hello World"
   \            6F20576F
   \            726C6400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "pingreqSend">`:
   \   000000   70696E67     DB "pingreqSend"
   \            72657153
   \            656E6400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "pingrspSend">`:
   \   000000   70696E67     DB "pingrspSend"
   \            72737053
   \            656E6400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "broadcast ping">`:
   \   000000   62726F61     DB "broadcast ping"
   \            64636173
   \            74207069
   \            6E6700  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nodedelete OK:">`:
   \   000000   6E6F6465     DB "nodedelete OK:"
   \            64656C65
   \            7465204F
   \            4B3A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nodedelete NOK:">`:
   \   000000   6E6F6465     DB "nodedelete NOK:"
   \            64656C65
   \            7465204E
   \            4F4B3A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "connected:">`:
   \   000000   636F6E6E     DB "connected:"
   \            65637465
   \            643A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {0, 0, 0, 0, 0, 0, 0, 0}>`:
   \   000000   00           DB 0
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0
   \   000004   00           DB 0
   \   000005   00           DB 0
   \   000006   00           DB 0
   \   000007   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1388:
   \   000000   88130000     DD 5000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3a98:
   \   000000   983A0000     DD 15000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_2710:
   \   000000   10270000     DD 10000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_7d0:
   \   000000   D0070000     DD 2000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_65:
   \   000000   65000000     DD 101

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      0     28   CustomApp_NodeDelete
        0     12   -> osal_mem_free
      0     22   CustomApp_NodeFindMacAddrList
        0     10   -> sAddrExtCmp
      2     14   CustomApp_NodeFindNwkAddrList
      0     76   CustomApp_NodeRegister
        0     12   -> CustomApp_NodeFindMacAddrList
        0     12   -> osal_mem_alloc
      0     39   CustomApp_coordinater_broadcast_ping
        0     21   -> AF_DataRequest
        0     13   -> HalLcdWriteStringValue
      2     22   CustomApp_coordinater_broadcast_ping_init
        2      4   -> osal_start_timerEx
      2     16   CustomApp_get_connected_node_count
      2      4   CustomApp_linkstatus_init
        2      4   -> osal_start_timerEx
      0     58   CustomApp_linkstatus_updated
        0     16   -> Authlist_item_cnt
        0     16   -> CustomApp_NodeDelete
        0     16   -> CustomApp_get_connected_node_count
        0     40   -> CustomApp_node_deregister_ind
        0     17   -> HalLcdWriteStringValue
        0     16   -> Onboard_soft_reset
      1     51   CustomApp_loadstatus_ind
        0     30   -> HalUARTWrite
        0     30   -> MT_UartCalcFCS
        0     30   -> NLME_GetExtAddr
        0     30   -> NLME_GetShortAddr
        0     33   -> osal_memcpy
      1     67   CustomApp_node_deregister_ind
        0     24   -> HalUARTWrite
        0     24   -> MT_UartCalcFCS
        0     27   -> osal_memcpy
      1    108   CustomApp_node_register_ind
        0     41   -> HalUARTWrite
        0     41   -> MT_UartCalcFCS
        0     44   -> osal_memcpy
        0     41   -> osal_msg_allocate
        0     41   -> osal_msg_deallocate
      2     22   CustomApp_ping_request_init
        2      4   -> osal_start_timerEx
      0     38   CustomApp_ping_timeout_check
        0     20   -> Onboard_soft_reset
        0     20   -> abs
        0     20   -> osal_getClock
      2     22   CustomApp_ping_timeout_check_init
        2      4   -> osal_start_timerEx
      0     54   CustomApp_process_ping
        0     14   -> CustomApp_NodeFindNwkAddrList
        0     38   -> CustomApp_NodeRegister
        0     38   -> CustomApp_node_register_ind
        0     26   -> CustomApp_router_online_req
        0     14   -> CustomApp_send_ping_rsp
        0     15   -> HalLcdWriteStringValue
      1     43   CustomApp_send_ping_req
        0     25   -> AF_DataRequest
        0     17   -> HalLcdWriteStringValue
        0     16   -> NLME_GetExtAddr
        0     16   -> NLME_GetShortAddr
        0     16   -> osal_getClock
        0     19   -> osal_memcpy
        0     16   -> osal_memset
        0     16   -> osal_msg_allocate
        0     16   -> osal_msg_deallocate
      0     35   CustomApp_send_ping_rsp
        0     21   -> AF_DataRequest
        0     13   -> HalLcdWriteStringValue
      1     40   CustomApp_zigbee_start_ind
        0     28   -> HalUARTWrite
        0     28   -> MT_UartCalcFCS
        0     28   -> NLME_GetExtAddr
        0     31   -> osal_memcpy
      1    242   GenericApp_Device_JoinReq
        0    224   -> AF_DataRequest
        0    215   -> MT_UartCalcFCS
        0    215   -> NLME_GetShortAddr
        0    218   -> osal_memcpy
        0    215   -> osal_msg_allocate
        0    215   -> osal_msg_deallocate
      1    151   GenericApp_Device_JoinRsp
        0    135   -> AF_DataRequest
        0    127   -> Authlist_verify_device
        0    126   -> MT_UartCalcFCS
        0    126   -> NLME_GetShortAddr
        0    129   -> osal_memcpy
        0    126   -> osal_memset
        0    126   -> osal_msg_allocate
        0    126   -> osal_msg_deallocate
      0     30   GenericApp_Free_Join_DeviceInfo
        0     12   -> osal_mem_free
      0     45   GenericApp_Get_PermitJoin
        0     26   -> osal_mem_alloc
        0     29   -> osal_memcmp
        0     29   -> osal_memcpy
      0     48   GenericApp_HandleKeys
        0     21   -> HalLedSet
        0     21   -> NLME_GetShortAddr
        0     30   -> ZDP_EndDeviceBindReq
        0     29   -> ZDP_MatchDescReq
      0      9   GenericApp_Init
        0      9   -> CustomApp_zigbee_start_ind
        0      9   -> HalLcdWriteString
        0      9   -> RegisterForKeys
        0      9   -> Register_Group_Multiway
        0      9   -> ZDO_RegisterForZDOMsg
        0      9   -> afRegister
      0     35   GenericApp_MessageMSGCB
        0     16   -> CustomApp_AF_Broadcast_Data_Process
        0     16   -> CustomApp_AF_Group_Data_Process
        0     16   -> CustomApp_AF_P2P_Data_Process
        0     16   -> CustomApp_Coordinator_Online
        0     16   -> CustomApp_Get_Flex_Devinfo
        0     16   -> CustomApp_process_ping
        0     16   -> GenericApp_Device_JoinRsp
        0     16   -> GenericApp_Get_PermitJoin
        0     16   -> HalLcdWriteString
        0     17   -> HalLcdWriteStringValue
        0     16   -> HalLedSet
        0     16   -> Onboard_soft_reset
        0     16   -> osal_getClock
      0     22   GenericApp_ProcessEvent
        0     18   -> CustomApp_FW_Update
        0     18   -> CustomApp_Get_Active_Cnt
        0     18   -> CustomApp_Get_ExtAddr
        0     18   -> CustomApp_Get_NWKInfo
        0     18   -> CustomApp_Get_Version
        0     18   -> CustomApp_Send_BroadCast_Data
        0     18   -> CustomApp_Send_Group_Data
        0     18   -> CustomApp_Send_P2P_Data
        0     18   -> CustomApp_Set_Multiway
        0     18   -> CustomApp_coordinater_broadcast_ping
        0     18   -> CustomApp_coordinater_broadcast_ping_init
        0     18   -> CustomApp_coordinator_online_req
        0     18   -> CustomApp_linkstatus_updated
        0     18   -> CustomApp_loadstatus_ind
        0     18   -> CustomApp_ping_request_init
        0     18   -> CustomApp_ping_timeout_check
        0     18   -> CustomApp_ping_timeout_check_init
        0     18   -> CustomApp_send_ping_req
        0     18   -> GenericApp_Device_JoinReq
        0     18   -> GenericApp_Free_Join_DeviceInfo
        0     18   -> GenericApp_HandleKeys
        0     18   -> GenericApp_MessageMSGCB
        0     18   -> GenericApp_ProcessZDOMsgs
        0     18   -> GenericApp_SendTheMessage
        0     19   -> HalLcdWriteStringValue
        0     18   -> Onboard_soft_reset
        0     18   -> osal_msg_deallocate
        0     18   -> osal_msg_receive
        0     22   -> osal_start_timerEx
        0     18   -> osal_stop_timerEx
      0     82   GenericApp_ProcessZDOMsgs
        0     64   -> CustomApp_NodeRegister
        0     64   -> CustomApp_node_register_ind
        0     41   -> HalLcdWriteStringValue
        0     40   -> HalLedSet
        0     40   -> ZDO_ParseDeviceAnnce
        0     40   -> ZDO_ParseEPListRsp
        0     40   -> osal_mem_alloc
        0     40   -> osal_mem_free
        0     43   -> osal_memcpy
      0     49   GenericApp_SendTheMessage
        0     31   -> AF_DataRequest
        0     22   -> osal_strlen


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      11  ?<Constant "GenericApp">
      12  ?<Constant "Hello World">
       6  ?<Constant "Rcvd:">
       9  ?<Constant "aps ack:">
       8  ?<Constant "ask WL:">
      15  ?<Constant "broadcast ping">
      10  ?<Constant "cmd Rcvd:">
      11  ?<Constant "connected:">
      10  ?<Constant "devState:">
      16  ?<Constant "nodedelete NOK:">
      15  ?<Constant "nodedelete OK:">
      10  ?<Constant "nodregOK:">
       7  ?<Constant "panid:">
      10  ?<Constant "ping rsp:">
      12  ?<Constant "pingreqSend">
      11  ?<Constant "pingresult">
      12  ?<Constant "pingrspSend">
      11  ?<Constant "v01.00.008">
       8  ?<Constant {0, 0, 0, 0, 0, 0, 0, 0}>
       2  ?<Initializer for fw_version>
       4  ?<Initializer for txMsgDelay>
     184  CustomApp_NodeDelete
       6  CustomApp_NodeDelete::?relay
      72  CustomApp_NodeFindMacAddrList
       6  CustomApp_NodeFindMacAddrList::?relay
      60  CustomApp_NodeFindNwkAddrList
       6  CustomApp_NodeFindNwkAddrList::?relay
     224  CustomApp_NodeRegister
       6  CustomApp_NodeRegister::?relay
     145  CustomApp_coordinater_broadcast_ping
       6  CustomApp_coordinater_broadcast_ping::?relay
      35  CustomApp_coordinater_broadcast_ping_init
       6  CustomApp_coordinater_broadcast_ping_init::?relay
      55  CustomApp_get_connected_node_count
       6  CustomApp_get_connected_node_count::?relay
      35  CustomApp_linkstatus_init
       6  CustomApp_linkstatus_init::?relay
     337  CustomApp_linkstatus_updated
       6  CustomApp_linkstatus_updated::?relay
     179  CustomApp_loadstatus_ind
       6  CustomApp_loadstatus_ind::?relay
     129  CustomApp_node_deregister_ind
       6  CustomApp_node_deregister_ind::?relay
     529  CustomApp_node_register_ind
       6  CustomApp_node_register_ind::?relay
      35  CustomApp_ping_request_init
       6  CustomApp_ping_request_init::?relay
      72  CustomApp_ping_timeout_check
       6  CustomApp_ping_timeout_check::?relay
      35  CustomApp_ping_timeout_check_init
       6  CustomApp_ping_timeout_check_init::?relay
     355  CustomApp_process_ping
       6  CustomApp_process_ping::?relay
     370  CustomApp_send_ping_req
       6  CustomApp_send_ping_req::?relay
     147  CustomApp_send_ping_rsp
       6  CustomApp_send_ping_rsp::?relay
     139  CustomApp_zigbee_start_ind
       6  CustomApp_zigbee_start_ind::?relay
      14  GenericApp_ClusterList
     464  GenericApp_Device_JoinReq
       6  GenericApp_Device_JoinReq::?relay
     651  GenericApp_Device_JoinRsp
       6  GenericApp_Device_JoinRsp::?relay
      12  GenericApp_DstAddr
      64  GenericApp_Free_Join_DeviceInfo
       6  GenericApp_Free_Join_DeviceInfo::?relay
     438  GenericApp_Get_PermitJoin
       6  GenericApp_Get_PermitJoin::?relay
     318  GenericApp_HandleKeys
       6  GenericApp_HandleKeys::?relay
     207  GenericApp_Init
       6  GenericApp_Init::?relay
     536  GenericApp_MessageMSGCB
       6  GenericApp_MessageMSGCB::?relay
       1  GenericApp_NwkState
    1180  GenericApp_ProcessEvent
       6  GenericApp_ProcessEvent::?relay
     427  GenericApp_ProcessZDOMsgs
       6  GenericApp_ProcessZDOMsgs::?relay
     126  GenericApp_SendTheMessage
       6  GenericApp_SendTheMessage::?relay
      12  GenericApp_SimpleDesc
       1  GenericApp_TaskID
       1  GenericApp_TransID
       6  GenericApp_epDesc
      12  SerialApp_TxAddr_broadcast
      12  SerialApp_TxAddr_group
      12  SerialApp_TxAddr_p2p
       4  __Constant_1388
       4  __Constant_2710
       4  __Constant_3a98
       4  __Constant_65
       4  __Constant_7d0
       2  askWhiteListCount
       1  cnt
       1  device_index
       2  fw_version
       2  nodeList
       4  pingRspTime
       1  ping_error_cnt
       1  ping_result
       2  rxMsgCount
       1  transfer_join_times
       4  txMsgDelay
       1  zc_online_report_cnt
       1  zr_online_report_cnt

 
 7 548 bytes in segment BANKED_CODE
   174 bytes in segment BANK_RELAYS
     6 bytes in segment XDATA_I
     6 bytes in segment XDATA_ID
   250 bytes in segment XDATA_ROM_C
    74 bytes in segment XDATA_Z
 
 7 728 bytes of CODE  memory
   230 bytes of CONST memory (+ 20 bytes shared)
    80 bytes of XDATA memory

Errors: none
Warnings: none
