###############################################################################
#
# IAR C/C++ Compiler V9.30.1.3056 for 8051                21/Apr/2017  17:48:42
# Copyright 2004-2015 IAR Systems AB.
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Components\mac\high_level\mac_pib.c
#    Command line       =  
#        -f "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wRouter.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DRTR_NWK) -f "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x04000000 -DZDAPP_CONFIG_PAN_ID=0x0085
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=5
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07,
#        0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C,
#        0x0D}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440) -DCHANNEL_CNT=0x01 "C:\Texas
#        Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Components\mac\high_level\mac_pib.c" -D ZTOOL_P1 -D MT_TASK -D
#        MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG -D xNV_RESTORE -D
#        NV_INIT -D OPEN_FCS -D PANID_INCREASE -lC "C:\Texas
#        Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List" -lA
#        "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List"
#        --diag_suppress Pe001,Pa010 -o "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\Obj" -e
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa --debug
#        --core=plain --dptr=16,1 --data_model=large --code_model=banked
#        --calling_convention=xdata_reentrant --place_constants=data_rom
#        --nr_virtual_regs 16 -I "C:\Texas Instruments\Z-Stack Mesh
#        1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh
#        1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\" -I "C:\Texas
#        Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\Source\" -I
#        "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\Application\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\ZMain\TI2530DB\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\hal\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\mt\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\osal\include\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\services\saddr\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\services\sdata\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\af\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sec\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\sys\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\zmac\"
#        -I "C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack
#        Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
#        -On --require_prototypes
#    List file          =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\List\mac_pib.lst
#    Object file        =  
#        C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh
#        1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh
#        1.0.0\Projects\zstack\Samples\GenericApp\CC2530DB\RouterEB\Obj\mac_pib.r51
#
###############################################################################

C:\Texas Instruments\Z-Stack Mesh 1.0.0_chaokw_20160317\Z-Stack Mesh 1.0.0_chaokw_20160316\Z-Stack Mesh 1.0.0_LCDOK\Z-Stack Mesh 1.0.0\Components\mac\high_level\mac_pib.c
      1          /**************************************************************************************************
      2            Filename:       mac_pib.c
      3            Revised:        $Date: 2014-07-22 11:05:31 -0700 (Tue, 22 Jul 2014) $
      4            Revision:       $Revision: 39478 $
      5          
      6            Description:    This module contains procedures for the MAC PIB.
      7          
      8          
      9            Copyright 2006-2014 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /* ------------------------------------------------------------------------------------------------
     41           *                                          Includes
     42           * ------------------------------------------------------------------------------------------------
     43           */
     44          #include "hal_mcu.h"

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1
     45          #include "hal_board.h"
     46          #include "mac_api.h"
     47          #include "mac_spec.h"
     48          #include "mac_low_level.h"
     49          #include "mac_radio_defs.h"
     50          #include "mac_main.h"
     51          #include "mac_pib.h"
     52          #include "OSAL.h"
     53          #include <stddef.h>
     54          
     55          #include "R2R_FlashJT.h"
     56          #if defined( CC26XX ) || defined( CC26XX_PG2 )
     57          #include "R2F_FlashJT.h"
     58          #endif /* CC26XX || CC26XX_PG2 */
     59          
     60          /* ------------------------------------------------------------------------------------------------
     61           *                                           Constants
     62           * ------------------------------------------------------------------------------------------------
     63           */
     64          
     65          /* Attribute index constants, based on attribute ID values from spec */
     66          #define MAC_ATTR_SET1_START       0x40
     67          #define MAC_ATTR_SET1_END         0x5D
     68          #define MAC_ATTR_SET1_OFFSET      0
     69          #define MAC_ATTR_SET2_START       0xE0
     70          #define MAC_ATTR_SET2_END         0xEF
     71          #define MAC_ATTR_SET2_OFFSET      (MAC_ATTR_SET1_END - MAC_ATTR_SET1_START + MAC_ATTR_SET1_OFFSET + 1)
     72          
     73          /* frame response values */
     74          #define MAC_MAX_FRAME_RESPONSE_MIN  143
     75          #define MAC_MAX_FRAME_RESPONSE_MAX  25776
     76          
     77          /* ------------------------------------------------------------------------------------------------
     78           *                                           Typedefs
     79           * ------------------------------------------------------------------------------------------------
     80           */
     81          
     82          /* PIB access and min/max table type */
     83          typedef struct
     84          {
     85            uint8     offset;
     86            uint8     len;
     87            uint8     min;
     88            uint8     max;
     89          } macPibTbl_t;
     90          
     91          /* ------------------------------------------------------------------------------------------------
     92           *                                           Local Variables
     93           * ------------------------------------------------------------------------------------------------
     94           */
     95          
     96          /* PIB default values */

   \                                 In  segment CODE_C, align 1
     97          static CODE const macPib_t macPibDefaults =
   \                     macPibDefaults:
   \   000000   36           DB 54
   \   000001   00           DB 0
   \   000002   01           DB 1
   \   000003   00           DB 0
   \   000004   06           DB 6
   \   000005   0000         DW 0H
   \   000007   00           DB 0
   \   000008   0F           DB 15
   \   000009   00000000     DD 0
   \   00000D   00           DB 0
   \   00000E   0000         DW 0
   \   000010   00000000     DB 0, 0, 0, 0, 0, 0
   \            0000    
   \   000016   03           DB 3
   \   000017   FFFF         DW 65535
   \   000019   00           DB 0
   \   00001A   00           DB 0
   \   00001B   04           DB 4
   \   00001C   03           DB 3
   \   00001D   FFFF         DW 65535
   \   00001F   00           DB 0
   \   000020   00           DB 0
   \   000021   FFFF         DW 65535
   \   000023   0F           DB 15
   \   000024   F401         DW 500
   \   000026   00           DB 0
   \   000027   05           DB 5
   \   000028   C404         DW 1220
   \   00002A   03           DB 3
   \   00002B   20           DB 32
   \   00002C   00           DB 0
   \   00002D   01           DB 1
   \   00002E   00           DB 0
   \   00002F   00           DB 0
   \   000030   0B           DB 11
   \   000031   0000         DW 0
   \   000033   00000000     DB 0, 0, 0, 0, 0, 0
   \            0000    
   \   000039   03           DB 3
   \   00003A   01           DB 1
   \   00003B   0F           DB 15
   \   00003C   00           DB 0
   \   00003D   00           DB 0
   \   00003E   00000000     DD 0
   \   000042   00000000     DD 0
   \   000046   00000000     DD 0
   \   00004A   00000000     DD 0
   \   00004E   00000000     DD 0
   \   000052   00000000     DD 0
   \   000056   00000000     DD 0
   \   00005A   00000000     DD 0
   \   00005E   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000066   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   00006E   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000076   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
     98          {
     99            54,                                         /* ackWaitDuration */
    100            FALSE,                                      /* associationPermit */
    101            TRUE,                                       /* autoRequest */
    102            FALSE,                                      /* battLifeExt */
    103            6,                                          /* battLifeExtPeriods */
    104          
    105            NULL,                                       /* *pMacBeaconPayload */
    106            0,                                          /* beaconPayloadLength */
    107            MAC_BO_NON_BEACON,                          /* beaconOrder */
    108            0,                                          /* beaconTxTime */
    109            0,                                          /* bsn */
    110          
    111            {0, SADDR_MODE_EXT},                        /* coordExtendedAddress */
    112            MAC_SHORT_ADDR_NONE,                        /* coordShortAddress */
    113            0,                                          /* dsn */
    114            FALSE,                                      /* gtsPermit */
    115            4,                                          /* maxCsmaBackoffs */
    116          
    117            3,                                          /* minBe */
    118            0xFFFF,                                     /* panId */
    119            FALSE,                                      /* promiscuousMode */
    120            FALSE,                                      /* rxOnWhenIdle */
    121            MAC_SHORT_ADDR_NONE,                        /* shortAddress */
    122          
    123            MAC_SO_NONE,                                /* superframeOrder */
    124            0x01F4,                                     /* transactionPersistenceTime */
    125            FALSE,                                      /* assocciatedPanCoord */
    126            5,                                          /* maxBe */
    127            1220,                                       /* maxFrameTotalWaitTime */
    128          
    129            3,                                          /* maxFrameRetries */
    130            32,                                         /* ResponseWaitTime */
    131            0,                                          /* syncSymbolOffset */
    132            TRUE,                                       /* timeStampSupported */
    133            FALSE,                                      /* securityEnabled */
    134          
    135            /* Proprietary */
    136            0,                                          /* phyTransmitPower */
    137            MAC_CHAN_11,                                /* logicalChannel */
    138            {0, SADDR_MODE_EXT},                        /* extendedAddress */
    139            1,                                          /* altBe */
    140            MAC_BO_NON_BEACON,                          /* deviceBeaconOrder */
    141            0,                                          /* power savings for rf4ce */
    142            0,                                          /* default is frame Ver is always 0, 
    143                                                           except for security enabled packets */
    144            0,                                          /* diagsRxCrcPass */
    145            0,                                          /* diagsRxCrcFail */
    146            0,                                          /* diagsRxBcast */
    147            0,                                          /* diagsTxBcast */
    148            0,                                          /* diagsRxUcast */
    149            0,                                          /* diagsTxUcast */
    150            0,                                          /* diagsTxUcastRetry */
    151            0                                           /* diagsTxUcastFail */
    152          };
    153          
    154          /* PIB access and min/max table.  min/max of 0/0 means not checked; if min/max are
    155           * equal, element is read-only
    156           */

   \                                 In  segment CODE_C, align 1
    157          static CODE const macPibTbl_t macPibTbl[] =
   \                     macPibTbl:
   \   000000   00           DB 0
   \   000001   01           DB 1
   \   000002   36           DB 54
   \   000003   36           DB 54
   \   000004   01           DB 1
   \   000005   01           DB 1
   \   000006   00           DB 0
   \   000007   01           DB 1
   \   000008   02           DB 2
   \   000009   01           DB 1
   \   00000A   00           DB 0
   \   00000B   01           DB 1
   \   00000C   03           DB 3
   \   00000D   01           DB 1
   \   00000E   00           DB 0
   \   00000F   01           DB 1
   \   000010   04           DB 4
   \   000011   01           DB 1
   \   000012   06           DB 6
   \   000013   06           DB 6
   \   000014   05           DB 5
   \   000015   02           DB 2
   \   000016   00           DB 0
   \   000017   00           DB 0
   \   000018   07           DB 7
   \   000019   01           DB 1
   \   00001A   00           DB 0
   \   00001B   34           DB 52
   \   00001C   08           DB 8
   \   00001D   01           DB 1
   \   00001E   00           DB 0
   \   00001F   0F           DB 15
   \   000020   09           DB 9
   \   000021   04           DB 4
   \   000022   01           DB 1
   \   000023   01           DB 1
   \   000024   0D           DB 13
   \   000025   01           DB 1
   \   000026   00           DB 0
   \   000027   FF           DB 255
   \   000028   0E           DB 14
   \   000029   08           DB 8
   \   00002A   00           DB 0
   \   00002B   00           DB 0
   \   00002C   17           DB 23
   \   00002D   02           DB 2
   \   00002E   00           DB 0
   \   00002F   00           DB 0
   \   000030   19           DB 25
   \   000031   01           DB 1
   \   000032   00           DB 0
   \   000033   FF           DB 255
   \   000034   1A           DB 26
   \   000035   01           DB 1
   \   000036   00           DB 0
   \   000037   01           DB 1
   \   000038   1B           DB 27
   \   000039   01           DB 1
   \   00003A   00           DB 0
   \   00003B   FE           DB 254
   \   00003C   1C           DB 28
   \   00003D   01           DB 1
   \   00003E   00           DB 0
   \   00003F   08           DB 8
   \   000040   1D           DB 29
   \   000041   02           DB 2
   \   000042   00           DB 0
   \   000043   00           DB 0
   \   000044   1F           DB 31
   \   000045   01           DB 1
   \   000046   00           DB 0
   \   000047   01           DB 1
   \   000048   20           DB 32
   \   000049   01           DB 1
   \   00004A   00           DB 0
   \   00004B   01           DB 1
   \   00004C   21           DB 33
   \   00004D   02           DB 2
   \   00004E   00           DB 0
   \   00004F   00           DB 0
   \   000050   23           DB 35
   \   000051   01           DB 1
   \   000052   00           DB 0
   \   000053   0F           DB 15
   \   000054   24           DB 36
   \   000055   02           DB 2
   \   000056   00           DB 0
   \   000057   00           DB 0
   \   000058   26           DB 38
   \   000059   01           DB 1
   \   00005A   00           DB 0
   \   00005B   01           DB 1
   \   00005C   27           DB 39
   \   00005D   01           DB 1
   \   00005E   00           DB 0
   \   00005F   08           DB 8
   \   000060   28           DB 40
   \   000061   02           DB 2
   \   000062   00           DB 0
   \   000063   FF           DB 255
   \   000064   2A           DB 42
   \   000065   01           DB 1
   \   000066   00           DB 0
   \   000067   07           DB 7
   \   000068   2B           DB 43
   \   000069   01           DB 1
   \   00006A   02           DB 2
   \   00006B   40           DB 64
   \   00006C   2C           DB 44
   \   00006D   01           DB 1
   \   00006E   00           DB 0
   \   00006F   00           DB 0
   \   000070   2D           DB 45
   \   000071   01           DB 1
   \   000072   00           DB 0
   \   000073   01           DB 1
   \   000074   2E           DB 46
   \   000075   01           DB 1
   \   000076   00           DB 0
   \   000077   01           DB 1
   \   000078   2F           DB 47
   \   000079   01           DB 1
   \   00007A   00           DB 0
   \   00007B   FF           DB 255
   \   00007C   30           DB 48
   \   00007D   01           DB 1
   \   00007E   0B           DB 11
   \   00007F   1C           DB 28
   \   000080   31           DB 49
   \   000081   08           DB 8
   \   000082   00           DB 0
   \   000083   00           DB 0
   \   000084   3A           DB 58
   \   000085   01           DB 1
   \   000086   00           DB 0
   \   000087   08           DB 8
   \   000088   3B           DB 59
   \   000089   01           DB 1
   \   00008A   00           DB 0
   \   00008B   0F           DB 15
   \   00008C   3C           DB 60
   \   00008D   01           DB 1
   \   00008E   00           DB 0
   \   00008F   01           DB 1
   \   000090   3D           DB 61
   \   000091   01           DB 1
   \   000092   00           DB 0
   \   000093   FF           DB 255
   \   000094   3E           DB 62
   \   000095   04           DB 4
   \   000096   00           DB 0
   \   000097   00           DB 0
   \   000098   42           DB 66
   \   000099   04           DB 4
   \   00009A   00           DB 0
   \   00009B   00           DB 0
   \   00009C   46           DB 70
   \   00009D   04           DB 4
   \   00009E   00           DB 0
   \   00009F   00           DB 0
   \   0000A0   4A           DB 74
   \   0000A1   04           DB 4
   \   0000A2   00           DB 0
   \   0000A3   00           DB 0
   \   0000A4   4E           DB 78
   \   0000A5   04           DB 4
   \   0000A6   00           DB 0
   \   0000A7   00           DB 0
   \   0000A8   52           DB 82
   \   0000A9   04           DB 4
   \   0000AA   00           DB 0
   \   0000AB   00           DB 0
   \   0000AC   56           DB 86
   \   0000AD   04           DB 4
   \   0000AE   00           DB 0
   \   0000AF   00           DB 0
   \   0000B0   5A           DB 90
   \   0000B1   04           DB 4
   \   0000B2   00           DB 0
   \   0000B3   00           DB 0
   \   0000B4   5E           DB 94
   \   0000B5   20           DB 32
   \   0000B6   FF           DB 255
   \   0000B7   FF           DB 255
    158          {
    159            {offsetof(macPib_t, ackWaitDuration), sizeof(uint8), 54, 54},                      /* MAC_ACK_WAIT_DURATION */
    160            {offsetof(macPib_t, associationPermit), sizeof(bool), FALSE, TRUE},                /* MAC_ASSOCIATION_PERMIT */
    161            {offsetof(macPib_t, autoRequest), sizeof(bool), FALSE, TRUE},                      /* MAC_AUTO_REQUEST */
    162            {offsetof(macPib_t, battLifeExt), sizeof(bool), FALSE, TRUE},                      /* MAC_BATT_LIFE_EXT */
    163            {offsetof(macPib_t, battLifeExtPeriods), sizeof(uint8), 6, 6},                     /* MAC_BATT_LIFE_EXT_PERIODS */
    164          
    165            {offsetof(macPib_t, pBeaconPayload), sizeof(uint8 *), 0, 0},                       /* MAC_BEACON_PAYLOAD */
    166            {offsetof(macPib_t, beaconPayloadLength), sizeof(uint8), 0, 52},                   /* MAC_BEACON_PAYLOAD_LENGTH */
    167            {offsetof(macPib_t, beaconOrder), sizeof(uint8), 0, 15},                           /* MAC_BEACON_ORDER */
    168            {offsetof(macPib_t, beaconTxTime), sizeof(uint32), 1, 1},                          /* MAC_BEACON_TX_TIME */
    169            {offsetof(macPib_t, bsn), sizeof(uint8), 0x00, 0xFF},                              /* MAC_BSN */
    170          
    171            {offsetof(macPib_t, coordExtendedAddress.addr.extAddr), sizeof(sAddrExt_t), 0, 0}, /* MAC_COORD_EXTENDED_ADDRESS */
    172            {offsetof(macPib_t, coordShortAddress), sizeof(uint16), 0, 0},                     /* MAC_COORD_SHORT_ADDRESS */
    173            {offsetof(macPib_t, dsn), sizeof(uint8), 0x00, 0xFF},                              /* MAC_DSN */
    174            {offsetof(macPib_t, gtsPermit), sizeof(bool), FALSE, TRUE},                        /* MAC_GTS_PERMIT */
    175          
    176            /* Range of maxCsmaBackoffs is between 0 and 5 in IEEE 802.15.4.
    177             * Such restriction is removed here to allow 802.15.4 non-compliant experimental
    178             * applications.
    179             * To be compliant with 802.15.4, application or upper layer must not set this
    180             * PIB attribute out of range of 802.15.4.
    181             * The range is still restricted to 254 since value 255 would cause backoff
    182             * counter to overflow, wrap around and loop infinitely. */
    183            {offsetof(macPib_t, maxCsmaBackoffs), sizeof(uint8), 0, 254},                      /* MAC_MAX_CSMA_BACKOFFS */
    184          
    185            {offsetof(macPib_t, minBe), sizeof(uint8), 0, 8},                                  /* MAC_MIN_BE */
    186            {offsetof(macPib_t, panId), sizeof(uint16), 0, 0},                                 /* MAC_PAN_ID */
    187            {offsetof(macPib_t, promiscuousMode), sizeof(bool), FALSE, TRUE},                  /* MAC_PROMISCUOUS_MODE */
    188            {offsetof(macPib_t, rxOnWhenIdle), sizeof(bool), FALSE, TRUE},                     /* MAC_RX_ON_WHEN_IDLE */
    189            {offsetof(macPib_t, shortAddress), sizeof(uint16), 0, 0},                          /* MAC_SHORT_ADDRESS */
    190          
    191            {offsetof(macPib_t, superframeOrder), sizeof(uint8), 0, 15},                       /* MAC_SUPERFRAME_ORDER */
    192            {offsetof(macPib_t, transactionPersistenceTime), sizeof(uint16), 0, 0},            /* MAC_TRANSACTION_PERSISTENCE_TIME */
    193            {offsetof(macPib_t, associatedPanCoord), sizeof(bool), FALSE, TRUE},               /* MAC_ASSOCIATED_PAN_COORD */
    194          
    195            /* Range of maxBe is between 3 and 8 in IEEE 802.15.4.
    196             * Such restriction is removed here to allow 802.15.4 non-compliant experimental
    197             * applications.
    198             * To be compliant with 802.15.4, application or upper layer must not set this
    199             * PIB attribute out of range of 802.15.4. */
    200            {offsetof(macPib_t, maxBe), sizeof(uint8), 0, 8},                                  /* MAC_MAX_BE */
    201            {offsetof(macPib_t, maxFrameTotalWaitTime), sizeof(uint16), 0x00, 0xFF},           /* MAC_MAX_FRAME_RESPONSE_TIME */
    202          
    203            {offsetof(macPib_t, maxFrameRetries), sizeof(uint8), 0, 7},                        /* MAC_MAX_FRAME_RETRIES */
    204            {offsetof(macPib_t, responseWaitTime), sizeof(uint8), 2, 64},                      /* MAC_RESPONSE_WAIT_TIME */
    205            {offsetof(macPib_t, syncSymbolOffset), sizeof(uint8), 0, 0},                       /* MAC_SYNC_SYMBOL_OFFSET */
    206            {offsetof(macPib_t, timeStampSupported), sizeof(bool), FALSE, TRUE},               /* MAC_TIMESTAMP_SUPPORTED */
    207            {offsetof(macPib_t, securityEnabled), sizeof(bool), FALSE, TRUE},                  /* MAC_SECURITY_ENABLED */
    208          
    209            /* Proprietary PIBs */
    210            {offsetof(macPib_t, phyTransmitPower), sizeof(uint8), 0, 0xFF},                    /* MAC_PHY_TRANSMIT_POWER_SIGNED */
    211            {offsetof(macPib_t, logicalChannel), sizeof(uint8), MAC_CHAN_11, MAC_CHAN_28},     /* MAC_LOGICAL_CHANNEL */
    212            {offsetof(macPib_t, extendedAddress.addr.extAddr), sizeof(sAddrExt_t), 0, 0},      /* MAC_EXTENDED_ADDRESS */
    213            {offsetof(macPib_t, altBe), sizeof(uint8), 0, 8},                                  /* MAC_ALT_BE */
    214            {offsetof(macPib_t, deviceBeaconOrder), sizeof(uint8), 0, 15},                     /* MAC_DEVICE_BEACON_ORDER */
    215            {offsetof(macPib_t, rf4cepowerSavings), sizeof(uint8), 0, 1},                      /* MAC_RF4CE_POWER_SAVINGS */
    216            {offsetof(macPib_t, frameVersionSupport), sizeof(uint8), 0, 0xFF},                 /* MAC_FRAME_VERSION_SUPPORT */
    217            {offsetof(macPib_t, diagsRxCrcPass), sizeof(uint32), 0, 0},                        /* MAC_DIAGS_RX_CRC_PASS */
    218            {offsetof(macPib_t, diagsRxCrcFail), sizeof(uint32), 0, 0},                        /* MAC_DIAGS_RX_CRC_FAIL */
    219            {offsetof(macPib_t, diagsRxBcast), sizeof(uint32), 0, 0},                          /* MAC_DIAGS_RX_BCAST */
    220            {offsetof(macPib_t, diagsTxBcast), sizeof(uint32), 0, 0},                          /* MAC_DIAGS_TX_BCAST */
    221            {offsetof(macPib_t, diagsRxUcast), sizeof(uint32), 0, 0},                          /* MAC_DIAGS_RX_UCAST */
    222            {offsetof(macPib_t, diagsTxUcast), sizeof(uint32), 0, 0},                          /* MAC_DIAGS_TX_UCAST */
    223            {offsetof(macPib_t, diagsTxUcastRetry), sizeof(uint32), 0, 0},                     /* MAC_DIAGS_TX_UCAST_RETRY */
    224            {offsetof(macPib_t, diagsTxUcastFail), sizeof(uint32), 0, 0},                      /* MAC_DIAGS_TX_UCAST_FAIL *//* MAC_DIAGS_TX_UCAST_FAIL */
    225            {offsetof(macPib_t, randomSeed), MAC_RANDOM_SEED_LEN, 0xFF, 0xFF}                  /* MAC_RANDOM_SEED */
    226          };
    227          
    228          /* Invalid PIB table index used for error code */
    229          #define MAC_PIB_INVALID     ((uint8) (sizeof(macPibTbl) / sizeof(macPibTbl[0])))
    230          
    231          /* ------------------------------------------------------------------------------------------------
    232           *                                           Global Variables
    233           * ------------------------------------------------------------------------------------------------
    234           */
    235          
    236          /* MAC PIB */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    237          macPib_t macPib;
   \                     macPib:
   \   000000                DS 126
   \   00007E                REQUIRE __INIT_XDATA_Z
    238          
    239          extern uint8 MAC_MlmeGetReqSize( uint8 pibAttribute );
    240          
    241          #if defined( FEATURE_MAC_PIB_PTR )
    242          
    243          /* Pointer to the MAC PIB */
    244          macPib_t* pMacPib = &macPib;
    245          
    246          /**************************************************************************************************
    247           * @fn          MAC_MlmeSetActivePib
    248           *
    249           * @brief       This function initializes the PIB.
    250           *
    251           * input parameters
    252           *
    253           * @param       None.
    254           *
    255           * output parameters
    256           *
    257           * None.
    258           *
    259           * @return      None.
    260           **************************************************************************************************
    261           */
    262          void MAC_MlmeSetActivePib( void* pPib )
    263          {
    264            halIntState_t intState;
    265            HAL_ENTER_CRITICAL_SECTION(intState);
    266            pMacPib = (macPib_t *)pPib;
    267            HAL_EXIT_CRITICAL_SECTION(intState);
    268          }
    269          #endif /* FEATURE_MAC_PIB_PTR */
    270          
    271          /**************************************************************************************************
    272           * @fn          macPibReset
    273           *
    274           * @brief       This function initializes the PIB.
    275           *
    276           * input parameters
    277           *
    278           * @param       None.
    279           *
    280           * output parameters
    281           *
    282           * None.
    283           *
    284           * @return      None.
    285           **************************************************************************************************
    286           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    287          MAC_INTERNAL_API void macPibReset(void)
   \                     macPibReset:
    288          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 32
   \   000005   74E0         MOV     A,#-0x20
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    289            /* Preserve initialized proprietary values. */
    290            uint8 randomSeed[MAC_RANDOM_SEED_LEN];
    291            osal_memcpy(randomSeed, pMacPib->randomSeed, MAC_RANDOM_SEED_LEN);
   \   00000A                ; Setup parameters for call to function osal_memcpy
   \   00000A   75....       MOV     ?V0,#(macPib + 94) & 0xff
   \   00000D   75....       MOV     ?V1,#((macPib + 94) >> 8) & 0xff
   \   000010   75..00       MOV     ?V2,#0x0
   \   000013   78..         MOV     R0,#?V0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000018   7C20         MOV     R4,#0x20
   \   00001A   7D00         MOV     R5,#0x0
   \   00001C   7403         MOV     A,#0x3
   \   00001E   12....       LCALL   ?XSTACK_DISP101_8
   \   000021   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000024   7403         MOV     A,#0x3
   \   000026   12....       LCALL   ?DEALLOC_XSTACK8
    292          
    293            /* copy PIB defaults */
    294          #if defined( FEATURE_MAC_PIB_PTR )  
    295            *pMacPib = macPibDefaults;
    296          #else
    297            macPib = macPibDefaults;
   \   000029   90....       MOV     DPTR,#macPibDefaults
   \   00002C   7C..         MOV     R4,#macPib & 0xff
   \   00002E   7D..         MOV     R5,#(macPib >> 8) & 0xff
   \   000030   747E         MOV     A,#0x7e
   \   000032   12....       LCALL   ?MOVE_LONG8_XDATA_CODE
    298          #endif /* FEATURE_MAC_PIB_PTR */
    299            
    300            osal_memcpy(pMacPib->randomSeed, randomSeed, MAC_RANDOM_SEED_LEN);
   \   000035                ; Setup parameters for call to function osal_memcpy
   \   000035   A8..         MOV     R0,?XSP + 0
   \   000037   A9..         MOV     R1,?XSP + 1
   \   000039   88..         MOV     ?V0,R0
   \   00003B   89..         MOV     ?V1,R1
   \   00003D   75..00       MOV     ?V2,#0x0
   \   000040   78..         MOV     R0,#?V0
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000045   7C20         MOV     R4,#0x20
   \   000047   7D00         MOV     R5,#0x0
   \   000049   7A..         MOV     R2,#(macPib + 94) & 0xff
   \   00004B   7B..         MOV     R3,#((macPib + 94) >> 8) & 0xff
   \   00004D   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000050   7403         MOV     A,#0x3
   \   000052   12....       LCALL   ?DEALLOC_XSTACK8
    301          
    302            /* initialize random sequence numbers */
    303            pMacPib->dsn = macRadioRandomByte();
   \   000055                ; Setup parameters for call to function macRadioRandomByte
   \   000055   12....       LCALL   `??macRadioRandomByte::?relay`; Banked call to: macRadioRandomByte
   \   000058   E9           MOV     A,R1
   \   000059   90....       MOV     DPTR,#macPib + 25
   \   00005C   F0           MOVX    @DPTR,A
    304            pMacPib->bsn = macRadioRandomByte();
   \   00005D                ; Setup parameters for call to function macRadioRandomByte
   \   00005D   12....       LCALL   `??macRadioRandomByte::?relay`; Banked call to: macRadioRandomByte
   \   000060   E9           MOV     A,R1
   \   000061   90....       MOV     DPTR,#macPib + 13
   \   000064   F0           MOVX    @DPTR,A
    305          }
   \   000065   7420         MOV     A,#0x20
   \   000067   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006A   7F03         MOV     R7,#0x3
   \   00006C   02....       LJMP    ?BANKED_LEAVE_XDATA
    306          
    307          /**************************************************************************************************
    308           * @fn          macPibIndex
    309           *
    310           * @brief       This function takes an PIB attribute and returns the index in to
    311           *              macPibTbl for the attribute.
    312           *
    313           * input parameters
    314           *
    315           * @param       pibAttribute - PIB attribute to look up.
    316           *
    317           * output parameters
    318           *
    319           * None.
    320           *
    321           * @return      Index in to macPibTbl for the attribute or MAC_PIB_INVALID.
    322           **************************************************************************************************
    323           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    324          MAC_INTERNAL_API uint8 macPibIndex(uint8 pibAttribute)
   \                     macPibIndex:
    325          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    326            if ((pibAttribute >= MAC_ATTR_SET1_START) && (pibAttribute <= MAC_ATTR_SET1_END))
   \   000002   E8           MOV     A,R0
   \   000003   C3           CLR     C
   \   000004   9440         SUBB    A,#0x40
   \   000006   400C         JC      ??macPibIndex_0
   \   000008   E8           MOV     A,R0
   \   000009   C3           CLR     C
   \   00000A   945E         SUBB    A,#0x5e
   \   00000C   5006         JNC     ??macPibIndex_0
    327            {
    328              return (pibAttribute - MAC_ATTR_SET1_START + MAC_ATTR_SET1_OFFSET);
   \   00000E   74C0         MOV     A,#-0x40
   \   000010   28           ADD     A,R0
   \   000011   F9           MOV     R1,A
   \   000012   8014         SJMP    ??macPibIndex_1
    329            }
    330            else if ((pibAttribute >= MAC_ATTR_SET2_START) && (pibAttribute <= MAC_ATTR_SET2_END))
   \                     ??macPibIndex_0:
   \   000014   E8           MOV     A,R0
   \   000015   C3           CLR     C
   \   000016   94E0         SUBB    A,#-0x20
   \   000018   400C         JC      ??macPibIndex_2
   \   00001A   E8           MOV     A,R0
   \   00001B   C3           CLR     C
   \   00001C   94F0         SUBB    A,#-0x10
   \   00001E   5006         JNC     ??macPibIndex_2
    331            {
    332              return (pibAttribute - MAC_ATTR_SET2_START + MAC_ATTR_SET2_OFFSET);
   \   000020   743E         MOV     A,#0x3e
   \   000022   28           ADD     A,R0
   \   000023   F9           MOV     R1,A
   \   000024   8002         SJMP    ??macPibIndex_1
    333            }
    334            else
    335            {
    336              return MAC_PIB_INVALID;
   \                     ??macPibIndex_2:
   \   000026   792E         MOV     R1,#0x2e
   \                     ??macPibIndex_1:
   \   000028   02....       LJMP    ?BRET
    337            }
    338          }
    339          
    340          
    341          /**************************************************************************************************
    342           * @fn          MAC_MlmeGetReq
    343           *
    344           * @brief       This direct execute function retrieves an attribute value
    345           *              from the MAC PIB.
    346           *
    347           * input parameters
    348           *
    349           * @param       pibAttribute - The attribute identifier.
    350           * @param       pValue - pointer to the attribute value.
    351           *
    352           * output parameters
    353           *
    354           * @param       pValue - pointer to the attribute value.
    355           *
    356           * @return      The status of the request, as follows:
    357           *              MAC_SUCCESS Operation successful.
    358           *              MAC_UNSUPPORTED_ATTRIBUTE Attribute not found.
    359           *
    360           **************************************************************************************************
    361           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    362          uint8 MAC_MlmeGetReq(uint8 pibAttribute, void *pValue)
   \                     MAC_MlmeGetReq:
    363          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V4,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    364            uint8         i;
    365            halIntState_t intState;
    366          
    367            if ((i = MAP_macPibIndex(pibAttribute)) == MAC_PIB_INVALID)
   \   00000B                ; Setup parameters for call to function macPibIndex
   \   00000B   A9..         MOV     R1,?V4
   \   00000D   12....       LCALL   `??macPibIndex::?relay`; Banked call to: macPibIndex
   \   000010   E9           MOV     A,R1
   \   000011   F8           MOV     R0,A
   \   000012   88..         MOV     ?V5,R0
   \   000014   742E         MOV     A,#0x2e
   \   000016   68           XRL     A,R0
   \   000017   7005         JNZ     ??MAC_MlmeGetReq_0
    368            {
    369              return MAC_UNSUPPORTED_ATTRIBUTE;
   \   000019   79F4         MOV     R1,#-0xc
   \   00001B   02....       LJMP    ??MAC_MlmeGetReq_1 & 0xFFFF
    370            }
    371          
    372            HAL_ENTER_CRITICAL_SECTION(intState);
   \                     ??MAC_MlmeGetReq_0:
   \   00001E   A2AF         MOV     C,0xa8.7
   \   000020   E4           CLR     A
   \   000021   33           RLC     A
   \   000022   F5..         MOV     ?V3,A
   \   000024   C2AF         CLR     0xa8.7
    373            osal_memcpy(pValue, (uint8 *) pMacPib + macPibTbl[i].offset, macPibTbl[i].len);
   \   000026                ; Setup parameters for call to function osal_memcpy
   \   000026   A8..         MOV     R0,?V5
   \   000028   7900         MOV     R1,#0x0
   \   00002A   E8           MOV     A,R0
   \   00002B   75F004       MOV     B,#0x4
   \   00002E   A4           MUL     AB
   \   00002F   C8           XCH     A,R0
   \   000030   AAF0         MOV     R2,B
   \   000032   75F000       MOV     B,#0x0
   \   000035   A4           MUL     AB
   \   000036   2A           ADD     A,R2
   \   000037   FA           MOV     R2,A
   \   000038   75F004       MOV     B,#0x4
   \   00003B   E9           MOV     A,R1
   \   00003C   A4           MUL     AB
   \   00003D   2A           ADD     A,R2
   \   00003E   F9           MOV     R1,A
   \   00003F   74..         MOV     A,#macPibTbl & 0xff
   \   000041   28           ADD     A,R0
   \   000042   F582         MOV     DPL,A
   \   000044   74..         MOV     A,#(macPibTbl >> 8) & 0xff
   \   000046   39           ADDC    A,R1
   \   000047   F583         MOV     DPH,A
   \   000049   E4           CLR     A
   \   00004A   93           MOVC    A,@A+DPTR
   \   00004B   F8           MOV     R0,A
   \   00004C   7900         MOV     R1,#0x0
   \   00004E   74..         MOV     A,#macPib & 0xff
   \   000050   28           ADD     A,R0
   \   000051   F5..         MOV     ?V0,A
   \   000053   74..         MOV     A,#(macPib >> 8) & 0xff
   \   000055   39           ADDC    A,R1
   \   000056   F5..         MOV     ?V1,A
   \   000058   75..00       MOV     ?V2,#0x0
   \   00005B   78..         MOV     R0,#?V0
   \   00005D   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000060   A8..         MOV     R0,?V5
   \   000062   7900         MOV     R1,#0x0
   \   000064   E8           MOV     A,R0
   \   000065   75F004       MOV     B,#0x4
   \   000068   A4           MUL     AB
   \   000069   C8           XCH     A,R0
   \   00006A   AAF0         MOV     R2,B
   \   00006C   75F000       MOV     B,#0x0
   \   00006F   A4           MUL     AB
   \   000070   2A           ADD     A,R2
   \   000071   FA           MOV     R2,A
   \   000072   75F004       MOV     B,#0x4
   \   000075   E9           MOV     A,R1
   \   000076   A4           MUL     AB
   \   000077   2A           ADD     A,R2
   \   000078   F9           MOV     R1,A
   \   000079   74..         MOV     A,#(macPibTbl + 1) & 0xff
   \   00007B   28           ADD     A,R0
   \   00007C   F582         MOV     DPL,A
   \   00007E   74..         MOV     A,#((macPibTbl + 1) >> 8) & 0xff
   \   000080   39           ADDC    A,R1
   \   000081   F583         MOV     DPH,A
   \   000083   E4           CLR     A
   \   000084   93           MOVC    A,@A+DPTR
   \   000085   FC           MOV     R4,A
   \   000086   7D00         MOV     R5,#0x0
   \   000088   EE           MOV     A,R6
   \   000089   FA           MOV     R2,A
   \   00008A   EF           MOV     A,R7
   \   00008B   FB           MOV     R3,A
   \   00008C   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00008F   7403         MOV     A,#0x3
   \   000091   12....       LCALL   ?DEALLOC_XSTACK8
    374            HAL_EXIT_CRITICAL_SECTION(intState);
   \   000094   A8..         MOV     R0,?V3
   \   000096   E5..         MOV     A,?V3
   \   000098   A2E0         MOV     C,0xE0 /* A   */.0
   \   00009A   92AF         MOV     0xa8.7,C
    375            return MAC_SUCCESS;
   \   00009C   7900         MOV     R1,#0x0
   \                     ??MAC_MlmeGetReq_1:
   \   00009E   7F06         MOV     R7,#0x6
   \   0000A0   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   0000A3                REQUIRE _A_IEN0
    376          }
    377          
    378          /**************************************************************************************************
    379           * @fn          MAC_MlmeGetReqSize
    380           *
    381           * @brief       This direct execute function gets the MAC PIB attribute size
    382           *
    383           * input parameters
    384           *
    385           * @param       pibAttribute - The attribute identifier.
    386           *
    387           * output parameters
    388           *
    389           * None.
    390           *
    391           * @return      size in bytes
    392           *
    393           **************************************************************************************************
    394           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    395          uint8 MAC_MlmeGetReqSize( uint8 pibAttribute )
   \                     MAC_MlmeGetReqSize:
    396          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    397            uint8 index;
    398          
    399            if ((index = MAP_macPibIndex(pibAttribute)) == MAC_PIB_INVALID)
   \   000007                ; Setup parameters for call to function macPibIndex
   \   000007   EE           MOV     A,R6
   \   000008   F9           MOV     R1,A
   \   000009   12....       LCALL   `??macPibIndex::?relay`; Banked call to: macPibIndex
   \   00000C   E9           MOV     A,R1
   \   00000D   F8           MOV     R0,A
   \   00000E   E8           MOV     A,R0
   \   00000F   FF           MOV     R7,A
   \   000010   742E         MOV     A,#0x2e
   \   000012   68           XRL     A,R0
   \   000013   7004         JNZ     ??MAC_MlmeGetReqSize_0
    400            {
    401              return 0;
   \   000015   7900         MOV     R1,#0x0
   \   000017   8026         SJMP    ??MAC_MlmeGetReqSize_1
    402            }
    403          
    404            return ( macPibTbl[index].len );
   \                     ??MAC_MlmeGetReqSize_0:
   \   000019   EF           MOV     A,R7
   \   00001A   F8           MOV     R0,A
   \   00001B   7900         MOV     R1,#0x0
   \   00001D   E8           MOV     A,R0
   \   00001E   75F004       MOV     B,#0x4
   \   000021   A4           MUL     AB
   \   000022   C8           XCH     A,R0
   \   000023   AAF0         MOV     R2,B
   \   000025   75F000       MOV     B,#0x0
   \   000028   A4           MUL     AB
   \   000029   2A           ADD     A,R2
   \   00002A   FA           MOV     R2,A
   \   00002B   75F004       MOV     B,#0x4
   \   00002E   E9           MOV     A,R1
   \   00002F   A4           MUL     AB
   \   000030   2A           ADD     A,R2
   \   000031   F9           MOV     R1,A
   \   000032   74..         MOV     A,#(macPibTbl + 1) & 0xff
   \   000034   28           ADD     A,R0
   \   000035   F582         MOV     DPL,A
   \   000037   74..         MOV     A,#((macPibTbl + 1) >> 8) & 0xff
   \   000039   39           ADDC    A,R1
   \   00003A   F583         MOV     DPH,A
   \   00003C   E4           CLR     A
   \   00003D   93           MOVC    A,@A+DPTR
   \   00003E   F9           MOV     R1,A
   \                     ??MAC_MlmeGetReqSize_1:
   \   00003F   7F01         MOV     R7,#0x1
   \   000041   02....       LJMP    ?BANKED_LEAVE_XDATA
    405          }
    406          
    407          /**************************************************************************************************
    408           * @fn          MAC_MlmeSetReq
    409           *
    410           * @brief       This direct execute function sets an attribute value
    411           *              in the MAC PIB.
    412           *
    413           * input parameters
    414           *
    415           * @param       pibAttribute - The attribute identifier.
    416           * @param       pValue - pointer to the attribute value.
    417           *
    418           * output parameters
    419           *
    420           * None.
    421           *
    422           * @return      The status of the request, as follows:
    423           *              MAC_SUCCESS Operation successful.
    424           *              MAC_UNSUPPORTED_ATTRIBUTE Attribute not found.
    425           *
    426           **************************************************************************************************
    427           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    428          uint8 MAC_MlmeSetReq(uint8 pibAttribute, void *pValue)
   \                     MAC_MlmeSetReq:
    429          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V4,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    430            uint8         i;
    431            halIntState_t intState;
    432          
    433            if (pibAttribute == MAC_BEACON_PAYLOAD)
   \   00000B   7445         MOV     A,#0x45
   \   00000D   65..         XRL     A,?V4
   \   00000F   700D         JNZ     ??MAC_MlmeSetReq_0
    434            {
    435              pMacPib->pBeaconPayload = pValue;
   \   000011   90....       MOV     DPTR,#macPib + 5
   \   000014   EE           MOV     A,R6
   \   000015   F0           MOVX    @DPTR,A
   \   000016   A3           INC     DPTR
   \   000017   EF           MOV     A,R7
   \   000018   F0           MOVX    @DPTR,A
    436              return MAC_SUCCESS;
   \   000019   7900         MOV     R1,#0x0
   \   00001B   02....       LJMP    ??MAC_MlmeSetReq_1 & 0xFFFF
    437            }
    438          
    439            /* look up attribute in PIB table */
    440            if ((i = MAP_macPibIndex(pibAttribute)) == MAC_PIB_INVALID)
   \                     ??MAC_MlmeSetReq_0:
   \   00001E                ; Setup parameters for call to function macPibIndex
   \   00001E   A9..         MOV     R1,?V4
   \   000020   12....       LCALL   `??macPibIndex::?relay`; Banked call to: macPibIndex
   \   000023   E9           MOV     A,R1
   \   000024   F8           MOV     R0,A
   \   000025   88..         MOV     ?V5,R0
   \   000027   742E         MOV     A,#0x2e
   \   000029   68           XRL     A,R0
   \   00002A   7005         JNZ     ??MAC_MlmeSetReq_2
    441            {
    442              return MAC_UNSUPPORTED_ATTRIBUTE;
   \   00002C   79F4         MOV     R1,#-0xc
   \   00002E   02....       LJMP    ??MAC_MlmeSetReq_1 & 0xFFFF
    443            }
    444          
    445            /* do range check; no range check if min and max are zero */
    446            if ((macPibTbl[i].min != 0) || (macPibTbl[i].max != 0))
   \                     ??MAC_MlmeSetReq_2:
   \   000031   A8..         MOV     R0,?V5
   \   000033   7900         MOV     R1,#0x0
   \   000035   E8           MOV     A,R0
   \   000036   75F004       MOV     B,#0x4
   \   000039   A4           MUL     AB
   \   00003A   C8           XCH     A,R0
   \   00003B   AAF0         MOV     R2,B
   \   00003D   75F000       MOV     B,#0x0
   \   000040   A4           MUL     AB
   \   000041   2A           ADD     A,R2
   \   000042   FA           MOV     R2,A
   \   000043   75F004       MOV     B,#0x4
   \   000046   E9           MOV     A,R1
   \   000047   A4           MUL     AB
   \   000048   2A           ADD     A,R2
   \   000049   F9           MOV     R1,A
   \   00004A   74..         MOV     A,#(macPibTbl + 2) & 0xff
   \   00004C   28           ADD     A,R0
   \   00004D   F582         MOV     DPL,A
   \   00004F   74..         MOV     A,#((macPibTbl + 2) >> 8) & 0xff
   \   000051   39           ADDC    A,R1
   \   000052   F583         MOV     DPH,A
   \   000054   E4           CLR     A
   \   000055   93           MOVC    A,@A+DPTR
   \   000056   702A         JNZ     ??MAC_MlmeSetReq_3
   \   000058   A8..         MOV     R0,?V5
   \   00005A   7900         MOV     R1,#0x0
   \   00005C   E8           MOV     A,R0
   \   00005D   75F004       MOV     B,#0x4
   \   000060   A4           MUL     AB
   \   000061   C8           XCH     A,R0
   \   000062   AAF0         MOV     R2,B
   \   000064   75F000       MOV     B,#0x0
   \   000067   A4           MUL     AB
   \   000068   2A           ADD     A,R2
   \   000069   FA           MOV     R2,A
   \   00006A   75F004       MOV     B,#0x4
   \   00006D   E9           MOV     A,R1
   \   00006E   A4           MUL     AB
   \   00006F   2A           ADD     A,R2
   \   000070   F9           MOV     R1,A
   \   000071   74..         MOV     A,#(macPibTbl + 3) & 0xff
   \   000073   28           ADD     A,R0
   \   000074   F582         MOV     DPL,A
   \   000076   74..         MOV     A,#((macPibTbl + 3) >> 8) & 0xff
   \   000078   39           ADDC    A,R1
   \   000079   F583         MOV     DPH,A
   \   00007B   E4           CLR     A
   \   00007C   93           MOVC    A,@A+DPTR
   \   00007D   7003         JNZ     $+5
   \   00007F   02....       LJMP    ??MAC_MlmeSetReq_4 & 0xFFFF
    447            {
    448              /* if min == max, this is a read-only attribute */
    449              if (macPibTbl[i].min == macPibTbl[i].max)
   \                     ??MAC_MlmeSetReq_3:
   \   000082   A8..         MOV     R0,?V5
   \   000084   7900         MOV     R1,#0x0
   \   000086   E8           MOV     A,R0
   \   000087   75F004       MOV     B,#0x4
   \   00008A   A4           MUL     AB
   \   00008B   C8           XCH     A,R0
   \   00008C   AAF0         MOV     R2,B
   \   00008E   75F000       MOV     B,#0x0
   \   000091   A4           MUL     AB
   \   000092   2A           ADD     A,R2
   \   000093   FA           MOV     R2,A
   \   000094   75F004       MOV     B,#0x4
   \   000097   E9           MOV     A,R1
   \   000098   A4           MUL     AB
   \   000099   2A           ADD     A,R2
   \   00009A   F9           MOV     R1,A
   \   00009B   74..         MOV     A,#(macPibTbl + 2) & 0xff
   \   00009D   28           ADD     A,R0
   \   00009E   F582         MOV     DPL,A
   \   0000A0   74..         MOV     A,#((macPibTbl + 2) >> 8) & 0xff
   \   0000A2   39           ADDC    A,R1
   \   0000A3   F583         MOV     DPH,A
   \   0000A5   E4           CLR     A
   \   0000A6   93           MOVC    A,@A+DPTR
   \   0000A7   FB           MOV     R3,A
   \   0000A8   A8..         MOV     R0,?V5
   \   0000AA   7900         MOV     R1,#0x0
   \   0000AC   E8           MOV     A,R0
   \   0000AD   75F004       MOV     B,#0x4
   \   0000B0   A4           MUL     AB
   \   0000B1   C8           XCH     A,R0
   \   0000B2   AAF0         MOV     R2,B
   \   0000B4   75F000       MOV     B,#0x0
   \   0000B7   A4           MUL     AB
   \   0000B8   2A           ADD     A,R2
   \   0000B9   FA           MOV     R2,A
   \   0000BA   75F004       MOV     B,#0x4
   \   0000BD   E9           MOV     A,R1
   \   0000BE   A4           MUL     AB
   \   0000BF   2A           ADD     A,R2
   \   0000C0   F9           MOV     R1,A
   \   0000C1   74..         MOV     A,#(macPibTbl + 3) & 0xff
   \   0000C3   28           ADD     A,R0
   \   0000C4   F582         MOV     DPL,A
   \   0000C6   74..         MOV     A,#((macPibTbl + 3) >> 8) & 0xff
   \   0000C8   39           ADDC    A,R1
   \   0000C9   F583         MOV     DPH,A
   \   0000CB   E4           CLR     A
   \   0000CC   93           MOVC    A,@A+DPTR
   \   0000CD   6B           XRL     A,R3
   \   0000CE   7005         JNZ     ??MAC_MlmeSetReq_5
    450              {
    451                return MAC_READ_ONLY;
   \   0000D0   79FB         MOV     R1,#-0x5
   \   0000D2   02....       LJMP    ??MAC_MlmeSetReq_1 & 0xFFFF
    452              }
    453          
    454              /* check for special cases */
    455              if (pibAttribute == MAC_MAX_FRAME_TOTAL_WAIT_TIME)
   \                     ??MAC_MlmeSetReq_5:
   \   0000D5   7458         MOV     A,#0x58
   \   0000D7   65..         XRL     A,?V4
   \   0000D9   7021         JNZ     ??MAC_MlmeSetReq_6
    456              {
    457                if ((*((uint16 *) pValue) < MAC_MAX_FRAME_RESPONSE_MIN) ||
    458                    (*((uint16 *) pValue) > MAC_MAX_FRAME_RESPONSE_MAX))
   \   0000DB   8E82         MOV     DPL,R6
   \   0000DD   8F83         MOV     DPH,R7
   \   0000DF   C3           CLR     C
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   948F         SUBB    A,#-0x71
   \   0000E3   A3           INC     DPTR
   \   0000E4   E0           MOVX    A,@DPTR
   \   0000E5   9400         SUBB    A,#0x0
   \   0000E7   400E         JC      ??MAC_MlmeSetReq_7
   \   0000E9   8E82         MOV     DPL,R6
   \   0000EB   8F83         MOV     DPH,R7
   \   0000ED   C3           CLR     C
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   94B1         SUBB    A,#-0x4f
   \   0000F1   A3           INC     DPTR
   \   0000F2   E0           MOVX    A,@DPTR
   \   0000F3   9464         SUBB    A,#0x64
   \   0000F5   4005         JC      ??MAC_MlmeSetReq_6
    459                {
    460                  return MAC_INVALID_PARAMETER;
   \                     ??MAC_MlmeSetReq_7:
   \   0000F7   79E8         MOV     R1,#-0x18
   \   0000F9   02....       LJMP    ??MAC_MlmeSetReq_1 & 0xFFFF
    461                }
    462              }
    463          
    464              /* range check for general case */
    465              if ((*((uint8 *) pValue) < macPibTbl[i].min) || (*((uint8 *) pValue) > macPibTbl[i].max))
   \                     ??MAC_MlmeSetReq_6:
   \   0000FC   A8..         MOV     R0,?V5
   \   0000FE   7900         MOV     R1,#0x0
   \   000100   E8           MOV     A,R0
   \   000101   75F004       MOV     B,#0x4
   \   000104   A4           MUL     AB
   \   000105   C8           XCH     A,R0
   \   000106   AAF0         MOV     R2,B
   \   000108   75F000       MOV     B,#0x0
   \   00010B   A4           MUL     AB
   \   00010C   2A           ADD     A,R2
   \   00010D   FA           MOV     R2,A
   \   00010E   75F004       MOV     B,#0x4
   \   000111   E9           MOV     A,R1
   \   000112   A4           MUL     AB
   \   000113   2A           ADD     A,R2
   \   000114   F9           MOV     R1,A
   \   000115   74..         MOV     A,#(macPibTbl + 2) & 0xff
   \   000117   28           ADD     A,R0
   \   000118   F582         MOV     DPL,A
   \   00011A   74..         MOV     A,#((macPibTbl + 2) >> 8) & 0xff
   \   00011C   39           ADDC    A,R1
   \   00011D   F583         MOV     DPH,A
   \   00011F   E4           CLR     A
   \   000120   93           MOVC    A,@A+DPTR
   \   000121   F8           MOV     R0,A
   \   000122   8E82         MOV     DPL,R6
   \   000124   8F83         MOV     DPH,R7
   \   000126   E0           MOVX    A,@DPTR
   \   000127   C3           CLR     C
   \   000128   98           SUBB    A,R0
   \   000129   402F         JC      ??MAC_MlmeSetReq_8
   \   00012B   8E82         MOV     DPL,R6
   \   00012D   8F83         MOV     DPH,R7
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   FB           MOV     R3,A
   \   000131   A8..         MOV     R0,?V5
   \   000133   7900         MOV     R1,#0x0
   \   000135   E8           MOV     A,R0
   \   000136   75F004       MOV     B,#0x4
   \   000139   A4           MUL     AB
   \   00013A   C8           XCH     A,R0
   \   00013B   AAF0         MOV     R2,B
   \   00013D   75F000       MOV     B,#0x0
   \   000140   A4           MUL     AB
   \   000141   2A           ADD     A,R2
   \   000142   FA           MOV     R2,A
   \   000143   75F004       MOV     B,#0x4
   \   000146   E9           MOV     A,R1
   \   000147   A4           MUL     AB
   \   000148   2A           ADD     A,R2
   \   000149   F9           MOV     R1,A
   \   00014A   74..         MOV     A,#(macPibTbl + 3) & 0xff
   \   00014C   28           ADD     A,R0
   \   00014D   F582         MOV     DPL,A
   \   00014F   74..         MOV     A,#((macPibTbl + 3) >> 8) & 0xff
   \   000151   39           ADDC    A,R1
   \   000152   F583         MOV     DPH,A
   \   000154   E4           CLR     A
   \   000155   93           MOVC    A,@A+DPTR
   \   000156   C3           CLR     C
   \   000157   9B           SUBB    A,R3
   \   000158   5005         JNC     ??MAC_MlmeSetReq_4
    466              {
    467                return MAC_INVALID_PARAMETER;
   \                     ??MAC_MlmeSetReq_8:
   \   00015A   79E8         MOV     R1,#-0x18
   \   00015C   02....       LJMP    ??MAC_MlmeSetReq_1 & 0xFFFF
    468              }
    469          
    470            }
    471          
    472            /* set value in PIB */
    473            HAL_ENTER_CRITICAL_SECTION(intState);
   \                     ??MAC_MlmeSetReq_4:
   \   00015F   A2AF         MOV     C,0xa8.7
   \   000161   E4           CLR     A
   \   000162   33           RLC     A
   \   000163   F5..         MOV     ?V3,A
   \   000165   C2AF         CLR     0xa8.7
    474            osal_memcpy((uint8 *) pMacPib + macPibTbl[i].offset, pValue, macPibTbl[i].len);
   \   000167                ; Setup parameters for call to function osal_memcpy
   \   000167   8E..         MOV     ?V0,R6
   \   000169   8F..         MOV     ?V1,R7
   \   00016B   75..00       MOV     ?V2,#0x0
   \   00016E   78..         MOV     R0,#?V0
   \   000170   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000173   A8..         MOV     R0,?V5
   \   000175   7900         MOV     R1,#0x0
   \   000177   E8           MOV     A,R0
   \   000178   75F004       MOV     B,#0x4
   \   00017B   A4           MUL     AB
   \   00017C   C8           XCH     A,R0
   \   00017D   AAF0         MOV     R2,B
   \   00017F   75F000       MOV     B,#0x0
   \   000182   A4           MUL     AB
   \   000183   2A           ADD     A,R2
   \   000184   FA           MOV     R2,A
   \   000185   75F004       MOV     B,#0x4
   \   000188   E9           MOV     A,R1
   \   000189   A4           MUL     AB
   \   00018A   2A           ADD     A,R2
   \   00018B   F9           MOV     R1,A
   \   00018C   74..         MOV     A,#(macPibTbl + 1) & 0xff
   \   00018E   28           ADD     A,R0
   \   00018F   F582         MOV     DPL,A
   \   000191   74..         MOV     A,#((macPibTbl + 1) >> 8) & 0xff
   \   000193   39           ADDC    A,R1
   \   000194   F583         MOV     DPH,A
   \   000196   E4           CLR     A
   \   000197   93           MOVC    A,@A+DPTR
   \   000198   FC           MOV     R4,A
   \   000199   7D00         MOV     R5,#0x0
   \   00019B   A8..         MOV     R0,?V5
   \   00019D   7900         MOV     R1,#0x0
   \   00019F   E8           MOV     A,R0
   \   0001A0   75F004       MOV     B,#0x4
   \   0001A3   A4           MUL     AB
   \   0001A4   C8           XCH     A,R0
   \   0001A5   AAF0         MOV     R2,B
   \   0001A7   75F000       MOV     B,#0x0
   \   0001AA   A4           MUL     AB
   \   0001AB   2A           ADD     A,R2
   \   0001AC   FA           MOV     R2,A
   \   0001AD   75F004       MOV     B,#0x4
   \   0001B0   E9           MOV     A,R1
   \   0001B1   A4           MUL     AB
   \   0001B2   2A           ADD     A,R2
   \   0001B3   F9           MOV     R1,A
   \   0001B4   74..         MOV     A,#macPibTbl & 0xff
   \   0001B6   28           ADD     A,R0
   \   0001B7   F582         MOV     DPL,A
   \   0001B9   74..         MOV     A,#(macPibTbl >> 8) & 0xff
   \   0001BB   39           ADDC    A,R1
   \   0001BC   F583         MOV     DPH,A
   \   0001BE   E4           CLR     A
   \   0001BF   93           MOVC    A,@A+DPTR
   \   0001C0   F8           MOV     R0,A
   \   0001C1   7900         MOV     R1,#0x0
   \   0001C3   74..         MOV     A,#macPib & 0xff
   \   0001C5   28           ADD     A,R0
   \   0001C6   FA           MOV     R2,A
   \   0001C7   74..         MOV     A,#(macPib >> 8) & 0xff
   \   0001C9   39           ADDC    A,R1
   \   0001CA   FB           MOV     R3,A
   \   0001CB   12....       LCALL   `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   0001CE   7403         MOV     A,#0x3
   \   0001D0   12....       LCALL   ?DEALLOC_XSTACK8
    475            HAL_EXIT_CRITICAL_SECTION(intState);
   \   0001D3   85....       MOV     ?V0,?V3
   \   0001D6   E5..         MOV     A,?V3
   \   0001D8   A2E0         MOV     C,0xE0 /* A   */.0
   \   0001DA   92AF         MOV     0xa8.7,C
    476          
    477            /* handle special cases */
    478            switch (pibAttribute)
   \   0001DC   E5..         MOV     A,?V4
   \   0001DE   24B0         ADD     A,#-0x50
   \   0001E0   601A         JZ      ??MAC_MlmeSetReq_9
   \   0001E2   24FE         ADD     A,#-0x2
   \   0001E4   6030         JZ      ??MAC_MlmeSetReq_10
   \   0001E6   14           DEC     A
   \   0001E7   6020         JZ      ??MAC_MlmeSetReq_11
   \   0001E9   2473         ADD     A,#0x73
   \   0001EB   6050         JZ      ??MAC_MlmeSetReq_12
   \   0001ED   14           DEC     A
   \   0001EE   603A         JZ      ??MAC_MlmeSetReq_13
   \   0001F0   14           DEC     A
   \   0001F1   6041         JZ      ??MAC_MlmeSetReq_14
   \   0001F3   24FD         ADD     A,#-0x3
   \   0001F5   6051         JZ      ??MAC_MlmeSetReq_15
   \   0001F7   14           DEC     A
   \   0001F8   6059         JZ      ??MAC_MlmeSetReq_16
   \   0001FA   8060         SJMP    ??MAC_MlmeSetReq_17
    479            {
    480              case MAC_PAN_ID:
    481                /* set pan id in radio */
    482                macRadioSetPanID(pMacPib->panId);
   \                     ??MAC_MlmeSetReq_9:
   \   0001FC                ; Setup parameters for call to function macRadioSetPanID
   \   0001FC   90....       MOV     DPTR,#macPib + 29
   \   0001FF   E0           MOVX    A,@DPTR
   \   000200   FA           MOV     R2,A
   \   000201   A3           INC     DPTR
   \   000202   E0           MOVX    A,@DPTR
   \   000203   FB           MOV     R3,A
   \   000204   12....       LCALL   `??macRadioSetPanID::?relay`; Banked call to: macRadioSetPanID
    483                break;
   \   000207   8053         SJMP    ??MAC_MlmeSetReq_17
    484          
    485              case MAC_SHORT_ADDRESS:
    486                /* set short address in radio */
    487                macRadioSetShortAddr(pMacPib->shortAddress);
   \                     ??MAC_MlmeSetReq_11:
   \   000209                ; Setup parameters for call to function macRadioSetShortAddr
   \   000209   90....       MOV     DPTR,#macPib + 33
   \   00020C   E0           MOVX    A,@DPTR
   \   00020D   FA           MOV     R2,A
   \   00020E   A3           INC     DPTR
   \   00020F   E0           MOVX    A,@DPTR
   \   000210   FB           MOV     R3,A
   \   000211   12....       LCALL   `??macRadioSetShortAddr::?relay`; Banked call to: macRadioSetShortAddr
    488                break;
   \   000214   8046         SJMP    ??MAC_MlmeSetReq_17
    489          
    490              case MAC_RX_ON_WHEN_IDLE:
    491                /* turn rx on or off */
    492                if (pMacPib->rxOnWhenIdle)
   \                     ??MAC_MlmeSetReq_10:
   \   000216   90....       MOV     DPTR,#macPib + 32
   \   000219   E0           MOVX    A,@DPTR
   \   00021A   6007         JZ      ??MAC_MlmeSetReq_18
    493                {
    494                  macRxEnable(MAC_RX_WHEN_IDLE);
   \   00021C                ; Setup parameters for call to function macRxEnable
   \   00021C   7902         MOV     R1,#0x2
   \   00021E   12....       LCALL   `??macRxEnable::?relay`; Banked call to: macRxEnable
   \   000221   8039         SJMP    ??MAC_MlmeSetReq_17
    495                }
    496                else
    497                {
    498                  macRxDisable(MAC_RX_WHEN_IDLE);
   \                     ??MAC_MlmeSetReq_18:
   \   000223                ; Setup parameters for call to function macRxDisable
   \   000223   7902         MOV     R1,#0x2
   \   000225   12....       LCALL   `??macRxDisable::?relay`; Banked call to: macRxDisable
    499                }
    500                break;
   \   000228   8032         SJMP    ??MAC_MlmeSetReq_17
    501          
    502              case MAC_LOGICAL_CHANNEL:
    503                macRadioSetChannel(pMacPib->logicalChannel);
   \                     ??MAC_MlmeSetReq_13:
   \   00022A                ; Setup parameters for call to function macRadioSetChannel
   \   00022A   90....       MOV     DPTR,#macPib + 48
   \   00022D   E0           MOVX    A,@DPTR
   \   00022E   F9           MOV     R1,A
   \   00022F   12....       LCALL   `??macRadioSetChannel::?relay`; Banked call to: macRadioSetChannel
    504                break;
   \   000232   8028         SJMP    ??MAC_MlmeSetReq_17
    505          
    506              case MAC_EXTENDED_ADDRESS:
    507                /* set ext address in radio */
    508                macRadioSetIEEEAddr(pMacPib->extendedAddress.addr.extAddr);
   \                     ??MAC_MlmeSetReq_14:
   \   000234                ; Setup parameters for call to function macRadioSetIEEEAddr
   \   000234   7A..         MOV     R2,#(macPib + 49) & 0xff
   \   000236   7B..         MOV     R3,#((macPib + 49) >> 8) & 0xff
   \   000238   12....       LCALL   `??macRadioSetIEEEAddr::?relay`; Banked call to: macRadioSetIEEEAddr
    509                break;
   \   00023B   801F         SJMP    ??MAC_MlmeSetReq_17
    510          
    511              case MAC_PHY_TRANSMIT_POWER_SIGNED:
    512                (void)macRadioSetTxPower(pMacPib->phyTransmitPower);
   \                     ??MAC_MlmeSetReq_12:
   \   00023D                ; Setup parameters for call to function macRadioSetTxPower
   \   00023D   90....       MOV     DPTR,#macPib + 47
   \   000240   E0           MOVX    A,@DPTR
   \   000241   F9           MOV     R1,A
   \   000242   12....       LCALL   `??macRadioSetTxPower::?relay`; Banked call to: macRadioSetTxPower
   \   000245   E9           MOV     A,R1
    513                break;
   \   000246   8014         SJMP    ??MAC_MlmeSetReq_17
    514          
    515              case MAC_RF4CE_POWER_SAVINGS:
    516                pMacPib->rf4cepowerSavings = *(uint8 *)pValue;
   \                     ??MAC_MlmeSetReq_15:
   \   000248   8E82         MOV     DPL,R6
   \   00024A   8F83         MOV     DPH,R7
   \   00024C   E0           MOVX    A,@DPTR
   \   00024D   90....       MOV     DPTR,#macPib + 60
   \   000250   F0           MOVX    @DPTR,A
    517                break;
   \   000251   8009         SJMP    ??MAC_MlmeSetReq_17
    518           
    519              case MAC_FRAME_VERSION_SUPPORT:
    520                pMacPib->frameVersionSupport = *(uint8 *)pValue;
   \                     ??MAC_MlmeSetReq_16:
   \   000253   8E82         MOV     DPL,R6
   \   000255   8F83         MOV     DPH,R7
   \   000257   E0           MOVX    A,@DPTR
   \   000258   90....       MOV     DPTR,#macPib + 61
   \   00025B   F0           MOVX    @DPTR,A
    521                break;
    522          
    523              default:
    524                break;
    525            }
    526          
    527            return MAC_SUCCESS;
   \                     ??MAC_MlmeSetReq_17:
   \   00025C   7900         MOV     R1,#0x0
   \                     ??MAC_MlmeSetReq_1:
   \   00025E   7F06         MOV     R7,#0x6
   \   000260   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000263                REQUIRE _A_IEN0
    528          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??macPibReset::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macPibReset

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??macPibIndex::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macPibIndex

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MAC_MlmeGetReq::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MAC_MlmeGetReq

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MAC_MlmeGetReqSize::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MAC_MlmeGetReqSize

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MAC_MlmeSetReq::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MAC_MlmeSetReq
    529          

   Maximum stack usage in bytes:

   XSTACK Function
   ------ --------
     17   MAC_MlmeGetReq
       14   -> macPibIndex
       17   -> osal_memcpy
      9   MAC_MlmeGetReqSize
        9   -> macPibIndex
     17   MAC_MlmeSetReq
       14   -> macPibIndex
       14   -> macRadioSetChannel
       14   -> macRadioSetIEEEAddr
       14   -> macRadioSetPanID
       14   -> macRadioSetShortAddr
       14   -> macRadioSetTxPower
       14   -> macRxDisable
       14   -> macRxEnable
       17   -> osal_memcpy
     14   macPibIndex
     46   macPibReset
       43   -> macRadioRandomByte
       46   -> osal_memcpy


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
     163  MAC_MlmeGetReq
       6  MAC_MlmeGetReq::?relay
      68  MAC_MlmeGetReqSize
       6  MAC_MlmeGetReqSize::?relay
     611  MAC_MlmeSetReq
       6  MAC_MlmeSetReq::?relay
       1  _A_IEN0
     126  macPib
     126  macPibDefaults
      43  macPibIndex
       6  macPibIndex::?relay
     111  macPibReset
       6  macPibReset::?relay
     184  macPibTbl

 
 996 bytes in segment BANKED_CODE
  30 bytes in segment BANK_RELAYS
 310 bytes in segment CODE_C
   1 byte  in segment SFR_AN
 126 bytes in segment XDATA_Z
 
 1 336 bytes of CODE  memory
     0 bytes of DATA  memory (+ 1 byte shared)
   126 bytes of XDATA memory

Errors: none
Warnings: none
